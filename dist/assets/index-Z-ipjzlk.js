function e0(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function t0(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var qm={exports:{}},rl={},Km={exports:{}},q={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ro=Symbol.for("react.element"),n0=Symbol.for("react.portal"),r0=Symbol.for("react.fragment"),s0=Symbol.for("react.strict_mode"),i0=Symbol.for("react.profiler"),o0=Symbol.for("react.provider"),a0=Symbol.for("react.context"),l0=Symbol.for("react.forward_ref"),c0=Symbol.for("react.suspense"),u0=Symbol.for("react.memo"),d0=Symbol.for("react.lazy"),nf=Symbol.iterator;function h0(t){return t===null||typeof t!="object"?null:(t=nf&&t[nf]||t["@@iterator"],typeof t=="function"?t:null)}var Ym={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Qm=Object.assign,Jm={};function Ts(t,e,n){this.props=t,this.context=e,this.refs=Jm,this.updater=n||Ym}Ts.prototype.isReactComponent={};Ts.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ts.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Xm(){}Xm.prototype=Ts.prototype;function ed(t,e,n){this.props=t,this.context=e,this.refs=Jm,this.updater=n||Ym}var td=ed.prototype=new Xm;td.constructor=ed;Qm(td,Ts.prototype);td.isPureReactComponent=!0;var rf=Array.isArray,Zm=Object.prototype.hasOwnProperty,nd={current:null},eg={key:!0,ref:!0,__self:!0,__source:!0};function tg(t,e,n){var r,s={},i=null,a=null;if(e!=null)for(r in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(i=""+e.key),e)Zm.call(e,r)&&!eg.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:ro,type:t,key:i,ref:a,props:s,_owner:nd.current}}function f0(t,e){return{$$typeof:ro,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function rd(t){return typeof t=="object"&&t!==null&&t.$$typeof===ro}function p0(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var sf=/\/+/g;function Wl(t,e){return typeof t=="object"&&t!==null&&t.key!=null?p0(""+t.key):e.toString(36)}function Wo(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case ro:case n0:a=!0}}if(a)return a=t,s=s(a),t=r===""?"."+Wl(a,0):r,rf(s)?(n="",t!=null&&(n=t.replace(sf,"$&/")+"/"),Wo(s,e,n,"",function(u){return u})):s!=null&&(rd(s)&&(s=f0(s,n+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(sf,"$&/")+"/")+t)),e.push(s)),1;if(a=0,r=r===""?".":r+":",rf(t))for(var l=0;l<t.length;l++){i=t[l];var c=r+Wl(i,l);a+=Wo(i,e,n,c,s)}else if(c=h0(t),typeof c=="function")for(t=c.call(t),l=0;!(i=t.next()).done;)i=i.value,c=r+Wl(i,l++),a+=Wo(i,e,n,c,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function wo(t,e,n){if(t==null)return t;var r=[],s=0;return Wo(t,r,"","",function(i){return e.call(n,i,s++)}),r}function m0(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ke={current:null},$o={transition:null},g0={ReactCurrentDispatcher:Ke,ReactCurrentBatchConfig:$o,ReactCurrentOwner:nd};function ng(){throw Error("act(...) is not supported in production builds of React.")}q.Children={map:wo,forEach:function(t,e,n){wo(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return wo(t,function(){e++}),e},toArray:function(t){return wo(t,function(e){return e})||[]},only:function(t){if(!rd(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};q.Component=Ts;q.Fragment=r0;q.Profiler=i0;q.PureComponent=ed;q.StrictMode=s0;q.Suspense=c0;q.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=g0;q.act=ng;q.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Qm({},t.props),s=t.key,i=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,a=nd.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)Zm.call(e,c)&&!eg.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:ro,type:t.type,key:s,ref:i,props:r,_owner:a}};q.createContext=function(t){return t={$$typeof:a0,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:o0,_context:t},t.Consumer=t};q.createElement=tg;q.createFactory=function(t){var e=tg.bind(null,t);return e.type=t,e};q.createRef=function(){return{current:null}};q.forwardRef=function(t){return{$$typeof:l0,render:t}};q.isValidElement=rd;q.lazy=function(t){return{$$typeof:d0,_payload:{_status:-1,_result:t},_init:m0}};q.memo=function(t,e){return{$$typeof:u0,type:t,compare:e===void 0?null:e}};q.startTransition=function(t){var e=$o.transition;$o.transition={};try{t()}finally{$o.transition=e}};q.unstable_act=ng;q.useCallback=function(t,e){return Ke.current.useCallback(t,e)};q.useContext=function(t){return Ke.current.useContext(t)};q.useDebugValue=function(){};q.useDeferredValue=function(t){return Ke.current.useDeferredValue(t)};q.useEffect=function(t,e){return Ke.current.useEffect(t,e)};q.useId=function(){return Ke.current.useId()};q.useImperativeHandle=function(t,e,n){return Ke.current.useImperativeHandle(t,e,n)};q.useInsertionEffect=function(t,e){return Ke.current.useInsertionEffect(t,e)};q.useLayoutEffect=function(t,e){return Ke.current.useLayoutEffect(t,e)};q.useMemo=function(t,e){return Ke.current.useMemo(t,e)};q.useReducer=function(t,e,n){return Ke.current.useReducer(t,e,n)};q.useRef=function(t){return Ke.current.useRef(t)};q.useState=function(t){return Ke.current.useState(t)};q.useSyncExternalStore=function(t,e,n){return Ke.current.useSyncExternalStore(t,e,n)};q.useTransition=function(){return Ke.current.useTransition()};q.version="18.3.1";Km.exports=q;var S=Km.exports;const sd=t0(S),y0=e0({__proto__:null,default:sd},[S]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var v0=S,x0=Symbol.for("react.element"),_0=Symbol.for("react.fragment"),w0=Object.prototype.hasOwnProperty,S0=v0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,C0={key:!0,ref:!0,__self:!0,__source:!0};function rg(t,e,n){var r,s={},i=null,a=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(a=e.ref);for(r in e)w0.call(e,r)&&!C0.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:x0,type:t,key:i,ref:a,props:s,_owner:S0.current}}rl.Fragment=_0;rl.jsx=rg;rl.jsxs=rg;qm.exports=rl;var o=qm.exports,sg={exports:{}},dt={},ig={exports:{}},og={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(P,W){var B=P.length;P.push(W);e:for(;0<B;){var ue=B-1>>>1,xe=P[ue];if(0<s(xe,W))P[ue]=W,P[B]=xe,B=ue;else break e}}function n(P){return P.length===0?null:P[0]}function r(P){if(P.length===0)return null;var W=P[0],B=P.pop();if(B!==W){P[0]=B;e:for(var ue=0,xe=P.length,Br=xe>>>1;ue<Br;){var Jt=2*(ue+1)-1,Ws=P[Jt],Xt=Jt+1,zr=P[Xt];if(0>s(Ws,B))Xt<xe&&0>s(zr,Ws)?(P[ue]=zr,P[Xt]=B,ue=Xt):(P[ue]=Ws,P[Jt]=B,ue=Jt);else if(Xt<xe&&0>s(zr,B))P[ue]=zr,P[Xt]=B,ue=Xt;else break e}}return W}function s(P,W){var B=P.sortIndex-W.sortIndex;return B!==0?B:P.id-W.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],u=[],h=1,f=null,d=3,x=!1,w=!1,p=!1,_=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(P){for(var W=n(u);W!==null;){if(W.callback===null)r(u);else if(W.startTime<=P)r(u),W.sortIndex=W.expirationTime,e(c,W);else break;W=n(u)}}function v(P){if(p=!1,y(P),!w)if(n(c)!==null)w=!0,Bt(C);else{var W=n(u);W!==null&&it(v,W.startTime-P)}}function C(P,W){w=!1,p&&(p=!1,m(I),I=-1),x=!0;var B=d;try{for(y(W),f=n(c);f!==null&&(!(f.expirationTime>W)||P&&!$());){var ue=f.callback;if(typeof ue=="function"){f.callback=null,d=f.priorityLevel;var xe=ue(f.expirationTime<=W);W=t.unstable_now(),typeof xe=="function"?f.callback=xe:f===n(c)&&r(c),y(W)}else r(c);f=n(c)}if(f!==null)var Br=!0;else{var Jt=n(u);Jt!==null&&it(v,Jt.startTime-W),Br=!1}return Br}finally{f=null,d=B,x=!1}}var E=!1,b=null,I=-1,U=5,j=-1;function $(){return!(t.unstable_now()-j<U)}function V(){if(b!==null){var P=t.unstable_now();j=P;var W=!0;try{W=b(!0,P)}finally{W?ee():(E=!1,b=null)}}else E=!1}var ee;if(typeof g=="function")ee=function(){g(V)};else if(typeof MessageChannel<"u"){var Se=new MessageChannel,ft=Se.port2;Se.port1.onmessage=V,ee=function(){ft.postMessage(null)}}else ee=function(){_(V,0)};function Bt(P){b=P,E||(E=!0,ee())}function it(P,W){I=_(function(){P(t.unstable_now())},W)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(P){P.callback=null},t.unstable_continueExecution=function(){w||x||(w=!0,Bt(C))},t.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):U=0<P?Math.floor(1e3/P):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(P){switch(d){case 1:case 2:case 3:var W=3;break;default:W=d}var B=d;d=W;try{return P()}finally{d=B}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(P,W){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var B=d;d=P;try{return W()}finally{d=B}},t.unstable_scheduleCallback=function(P,W,B){var ue=t.unstable_now();switch(typeof B=="object"&&B!==null?(B=B.delay,B=typeof B=="number"&&0<B?ue+B:ue):B=ue,P){case 1:var xe=-1;break;case 2:xe=250;break;case 5:xe=1073741823;break;case 4:xe=1e4;break;default:xe=5e3}return xe=B+xe,P={id:h++,callback:W,priorityLevel:P,startTime:B,expirationTime:xe,sortIndex:-1},B>ue?(P.sortIndex=B,e(u,P),n(c)===null&&P===n(u)&&(p?(m(I),I=-1):p=!0,it(v,B-ue))):(P.sortIndex=xe,e(c,P),w||x||(w=!0,Bt(C))),P},t.unstable_shouldYield=$,t.unstable_wrapCallback=function(P){var W=d;return function(){var B=d;d=W;try{return P.apply(this,arguments)}finally{d=B}}}})(og);ig.exports=og;var E0=ig.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var k0=S,ut=E0;function N(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var ag=new Set,ki={};function Ar(t,e){gs(t,e),gs(t+"Capture",e)}function gs(t,e){for(ki[t]=e,t=0;t<e.length;t++)ag.add(e[t])}var hn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Oc=Object.prototype.hasOwnProperty,b0=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,of={},af={};function j0(t){return Oc.call(af,t)?!0:Oc.call(of,t)?!1:b0.test(t)?af[t]=!0:(of[t]=!0,!1)}function I0(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function N0(t,e,n,r){if(e===null||typeof e>"u"||I0(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ye(t,e,n,r,s,i,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=a}var Le={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Le[t]=new Ye(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Le[e]=new Ye(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Le[t]=new Ye(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Le[t]=new Ye(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Le[t]=new Ye(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Le[t]=new Ye(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Le[t]=new Ye(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Le[t]=new Ye(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Le[t]=new Ye(t,5,!1,t.toLowerCase(),null,!1,!1)});var id=/[\-:]([a-z])/g;function od(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(id,od);Le[e]=new Ye(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(id,od);Le[e]=new Ye(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(id,od);Le[e]=new Ye(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Le[t]=new Ye(t,1,!1,t.toLowerCase(),null,!1,!1)});Le.xlinkHref=new Ye("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Le[t]=new Ye(t,1,!1,t.toLowerCase(),null,!0,!0)});function ad(t,e,n,r){var s=Le.hasOwnProperty(e)?Le[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(N0(e,n,s,r)&&(n=null),r||s===null?j0(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var xn=k0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,So=Symbol.for("react.element"),Hr=Symbol.for("react.portal"),Gr=Symbol.for("react.fragment"),ld=Symbol.for("react.strict_mode"),Dc=Symbol.for("react.profiler"),lg=Symbol.for("react.provider"),cg=Symbol.for("react.context"),cd=Symbol.for("react.forward_ref"),Lc=Symbol.for("react.suspense"),Mc=Symbol.for("react.suspense_list"),ud=Symbol.for("react.memo"),kn=Symbol.for("react.lazy"),ug=Symbol.for("react.offscreen"),lf=Symbol.iterator;function $s(t){return t===null||typeof t!="object"?null:(t=lf&&t[lf]||t["@@iterator"],typeof t=="function"?t:null)}var pe=Object.assign,$l;function ri(t){if($l===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);$l=e&&e[1]||""}return`
`+$l+t}var Vl=!1;function Hl(t,e){if(!t||Vl)return"";Vl=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=r.stack.split(`
`),a=s.length-1,l=i.length-1;1<=a&&0<=l&&s[a]!==i[l];)l--;for(;1<=a&&0<=l;a--,l--)if(s[a]!==i[l]){if(a!==1||l!==1)do if(a--,l--,0>l||s[a]!==i[l]){var c=`
`+s[a].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=a&&0<=l);break}}}finally{Vl=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?ri(t):""}function T0(t){switch(t.tag){case 5:return ri(t.type);case 16:return ri("Lazy");case 13:return ri("Suspense");case 19:return ri("SuspenseList");case 0:case 2:case 15:return t=Hl(t.type,!1),t;case 11:return t=Hl(t.type.render,!1),t;case 1:return t=Hl(t.type,!0),t;default:return""}}function Fc(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Gr:return"Fragment";case Hr:return"Portal";case Dc:return"Profiler";case ld:return"StrictMode";case Lc:return"Suspense";case Mc:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case cg:return(t.displayName||"Context")+".Consumer";case lg:return(t._context.displayName||"Context")+".Provider";case cd:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case ud:return e=t.displayName||null,e!==null?e:Fc(t.type)||"Memo";case kn:e=t._payload,t=t._init;try{return Fc(t(e))}catch{}}return null}function R0(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Fc(e);case 8:return e===ld?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Yn(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function dg(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function P0(t){var e=dg(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(a){r=""+a,i.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Co(t){t._valueTracker||(t._valueTracker=P0(t))}function hg(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=dg(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function ia(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Uc(t,e){var n=e.checked;return pe({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function cf(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Yn(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function fg(t,e){e=e.checked,e!=null&&ad(t,"checked",e,!1)}function Bc(t,e){fg(t,e);var n=Yn(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?zc(t,e.type,n):e.hasOwnProperty("defaultValue")&&zc(t,e.type,Yn(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function uf(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function zc(t,e,n){(e!=="number"||ia(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var si=Array.isArray;function ss(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Yn(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Wc(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(N(91));return pe({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function df(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(N(92));if(si(n)){if(1<n.length)throw Error(N(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Yn(n)}}function pg(t,e){var n=Yn(e.value),r=Yn(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function hf(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function mg(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function $c(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?mg(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Eo,gg=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Eo=Eo||document.createElement("div"),Eo.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Eo.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function bi(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ci={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},A0=["Webkit","ms","Moz","O"];Object.keys(ci).forEach(function(t){A0.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ci[e]=ci[t]})});function yg(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ci.hasOwnProperty(t)&&ci[t]?(""+e).trim():e+"px"}function vg(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=yg(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var O0=pe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Vc(t,e){if(e){if(O0[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(N(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(N(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(N(61))}if(e.style!=null&&typeof e.style!="object")throw Error(N(62))}}function Hc(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Gc=null;function dd(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var qc=null,is=null,os=null;function ff(t){if(t=oo(t)){if(typeof qc!="function")throw Error(N(280));var e=t.stateNode;e&&(e=ll(e),qc(t.stateNode,t.type,e))}}function xg(t){is?os?os.push(t):os=[t]:is=t}function _g(){if(is){var t=is,e=os;if(os=is=null,ff(t),e)for(t=0;t<e.length;t++)ff(e[t])}}function wg(t,e){return t(e)}function Sg(){}var Gl=!1;function Cg(t,e,n){if(Gl)return t(e,n);Gl=!0;try{return wg(t,e,n)}finally{Gl=!1,(is!==null||os!==null)&&(Sg(),_g())}}function ji(t,e){var n=t.stateNode;if(n===null)return null;var r=ll(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(N(231,e,typeof n));return n}var Kc=!1;if(hn)try{var Vs={};Object.defineProperty(Vs,"passive",{get:function(){Kc=!0}}),window.addEventListener("test",Vs,Vs),window.removeEventListener("test",Vs,Vs)}catch{Kc=!1}function D0(t,e,n,r,s,i,a,l,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(h){this.onError(h)}}var ui=!1,oa=null,aa=!1,Yc=null,L0={onError:function(t){ui=!0,oa=t}};function M0(t,e,n,r,s,i,a,l,c){ui=!1,oa=null,D0.apply(L0,arguments)}function F0(t,e,n,r,s,i,a,l,c){if(M0.apply(this,arguments),ui){if(ui){var u=oa;ui=!1,oa=null}else throw Error(N(198));aa||(aa=!0,Yc=u)}}function Or(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Eg(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function pf(t){if(Or(t)!==t)throw Error(N(188))}function U0(t){var e=t.alternate;if(!e){if(e=Or(t),e===null)throw Error(N(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return pf(s),t;if(i===r)return pf(s),e;i=i.sibling}throw Error(N(188))}if(n.return!==r.return)n=s,r=i;else{for(var a=!1,l=s.child;l;){if(l===n){a=!0,n=s,r=i;break}if(l===r){a=!0,r=s,n=i;break}l=l.sibling}if(!a){for(l=i.child;l;){if(l===n){a=!0,n=i,r=s;break}if(l===r){a=!0,r=i,n=s;break}l=l.sibling}if(!a)throw Error(N(189))}}if(n.alternate!==r)throw Error(N(190))}if(n.tag!==3)throw Error(N(188));return n.stateNode.current===n?t:e}function kg(t){return t=U0(t),t!==null?bg(t):null}function bg(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=bg(t);if(e!==null)return e;t=t.sibling}return null}var jg=ut.unstable_scheduleCallback,mf=ut.unstable_cancelCallback,B0=ut.unstable_shouldYield,z0=ut.unstable_requestPaint,ve=ut.unstable_now,W0=ut.unstable_getCurrentPriorityLevel,hd=ut.unstable_ImmediatePriority,Ig=ut.unstable_UserBlockingPriority,la=ut.unstable_NormalPriority,$0=ut.unstable_LowPriority,Ng=ut.unstable_IdlePriority,sl=null,Vt=null;function V0(t){if(Vt&&typeof Vt.onCommitFiberRoot=="function")try{Vt.onCommitFiberRoot(sl,t,void 0,(t.current.flags&128)===128)}catch{}}var At=Math.clz32?Math.clz32:q0,H0=Math.log,G0=Math.LN2;function q0(t){return t>>>=0,t===0?32:31-(H0(t)/G0|0)|0}var ko=64,bo=4194304;function ii(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function ca(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,a=n&268435455;if(a!==0){var l=a&~s;l!==0?r=ii(l):(i&=a,i!==0&&(r=ii(i)))}else a=n&~s,a!==0?r=ii(a):i!==0&&(r=ii(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-At(e),s=1<<n,r|=t[n],e&=~s;return r}function K0(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Y0(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var a=31-At(i),l=1<<a,c=s[a];c===-1?(!(l&n)||l&r)&&(s[a]=K0(l,e)):c<=e&&(t.expiredLanes|=l),i&=~l}}function Qc(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Tg(){var t=ko;return ko<<=1,!(ko&4194240)&&(ko=64),t}function ql(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function so(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-At(e),t[e]=n}function Q0(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-At(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function fd(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-At(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var J=0;function Rg(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Pg,pd,Ag,Og,Dg,Jc=!1,jo=[],Ln=null,Mn=null,Fn=null,Ii=new Map,Ni=new Map,jn=[],J0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function gf(t,e){switch(t){case"focusin":case"focusout":Ln=null;break;case"dragenter":case"dragleave":Mn=null;break;case"mouseover":case"mouseout":Fn=null;break;case"pointerover":case"pointerout":Ii.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ni.delete(e.pointerId)}}function Hs(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=oo(e),e!==null&&pd(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function X0(t,e,n,r,s){switch(e){case"focusin":return Ln=Hs(Ln,t,e,n,r,s),!0;case"dragenter":return Mn=Hs(Mn,t,e,n,r,s),!0;case"mouseover":return Fn=Hs(Fn,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Ii.set(i,Hs(Ii.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Ni.set(i,Hs(Ni.get(i)||null,t,e,n,r,s)),!0}return!1}function Lg(t){var e=fr(t.target);if(e!==null){var n=Or(e);if(n!==null){if(e=n.tag,e===13){if(e=Eg(n),e!==null){t.blockedOn=e,Dg(t.priority,function(){Ag(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Vo(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Xc(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Gc=r,n.target.dispatchEvent(r),Gc=null}else return e=oo(n),e!==null&&pd(e),t.blockedOn=n,!1;e.shift()}return!0}function yf(t,e,n){Vo(t)&&n.delete(e)}function Z0(){Jc=!1,Ln!==null&&Vo(Ln)&&(Ln=null),Mn!==null&&Vo(Mn)&&(Mn=null),Fn!==null&&Vo(Fn)&&(Fn=null),Ii.forEach(yf),Ni.forEach(yf)}function Gs(t,e){t.blockedOn===e&&(t.blockedOn=null,Jc||(Jc=!0,ut.unstable_scheduleCallback(ut.unstable_NormalPriority,Z0)))}function Ti(t){function e(s){return Gs(s,t)}if(0<jo.length){Gs(jo[0],t);for(var n=1;n<jo.length;n++){var r=jo[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Ln!==null&&Gs(Ln,t),Mn!==null&&Gs(Mn,t),Fn!==null&&Gs(Fn,t),Ii.forEach(e),Ni.forEach(e),n=0;n<jn.length;n++)r=jn[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<jn.length&&(n=jn[0],n.blockedOn===null);)Lg(n),n.blockedOn===null&&jn.shift()}var as=xn.ReactCurrentBatchConfig,ua=!0;function ew(t,e,n,r){var s=J,i=as.transition;as.transition=null;try{J=1,md(t,e,n,r)}finally{J=s,as.transition=i}}function tw(t,e,n,r){var s=J,i=as.transition;as.transition=null;try{J=4,md(t,e,n,r)}finally{J=s,as.transition=i}}function md(t,e,n,r){if(ua){var s=Xc(t,e,n,r);if(s===null)rc(t,e,r,da,n),gf(t,r);else if(X0(s,t,e,n,r))r.stopPropagation();else if(gf(t,r),e&4&&-1<J0.indexOf(t)){for(;s!==null;){var i=oo(s);if(i!==null&&Pg(i),i=Xc(t,e,n,r),i===null&&rc(t,e,r,da,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else rc(t,e,r,null,n)}}var da=null;function Xc(t,e,n,r){if(da=null,t=dd(r),t=fr(t),t!==null)if(e=Or(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Eg(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return da=t,null}function Mg(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(W0()){case hd:return 1;case Ig:return 4;case la:case $0:return 16;case Ng:return 536870912;default:return 16}default:return 16}}var Pn=null,gd=null,Ho=null;function Fg(){if(Ho)return Ho;var t,e=gd,n=e.length,r,s="value"in Pn?Pn.value:Pn.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var a=n-t;for(r=1;r<=a&&e[n-r]===s[i-r];r++);return Ho=s.slice(t,1<r?1-r:void 0)}function Go(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Io(){return!0}function vf(){return!1}function ht(t){function e(n,r,s,i,a){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Io:vf,this.isPropagationStopped=vf,this}return pe(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Io)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Io)},persist:function(){},isPersistent:Io}),e}var Rs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},yd=ht(Rs),io=pe({},Rs,{view:0,detail:0}),nw=ht(io),Kl,Yl,qs,il=pe({},io,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:vd,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==qs&&(qs&&t.type==="mousemove"?(Kl=t.screenX-qs.screenX,Yl=t.screenY-qs.screenY):Yl=Kl=0,qs=t),Kl)},movementY:function(t){return"movementY"in t?t.movementY:Yl}}),xf=ht(il),rw=pe({},il,{dataTransfer:0}),sw=ht(rw),iw=pe({},io,{relatedTarget:0}),Ql=ht(iw),ow=pe({},Rs,{animationName:0,elapsedTime:0,pseudoElement:0}),aw=ht(ow),lw=pe({},Rs,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),cw=ht(lw),uw=pe({},Rs,{data:0}),_f=ht(uw),dw={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},hw={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},fw={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function pw(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=fw[t])?!!e[t]:!1}function vd(){return pw}var mw=pe({},io,{key:function(t){if(t.key){var e=dw[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Go(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?hw[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:vd,charCode:function(t){return t.type==="keypress"?Go(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Go(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),gw=ht(mw),yw=pe({},il,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),wf=ht(yw),vw=pe({},io,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:vd}),xw=ht(vw),_w=pe({},Rs,{propertyName:0,elapsedTime:0,pseudoElement:0}),ww=ht(_w),Sw=pe({},il,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Cw=ht(Sw),Ew=[9,13,27,32],xd=hn&&"CompositionEvent"in window,di=null;hn&&"documentMode"in document&&(di=document.documentMode);var kw=hn&&"TextEvent"in window&&!di,Ug=hn&&(!xd||di&&8<di&&11>=di),Sf=" ",Cf=!1;function Bg(t,e){switch(t){case"keyup":return Ew.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zg(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var qr=!1;function bw(t,e){switch(t){case"compositionend":return zg(e);case"keypress":return e.which!==32?null:(Cf=!0,Sf);case"textInput":return t=e.data,t===Sf&&Cf?null:t;default:return null}}function jw(t,e){if(qr)return t==="compositionend"||!xd&&Bg(t,e)?(t=Fg(),Ho=gd=Pn=null,qr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Ug&&e.locale!=="ko"?null:e.data;default:return null}}var Iw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ef(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Iw[t.type]:e==="textarea"}function Wg(t,e,n,r){xg(r),e=ha(e,"onChange"),0<e.length&&(n=new yd("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var hi=null,Ri=null;function Nw(t){Zg(t,0)}function ol(t){var e=Qr(t);if(hg(e))return t}function Tw(t,e){if(t==="change")return e}var $g=!1;if(hn){var Jl;if(hn){var Xl="oninput"in document;if(!Xl){var kf=document.createElement("div");kf.setAttribute("oninput","return;"),Xl=typeof kf.oninput=="function"}Jl=Xl}else Jl=!1;$g=Jl&&(!document.documentMode||9<document.documentMode)}function bf(){hi&&(hi.detachEvent("onpropertychange",Vg),Ri=hi=null)}function Vg(t){if(t.propertyName==="value"&&ol(Ri)){var e=[];Wg(e,Ri,t,dd(t)),Cg(Nw,e)}}function Rw(t,e,n){t==="focusin"?(bf(),hi=e,Ri=n,hi.attachEvent("onpropertychange",Vg)):t==="focusout"&&bf()}function Pw(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return ol(Ri)}function Aw(t,e){if(t==="click")return ol(e)}function Ow(t,e){if(t==="input"||t==="change")return ol(e)}function Dw(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Mt=typeof Object.is=="function"?Object.is:Dw;function Pi(t,e){if(Mt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Oc.call(e,s)||!Mt(t[s],e[s]))return!1}return!0}function jf(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function If(t,e){var n=jf(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=jf(n)}}function Hg(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Hg(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Gg(){for(var t=window,e=ia();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=ia(t.document)}return e}function _d(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Lw(t){var e=Gg(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Hg(n.ownerDocument.documentElement,n)){if(r!==null&&_d(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=If(n,i);var a=If(n,r);s&&a&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Mw=hn&&"documentMode"in document&&11>=document.documentMode,Kr=null,Zc=null,fi=null,eu=!1;function Nf(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;eu||Kr==null||Kr!==ia(r)||(r=Kr,"selectionStart"in r&&_d(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),fi&&Pi(fi,r)||(fi=r,r=ha(Zc,"onSelect"),0<r.length&&(e=new yd("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Kr)))}function No(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Yr={animationend:No("Animation","AnimationEnd"),animationiteration:No("Animation","AnimationIteration"),animationstart:No("Animation","AnimationStart"),transitionend:No("Transition","TransitionEnd")},Zl={},qg={};hn&&(qg=document.createElement("div").style,"AnimationEvent"in window||(delete Yr.animationend.animation,delete Yr.animationiteration.animation,delete Yr.animationstart.animation),"TransitionEvent"in window||delete Yr.transitionend.transition);function al(t){if(Zl[t])return Zl[t];if(!Yr[t])return t;var e=Yr[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in qg)return Zl[t]=e[n];return t}var Kg=al("animationend"),Yg=al("animationiteration"),Qg=al("animationstart"),Jg=al("transitionend"),Xg=new Map,Tf="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function tr(t,e){Xg.set(t,e),Ar(e,[t])}for(var ec=0;ec<Tf.length;ec++){var tc=Tf[ec],Fw=tc.toLowerCase(),Uw=tc[0].toUpperCase()+tc.slice(1);tr(Fw,"on"+Uw)}tr(Kg,"onAnimationEnd");tr(Yg,"onAnimationIteration");tr(Qg,"onAnimationStart");tr("dblclick","onDoubleClick");tr("focusin","onFocus");tr("focusout","onBlur");tr(Jg,"onTransitionEnd");gs("onMouseEnter",["mouseout","mouseover"]);gs("onMouseLeave",["mouseout","mouseover"]);gs("onPointerEnter",["pointerout","pointerover"]);gs("onPointerLeave",["pointerout","pointerover"]);Ar("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ar("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ar("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ar("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ar("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ar("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var oi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Bw=new Set("cancel close invalid load scroll toggle".split(" ").concat(oi));function Rf(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,F0(r,e,void 0,t),t.currentTarget=null}function Zg(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var a=r.length-1;0<=a;a--){var l=r[a],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==i&&s.isPropagationStopped())break e;Rf(s,l,u),i=c}else for(a=0;a<r.length;a++){if(l=r[a],c=l.instance,u=l.currentTarget,l=l.listener,c!==i&&s.isPropagationStopped())break e;Rf(s,l,u),i=c}}}if(aa)throw t=Yc,aa=!1,Yc=null,t}function se(t,e){var n=e[iu];n===void 0&&(n=e[iu]=new Set);var r=t+"__bubble";n.has(r)||(ey(e,t,2,!1),n.add(r))}function nc(t,e,n){var r=0;e&&(r|=4),ey(n,t,r,e)}var To="_reactListening"+Math.random().toString(36).slice(2);function Ai(t){if(!t[To]){t[To]=!0,ag.forEach(function(n){n!=="selectionchange"&&(Bw.has(n)||nc(n,!1,t),nc(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[To]||(e[To]=!0,nc("selectionchange",!1,e))}}function ey(t,e,n,r){switch(Mg(e)){case 1:var s=ew;break;case 4:s=tw;break;default:s=md}n=s.bind(null,e,n,t),s=void 0,!Kc||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function rc(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(a===4)for(a=r.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;a=a.return}for(;l!==null;){if(a=fr(l),a===null)return;if(c=a.tag,c===5||c===6){r=i=a;continue e}l=l.parentNode}}r=r.return}Cg(function(){var u=i,h=dd(n),f=[];e:{var d=Xg.get(t);if(d!==void 0){var x=yd,w=t;switch(t){case"keypress":if(Go(n)===0)break e;case"keydown":case"keyup":x=gw;break;case"focusin":w="focus",x=Ql;break;case"focusout":w="blur",x=Ql;break;case"beforeblur":case"afterblur":x=Ql;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":x=xf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":x=sw;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":x=xw;break;case Kg:case Yg:case Qg:x=aw;break;case Jg:x=ww;break;case"scroll":x=nw;break;case"wheel":x=Cw;break;case"copy":case"cut":case"paste":x=cw;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":x=wf}var p=(e&4)!==0,_=!p&&t==="scroll",m=p?d!==null?d+"Capture":null:d;p=[];for(var g=u,y;g!==null;){y=g;var v=y.stateNode;if(y.tag===5&&v!==null&&(y=v,m!==null&&(v=ji(g,m),v!=null&&p.push(Oi(g,v,y)))),_)break;g=g.return}0<p.length&&(d=new x(d,w,null,n,h),f.push({event:d,listeners:p}))}}if(!(e&7)){e:{if(d=t==="mouseover"||t==="pointerover",x=t==="mouseout"||t==="pointerout",d&&n!==Gc&&(w=n.relatedTarget||n.fromElement)&&(fr(w)||w[fn]))break e;if((x||d)&&(d=h.window===h?h:(d=h.ownerDocument)?d.defaultView||d.parentWindow:window,x?(w=n.relatedTarget||n.toElement,x=u,w=w?fr(w):null,w!==null&&(_=Or(w),w!==_||w.tag!==5&&w.tag!==6)&&(w=null)):(x=null,w=u),x!==w)){if(p=xf,v="onMouseLeave",m="onMouseEnter",g="mouse",(t==="pointerout"||t==="pointerover")&&(p=wf,v="onPointerLeave",m="onPointerEnter",g="pointer"),_=x==null?d:Qr(x),y=w==null?d:Qr(w),d=new p(v,g+"leave",x,n,h),d.target=_,d.relatedTarget=y,v=null,fr(h)===u&&(p=new p(m,g+"enter",w,n,h),p.target=y,p.relatedTarget=_,v=p),_=v,x&&w)t:{for(p=x,m=w,g=0,y=p;y;y=$r(y))g++;for(y=0,v=m;v;v=$r(v))y++;for(;0<g-y;)p=$r(p),g--;for(;0<y-g;)m=$r(m),y--;for(;g--;){if(p===m||m!==null&&p===m.alternate)break t;p=$r(p),m=$r(m)}p=null}else p=null;x!==null&&Pf(f,d,x,p,!1),w!==null&&_!==null&&Pf(f,_,w,p,!0)}}e:{if(d=u?Qr(u):window,x=d.nodeName&&d.nodeName.toLowerCase(),x==="select"||x==="input"&&d.type==="file")var C=Tw;else if(Ef(d))if($g)C=Ow;else{C=Pw;var E=Rw}else(x=d.nodeName)&&x.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(C=Aw);if(C&&(C=C(t,u))){Wg(f,C,n,h);break e}E&&E(t,d,u),t==="focusout"&&(E=d._wrapperState)&&E.controlled&&d.type==="number"&&zc(d,"number",d.value)}switch(E=u?Qr(u):window,t){case"focusin":(Ef(E)||E.contentEditable==="true")&&(Kr=E,Zc=u,fi=null);break;case"focusout":fi=Zc=Kr=null;break;case"mousedown":eu=!0;break;case"contextmenu":case"mouseup":case"dragend":eu=!1,Nf(f,n,h);break;case"selectionchange":if(Mw)break;case"keydown":case"keyup":Nf(f,n,h)}var b;if(xd)e:{switch(t){case"compositionstart":var I="onCompositionStart";break e;case"compositionend":I="onCompositionEnd";break e;case"compositionupdate":I="onCompositionUpdate";break e}I=void 0}else qr?Bg(t,n)&&(I="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(I="onCompositionStart");I&&(Ug&&n.locale!=="ko"&&(qr||I!=="onCompositionStart"?I==="onCompositionEnd"&&qr&&(b=Fg()):(Pn=h,gd="value"in Pn?Pn.value:Pn.textContent,qr=!0)),E=ha(u,I),0<E.length&&(I=new _f(I,t,null,n,h),f.push({event:I,listeners:E}),b?I.data=b:(b=zg(n),b!==null&&(I.data=b)))),(b=kw?bw(t,n):jw(t,n))&&(u=ha(u,"onBeforeInput"),0<u.length&&(h=new _f("onBeforeInput","beforeinput",null,n,h),f.push({event:h,listeners:u}),h.data=b))}Zg(f,e)})}function Oi(t,e,n){return{instance:t,listener:e,currentTarget:n}}function ha(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=ji(t,n),i!=null&&r.unshift(Oi(t,i,s)),i=ji(t,e),i!=null&&r.push(Oi(t,i,s))),t=t.return}return r}function $r(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Pf(t,e,n,r,s){for(var i=e._reactName,a=[];n!==null&&n!==r;){var l=n,c=l.alternate,u=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&u!==null&&(l=u,s?(c=ji(n,i),c!=null&&a.unshift(Oi(n,c,l))):s||(c=ji(n,i),c!=null&&a.push(Oi(n,c,l)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var zw=/\r\n?/g,Ww=/\u0000|\uFFFD/g;function Af(t){return(typeof t=="string"?t:""+t).replace(zw,`
`).replace(Ww,"")}function Ro(t,e,n){if(e=Af(e),Af(t)!==e&&n)throw Error(N(425))}function fa(){}var tu=null,nu=null;function ru(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var su=typeof setTimeout=="function"?setTimeout:void 0,$w=typeof clearTimeout=="function"?clearTimeout:void 0,Of=typeof Promise=="function"?Promise:void 0,Vw=typeof queueMicrotask=="function"?queueMicrotask:typeof Of<"u"?function(t){return Of.resolve(null).then(t).catch(Hw)}:su;function Hw(t){setTimeout(function(){throw t})}function sc(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Ti(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Ti(e)}function Un(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Df(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Ps=Math.random().toString(36).slice(2),$t="__reactFiber$"+Ps,Di="__reactProps$"+Ps,fn="__reactContainer$"+Ps,iu="__reactEvents$"+Ps,Gw="__reactListeners$"+Ps,qw="__reactHandles$"+Ps;function fr(t){var e=t[$t];if(e)return e;for(var n=t.parentNode;n;){if(e=n[fn]||n[$t]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Df(t);t!==null;){if(n=t[$t])return n;t=Df(t)}return e}t=n,n=t.parentNode}return null}function oo(t){return t=t[$t]||t[fn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Qr(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(N(33))}function ll(t){return t[Di]||null}var ou=[],Jr=-1;function nr(t){return{current:t}}function ie(t){0>Jr||(t.current=ou[Jr],ou[Jr]=null,Jr--)}function re(t,e){Jr++,ou[Jr]=t.current,t.current=e}var Qn={},ze=nr(Qn),et=nr(!1),wr=Qn;function ys(t,e){var n=t.type.contextTypes;if(!n)return Qn;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function tt(t){return t=t.childContextTypes,t!=null}function pa(){ie(et),ie(ze)}function Lf(t,e,n){if(ze.current!==Qn)throw Error(N(168));re(ze,e),re(et,n)}function ty(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(N(108,R0(t)||"Unknown",s));return pe({},n,r)}function ma(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Qn,wr=ze.current,re(ze,t),re(et,et.current),!0}function Mf(t,e,n){var r=t.stateNode;if(!r)throw Error(N(169));n?(t=ty(t,e,wr),r.__reactInternalMemoizedMergedChildContext=t,ie(et),ie(ze),re(ze,t)):ie(et),re(et,n)}var en=null,cl=!1,ic=!1;function ny(t){en===null?en=[t]:en.push(t)}function Kw(t){cl=!0,ny(t)}function rr(){if(!ic&&en!==null){ic=!0;var t=0,e=J;try{var n=en;for(J=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}en=null,cl=!1}catch(s){throw en!==null&&(en=en.slice(t+1)),jg(hd,rr),s}finally{J=e,ic=!1}}return null}var Xr=[],Zr=0,ga=null,ya=0,pt=[],mt=0,Sr=null,nn=1,rn="";function cr(t,e){Xr[Zr++]=ya,Xr[Zr++]=ga,ga=t,ya=e}function ry(t,e,n){pt[mt++]=nn,pt[mt++]=rn,pt[mt++]=Sr,Sr=t;var r=nn;t=rn;var s=32-At(r)-1;r&=~(1<<s),n+=1;var i=32-At(e)+s;if(30<i){var a=s-s%5;i=(r&(1<<a)-1).toString(32),r>>=a,s-=a,nn=1<<32-At(e)+s|n<<s|r,rn=i+t}else nn=1<<i|n<<s|r,rn=t}function wd(t){t.return!==null&&(cr(t,1),ry(t,1,0))}function Sd(t){for(;t===ga;)ga=Xr[--Zr],Xr[Zr]=null,ya=Xr[--Zr],Xr[Zr]=null;for(;t===Sr;)Sr=pt[--mt],pt[mt]=null,rn=pt[--mt],pt[mt]=null,nn=pt[--mt],pt[mt]=null}var lt=null,at=null,ce=!1,jt=null;function sy(t,e){var n=gt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Ff(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,lt=t,at=Un(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,lt=t,at=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Sr!==null?{id:nn,overflow:rn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=gt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,lt=t,at=null,!0):!1;default:return!1}}function au(t){return(t.mode&1)!==0&&(t.flags&128)===0}function lu(t){if(ce){var e=at;if(e){var n=e;if(!Ff(t,e)){if(au(t))throw Error(N(418));e=Un(n.nextSibling);var r=lt;e&&Ff(t,e)?sy(r,n):(t.flags=t.flags&-4097|2,ce=!1,lt=t)}}else{if(au(t))throw Error(N(418));t.flags=t.flags&-4097|2,ce=!1,lt=t}}}function Uf(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;lt=t}function Po(t){if(t!==lt)return!1;if(!ce)return Uf(t),ce=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!ru(t.type,t.memoizedProps)),e&&(e=at)){if(au(t))throw iy(),Error(N(418));for(;e;)sy(t,e),e=Un(e.nextSibling)}if(Uf(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(N(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){at=Un(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}at=null}}else at=lt?Un(t.stateNode.nextSibling):null;return!0}function iy(){for(var t=at;t;)t=Un(t.nextSibling)}function vs(){at=lt=null,ce=!1}function Cd(t){jt===null?jt=[t]:jt.push(t)}var Yw=xn.ReactCurrentBatchConfig;function Ks(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(N(309));var r=n.stateNode}if(!r)throw Error(N(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(a){var l=s.refs;a===null?delete l[i]:l[i]=a},e._stringRef=i,e)}if(typeof t!="string")throw Error(N(284));if(!n._owner)throw Error(N(290,t))}return t}function Ao(t,e){throw t=Object.prototype.toString.call(e),Error(N(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Bf(t){var e=t._init;return e(t._payload)}function oy(t){function e(m,g){if(t){var y=m.deletions;y===null?(m.deletions=[g],m.flags|=16):y.push(g)}}function n(m,g){if(!t)return null;for(;g!==null;)e(m,g),g=g.sibling;return null}function r(m,g){for(m=new Map;g!==null;)g.key!==null?m.set(g.key,g):m.set(g.index,g),g=g.sibling;return m}function s(m,g){return m=$n(m,g),m.index=0,m.sibling=null,m}function i(m,g,y){return m.index=y,t?(y=m.alternate,y!==null?(y=y.index,y<g?(m.flags|=2,g):y):(m.flags|=2,g)):(m.flags|=1048576,g)}function a(m){return t&&m.alternate===null&&(m.flags|=2),m}function l(m,g,y,v){return g===null||g.tag!==6?(g=hc(y,m.mode,v),g.return=m,g):(g=s(g,y),g.return=m,g)}function c(m,g,y,v){var C=y.type;return C===Gr?h(m,g,y.props.children,v,y.key):g!==null&&(g.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===kn&&Bf(C)===g.type)?(v=s(g,y.props),v.ref=Ks(m,g,y),v.return=m,v):(v=Zo(y.type,y.key,y.props,null,m.mode,v),v.ref=Ks(m,g,y),v.return=m,v)}function u(m,g,y,v){return g===null||g.tag!==4||g.stateNode.containerInfo!==y.containerInfo||g.stateNode.implementation!==y.implementation?(g=fc(y,m.mode,v),g.return=m,g):(g=s(g,y.children||[]),g.return=m,g)}function h(m,g,y,v,C){return g===null||g.tag!==7?(g=_r(y,m.mode,v,C),g.return=m,g):(g=s(g,y),g.return=m,g)}function f(m,g,y){if(typeof g=="string"&&g!==""||typeof g=="number")return g=hc(""+g,m.mode,y),g.return=m,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case So:return y=Zo(g.type,g.key,g.props,null,m.mode,y),y.ref=Ks(m,null,g),y.return=m,y;case Hr:return g=fc(g,m.mode,y),g.return=m,g;case kn:var v=g._init;return f(m,v(g._payload),y)}if(si(g)||$s(g))return g=_r(g,m.mode,y,null),g.return=m,g;Ao(m,g)}return null}function d(m,g,y,v){var C=g!==null?g.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return C!==null?null:l(m,g,""+y,v);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case So:return y.key===C?c(m,g,y,v):null;case Hr:return y.key===C?u(m,g,y,v):null;case kn:return C=y._init,d(m,g,C(y._payload),v)}if(si(y)||$s(y))return C!==null?null:h(m,g,y,v,null);Ao(m,y)}return null}function x(m,g,y,v,C){if(typeof v=="string"&&v!==""||typeof v=="number")return m=m.get(y)||null,l(g,m,""+v,C);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case So:return m=m.get(v.key===null?y:v.key)||null,c(g,m,v,C);case Hr:return m=m.get(v.key===null?y:v.key)||null,u(g,m,v,C);case kn:var E=v._init;return x(m,g,y,E(v._payload),C)}if(si(v)||$s(v))return m=m.get(y)||null,h(g,m,v,C,null);Ao(g,v)}return null}function w(m,g,y,v){for(var C=null,E=null,b=g,I=g=0,U=null;b!==null&&I<y.length;I++){b.index>I?(U=b,b=null):U=b.sibling;var j=d(m,b,y[I],v);if(j===null){b===null&&(b=U);break}t&&b&&j.alternate===null&&e(m,b),g=i(j,g,I),E===null?C=j:E.sibling=j,E=j,b=U}if(I===y.length)return n(m,b),ce&&cr(m,I),C;if(b===null){for(;I<y.length;I++)b=f(m,y[I],v),b!==null&&(g=i(b,g,I),E===null?C=b:E.sibling=b,E=b);return ce&&cr(m,I),C}for(b=r(m,b);I<y.length;I++)U=x(b,m,I,y[I],v),U!==null&&(t&&U.alternate!==null&&b.delete(U.key===null?I:U.key),g=i(U,g,I),E===null?C=U:E.sibling=U,E=U);return t&&b.forEach(function($){return e(m,$)}),ce&&cr(m,I),C}function p(m,g,y,v){var C=$s(y);if(typeof C!="function")throw Error(N(150));if(y=C.call(y),y==null)throw Error(N(151));for(var E=C=null,b=g,I=g=0,U=null,j=y.next();b!==null&&!j.done;I++,j=y.next()){b.index>I?(U=b,b=null):U=b.sibling;var $=d(m,b,j.value,v);if($===null){b===null&&(b=U);break}t&&b&&$.alternate===null&&e(m,b),g=i($,g,I),E===null?C=$:E.sibling=$,E=$,b=U}if(j.done)return n(m,b),ce&&cr(m,I),C;if(b===null){for(;!j.done;I++,j=y.next())j=f(m,j.value,v),j!==null&&(g=i(j,g,I),E===null?C=j:E.sibling=j,E=j);return ce&&cr(m,I),C}for(b=r(m,b);!j.done;I++,j=y.next())j=x(b,m,I,j.value,v),j!==null&&(t&&j.alternate!==null&&b.delete(j.key===null?I:j.key),g=i(j,g,I),E===null?C=j:E.sibling=j,E=j);return t&&b.forEach(function(V){return e(m,V)}),ce&&cr(m,I),C}function _(m,g,y,v){if(typeof y=="object"&&y!==null&&y.type===Gr&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case So:e:{for(var C=y.key,E=g;E!==null;){if(E.key===C){if(C=y.type,C===Gr){if(E.tag===7){n(m,E.sibling),g=s(E,y.props.children),g.return=m,m=g;break e}}else if(E.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===kn&&Bf(C)===E.type){n(m,E.sibling),g=s(E,y.props),g.ref=Ks(m,E,y),g.return=m,m=g;break e}n(m,E);break}else e(m,E);E=E.sibling}y.type===Gr?(g=_r(y.props.children,m.mode,v,y.key),g.return=m,m=g):(v=Zo(y.type,y.key,y.props,null,m.mode,v),v.ref=Ks(m,g,y),v.return=m,m=v)}return a(m);case Hr:e:{for(E=y.key;g!==null;){if(g.key===E)if(g.tag===4&&g.stateNode.containerInfo===y.containerInfo&&g.stateNode.implementation===y.implementation){n(m,g.sibling),g=s(g,y.children||[]),g.return=m,m=g;break e}else{n(m,g);break}else e(m,g);g=g.sibling}g=fc(y,m.mode,v),g.return=m,m=g}return a(m);case kn:return E=y._init,_(m,g,E(y._payload),v)}if(si(y))return w(m,g,y,v);if($s(y))return p(m,g,y,v);Ao(m,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,g!==null&&g.tag===6?(n(m,g.sibling),g=s(g,y),g.return=m,m=g):(n(m,g),g=hc(y,m.mode,v),g.return=m,m=g),a(m)):n(m,g)}return _}var xs=oy(!0),ay=oy(!1),va=nr(null),xa=null,es=null,Ed=null;function kd(){Ed=es=xa=null}function bd(t){var e=va.current;ie(va),t._currentValue=e}function cu(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function ls(t,e){xa=t,Ed=es=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Xe=!0),t.firstContext=null)}function xt(t){var e=t._currentValue;if(Ed!==t)if(t={context:t,memoizedValue:e,next:null},es===null){if(xa===null)throw Error(N(308));es=t,xa.dependencies={lanes:0,firstContext:t}}else es=es.next=t;return e}var pr=null;function jd(t){pr===null?pr=[t]:pr.push(t)}function ly(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,jd(e)):(n.next=s.next,s.next=n),e.interleaved=n,pn(t,r)}function pn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var bn=!1;function Id(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function cy(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function ln(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Bn(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Y&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,pn(t,n)}return s=r.interleaved,s===null?(e.next=e,jd(r)):(e.next=s.next,s.next=e),r.interleaved=e,pn(t,n)}function qo(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,fd(t,n)}}function zf(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=a:i=i.next=a,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function _a(t,e,n,r){var s=t.updateQueue;bn=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,u=c.next;c.next=null,a===null?i=u:a.next=u,a=c;var h=t.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==a&&(l===null?h.firstBaseUpdate=u:l.next=u,h.lastBaseUpdate=c))}if(i!==null){var f=s.baseState;a=0,h=u=c=null,l=i;do{var d=l.lane,x=l.eventTime;if((r&d)===d){h!==null&&(h=h.next={eventTime:x,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var w=t,p=l;switch(d=e,x=n,p.tag){case 1:if(w=p.payload,typeof w=="function"){f=w.call(x,f,d);break e}f=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=p.payload,d=typeof w=="function"?w.call(x,f,d):w,d==null)break e;f=pe({},f,d);break e;case 2:bn=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,d=s.effects,d===null?s.effects=[l]:d.push(l))}else x={eventTime:x,lane:d,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(u=h=x,c=f):h=h.next=x,a|=d;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;d=l,l=d.next,d.next=null,s.lastBaseUpdate=d,s.shared.pending=null}}while(!0);if(h===null&&(c=f),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=h,e=s.shared.interleaved,e!==null){s=e;do a|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Er|=a,t.lanes=a,t.memoizedState=f}}function Wf(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(N(191,s));s.call(r)}}}var ao={},Ht=nr(ao),Li=nr(ao),Mi=nr(ao);function mr(t){if(t===ao)throw Error(N(174));return t}function Nd(t,e){switch(re(Mi,e),re(Li,t),re(Ht,ao),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:$c(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=$c(e,t)}ie(Ht),re(Ht,e)}function _s(){ie(Ht),ie(Li),ie(Mi)}function uy(t){mr(Mi.current);var e=mr(Ht.current),n=$c(e,t.type);e!==n&&(re(Li,t),re(Ht,n))}function Td(t){Li.current===t&&(ie(Ht),ie(Li))}var de=nr(0);function wa(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var oc=[];function Rd(){for(var t=0;t<oc.length;t++)oc[t]._workInProgressVersionPrimary=null;oc.length=0}var Ko=xn.ReactCurrentDispatcher,ac=xn.ReactCurrentBatchConfig,Cr=0,he=null,Ce=null,Ie=null,Sa=!1,pi=!1,Fi=0,Qw=0;function Fe(){throw Error(N(321))}function Pd(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Mt(t[n],e[n]))return!1;return!0}function Ad(t,e,n,r,s,i){if(Cr=i,he=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ko.current=t===null||t.memoizedState===null?e1:t1,t=n(r,s),pi){i=0;do{if(pi=!1,Fi=0,25<=i)throw Error(N(301));i+=1,Ie=Ce=null,e.updateQueue=null,Ko.current=n1,t=n(r,s)}while(pi)}if(Ko.current=Ca,e=Ce!==null&&Ce.next!==null,Cr=0,Ie=Ce=he=null,Sa=!1,e)throw Error(N(300));return t}function Od(){var t=Fi!==0;return Fi=0,t}function Wt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ie===null?he.memoizedState=Ie=t:Ie=Ie.next=t,Ie}function _t(){if(Ce===null){var t=he.alternate;t=t!==null?t.memoizedState:null}else t=Ce.next;var e=Ie===null?he.memoizedState:Ie.next;if(e!==null)Ie=e,Ce=t;else{if(t===null)throw Error(N(310));Ce=t,t={memoizedState:Ce.memoizedState,baseState:Ce.baseState,baseQueue:Ce.baseQueue,queue:Ce.queue,next:null},Ie===null?he.memoizedState=Ie=t:Ie=Ie.next=t}return Ie}function Ui(t,e){return typeof e=="function"?e(t):e}function lc(t){var e=_t(),n=e.queue;if(n===null)throw Error(N(311));n.lastRenderedReducer=t;var r=Ce,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var a=s.next;s.next=i.next,i.next=a}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=a=null,c=null,u=i;do{var h=u.lane;if((Cr&h)===h)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var f={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=f,a=r):c=c.next=f,he.lanes|=h,Er|=h}u=u.next}while(u!==null&&u!==i);c===null?a=r:c.next=l,Mt(r,e.memoizedState)||(Xe=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,he.lanes|=i,Er|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function cc(t){var e=_t(),n=e.queue;if(n===null)throw Error(N(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var a=s=s.next;do i=t(i,a.action),a=a.next;while(a!==s);Mt(i,e.memoizedState)||(Xe=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function dy(){}function hy(t,e){var n=he,r=_t(),s=e(),i=!Mt(r.memoizedState,s);if(i&&(r.memoizedState=s,Xe=!0),r=r.queue,Dd(my.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Ie!==null&&Ie.memoizedState.tag&1){if(n.flags|=2048,Bi(9,py.bind(null,n,r,s,e),void 0,null),Te===null)throw Error(N(349));Cr&30||fy(n,e,s)}return s}function fy(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=he.updateQueue,e===null?(e={lastEffect:null,stores:null},he.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function py(t,e,n,r){e.value=n,e.getSnapshot=r,gy(e)&&yy(t)}function my(t,e,n){return n(function(){gy(e)&&yy(t)})}function gy(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Mt(t,n)}catch{return!0}}function yy(t){var e=pn(t,1);e!==null&&Ot(e,t,1,-1)}function $f(t){var e=Wt();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ui,lastRenderedState:t},e.queue=t,t=t.dispatch=Zw.bind(null,he,t),[e.memoizedState,t]}function Bi(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=he.updateQueue,e===null?(e={lastEffect:null,stores:null},he.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function vy(){return _t().memoizedState}function Yo(t,e,n,r){var s=Wt();he.flags|=t,s.memoizedState=Bi(1|e,n,void 0,r===void 0?null:r)}function ul(t,e,n,r){var s=_t();r=r===void 0?null:r;var i=void 0;if(Ce!==null){var a=Ce.memoizedState;if(i=a.destroy,r!==null&&Pd(r,a.deps)){s.memoizedState=Bi(e,n,i,r);return}}he.flags|=t,s.memoizedState=Bi(1|e,n,i,r)}function Vf(t,e){return Yo(8390656,8,t,e)}function Dd(t,e){return ul(2048,8,t,e)}function xy(t,e){return ul(4,2,t,e)}function _y(t,e){return ul(4,4,t,e)}function wy(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Sy(t,e,n){return n=n!=null?n.concat([t]):null,ul(4,4,wy.bind(null,e,t),n)}function Ld(){}function Cy(t,e){var n=_t();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Pd(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Ey(t,e){var n=_t();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Pd(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function ky(t,e,n){return Cr&21?(Mt(n,e)||(n=Tg(),he.lanes|=n,Er|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Xe=!0),t.memoizedState=n)}function Jw(t,e){var n=J;J=n!==0&&4>n?n:4,t(!0);var r=ac.transition;ac.transition={};try{t(!1),e()}finally{J=n,ac.transition=r}}function by(){return _t().memoizedState}function Xw(t,e,n){var r=Wn(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},jy(t))Iy(e,n);else if(n=ly(t,e,n,r),n!==null){var s=Ve();Ot(n,t,r,s),Ny(n,e,r)}}function Zw(t,e,n){var r=Wn(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(jy(t))Iy(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var a=e.lastRenderedState,l=i(a,n);if(s.hasEagerState=!0,s.eagerState=l,Mt(l,a)){var c=e.interleaved;c===null?(s.next=s,jd(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}n=ly(t,e,s,r),n!==null&&(s=Ve(),Ot(n,t,r,s),Ny(n,e,r))}}function jy(t){var e=t.alternate;return t===he||e!==null&&e===he}function Iy(t,e){pi=Sa=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Ny(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,fd(t,n)}}var Ca={readContext:xt,useCallback:Fe,useContext:Fe,useEffect:Fe,useImperativeHandle:Fe,useInsertionEffect:Fe,useLayoutEffect:Fe,useMemo:Fe,useReducer:Fe,useRef:Fe,useState:Fe,useDebugValue:Fe,useDeferredValue:Fe,useTransition:Fe,useMutableSource:Fe,useSyncExternalStore:Fe,useId:Fe,unstable_isNewReconciler:!1},e1={readContext:xt,useCallback:function(t,e){return Wt().memoizedState=[t,e===void 0?null:e],t},useContext:xt,useEffect:Vf,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Yo(4194308,4,wy.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Yo(4194308,4,t,e)},useInsertionEffect:function(t,e){return Yo(4,2,t,e)},useMemo:function(t,e){var n=Wt();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Wt();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=Xw.bind(null,he,t),[r.memoizedState,t]},useRef:function(t){var e=Wt();return t={current:t},e.memoizedState=t},useState:$f,useDebugValue:Ld,useDeferredValue:function(t){return Wt().memoizedState=t},useTransition:function(){var t=$f(!1),e=t[0];return t=Jw.bind(null,t[1]),Wt().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=he,s=Wt();if(ce){if(n===void 0)throw Error(N(407));n=n()}else{if(n=e(),Te===null)throw Error(N(349));Cr&30||fy(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,Vf(my.bind(null,r,i,t),[t]),r.flags|=2048,Bi(9,py.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Wt(),e=Te.identifierPrefix;if(ce){var n=rn,r=nn;n=(r&~(1<<32-At(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Fi++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Qw++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},t1={readContext:xt,useCallback:Cy,useContext:xt,useEffect:Dd,useImperativeHandle:Sy,useInsertionEffect:xy,useLayoutEffect:_y,useMemo:Ey,useReducer:lc,useRef:vy,useState:function(){return lc(Ui)},useDebugValue:Ld,useDeferredValue:function(t){var e=_t();return ky(e,Ce.memoizedState,t)},useTransition:function(){var t=lc(Ui)[0],e=_t().memoizedState;return[t,e]},useMutableSource:dy,useSyncExternalStore:hy,useId:by,unstable_isNewReconciler:!1},n1={readContext:xt,useCallback:Cy,useContext:xt,useEffect:Dd,useImperativeHandle:Sy,useInsertionEffect:xy,useLayoutEffect:_y,useMemo:Ey,useReducer:cc,useRef:vy,useState:function(){return cc(Ui)},useDebugValue:Ld,useDeferredValue:function(t){var e=_t();return Ce===null?e.memoizedState=t:ky(e,Ce.memoizedState,t)},useTransition:function(){var t=cc(Ui)[0],e=_t().memoizedState;return[t,e]},useMutableSource:dy,useSyncExternalStore:hy,useId:by,unstable_isNewReconciler:!1};function kt(t,e){if(t&&t.defaultProps){e=pe({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function uu(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:pe({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var dl={isMounted:function(t){return(t=t._reactInternals)?Or(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Ve(),s=Wn(t),i=ln(r,s);i.payload=e,n!=null&&(i.callback=n),e=Bn(t,i,s),e!==null&&(Ot(e,t,s,r),qo(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Ve(),s=Wn(t),i=ln(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Bn(t,i,s),e!==null&&(Ot(e,t,s,r),qo(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Ve(),r=Wn(t),s=ln(n,r);s.tag=2,e!=null&&(s.callback=e),e=Bn(t,s,r),e!==null&&(Ot(e,t,r,n),qo(e,t,r))}};function Hf(t,e,n,r,s,i,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,a):e.prototype&&e.prototype.isPureReactComponent?!Pi(n,r)||!Pi(s,i):!0}function Ty(t,e,n){var r=!1,s=Qn,i=e.contextType;return typeof i=="object"&&i!==null?i=xt(i):(s=tt(e)?wr:ze.current,r=e.contextTypes,i=(r=r!=null)?ys(t,s):Qn),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=dl,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function Gf(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&dl.enqueueReplaceState(e,e.state,null)}function du(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Id(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=xt(i):(i=tt(e)?wr:ze.current,s.context=ys(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(uu(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&dl.enqueueReplaceState(s,s.state,null),_a(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function ws(t,e){try{var n="",r=e;do n+=T0(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function uc(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function hu(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var r1=typeof WeakMap=="function"?WeakMap:Map;function Ry(t,e,n){n=ln(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){ka||(ka=!0,Su=r),hu(t,e)},n}function Py(t,e,n){n=ln(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){hu(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){hu(t,e),typeof r!="function"&&(zn===null?zn=new Set([this]):zn.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function qf(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new r1;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=y1.bind(null,t,e,n),e.then(t,t))}function Kf(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Yf(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=ln(-1,1),e.tag=2,Bn(n,e,1))),n.lanes|=1),t)}var s1=xn.ReactCurrentOwner,Xe=!1;function We(t,e,n,r){e.child=t===null?ay(e,null,n,r):xs(e,t.child,n,r)}function Qf(t,e,n,r,s){n=n.render;var i=e.ref;return ls(e,s),r=Ad(t,e,n,r,i,s),n=Od(),t!==null&&!Xe?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,mn(t,e,s)):(ce&&n&&wd(e),e.flags|=1,We(t,e,r,s),e.child)}function Jf(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!Vd(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,Ay(t,e,i,r,s)):(t=Zo(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var a=i.memoizedProps;if(n=n.compare,n=n!==null?n:Pi,n(a,r)&&t.ref===e.ref)return mn(t,e,s)}return e.flags|=1,t=$n(i,r),t.ref=e.ref,t.return=e,e.child=t}function Ay(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Pi(i,r)&&t.ref===e.ref)if(Xe=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Xe=!0);else return e.lanes=t.lanes,mn(t,e,s)}return fu(t,e,n,r,s)}function Oy(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},re(ns,ot),ot|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,re(ns,ot),ot|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,re(ns,ot),ot|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,re(ns,ot),ot|=r;return We(t,e,s,n),e.child}function Dy(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function fu(t,e,n,r,s){var i=tt(n)?wr:ze.current;return i=ys(e,i),ls(e,s),n=Ad(t,e,n,r,i,s),r=Od(),t!==null&&!Xe?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,mn(t,e,s)):(ce&&r&&wd(e),e.flags|=1,We(t,e,n,s),e.child)}function Xf(t,e,n,r,s){if(tt(n)){var i=!0;ma(e)}else i=!1;if(ls(e,s),e.stateNode===null)Qo(t,e),Ty(e,n,r),du(e,n,r,s),r=!0;else if(t===null){var a=e.stateNode,l=e.memoizedProps;a.props=l;var c=a.context,u=n.contextType;typeof u=="object"&&u!==null?u=xt(u):(u=tt(n)?wr:ze.current,u=ys(e,u));var h=n.getDerivedStateFromProps,f=typeof h=="function"||typeof a.getSnapshotBeforeUpdate=="function";f||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==r||c!==u)&&Gf(e,a,r,u),bn=!1;var d=e.memoizedState;a.state=d,_a(e,r,a,s),c=e.memoizedState,l!==r||d!==c||et.current||bn?(typeof h=="function"&&(uu(e,n,h,r),c=e.memoizedState),(l=bn||Hf(e,n,l,r,d,c,u))?(f||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),a.props=r,a.state=c,a.context=u,r=l):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,cy(t,e),l=e.memoizedProps,u=e.type===e.elementType?l:kt(e.type,l),a.props=u,f=e.pendingProps,d=a.context,c=n.contextType,typeof c=="object"&&c!==null?c=xt(c):(c=tt(n)?wr:ze.current,c=ys(e,c));var x=n.getDerivedStateFromProps;(h=typeof x=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==f||d!==c)&&Gf(e,a,r,c),bn=!1,d=e.memoizedState,a.state=d,_a(e,r,a,s);var w=e.memoizedState;l!==f||d!==w||et.current||bn?(typeof x=="function"&&(uu(e,n,x,r),w=e.memoizedState),(u=bn||Hf(e,n,u,r,d,w,c)||!1)?(h||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,w,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,w,c)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=w),a.props=r,a.state=w,a.context=c,r=u):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),r=!1)}return pu(t,e,n,r,i,s)}function pu(t,e,n,r,s,i){Dy(t,e);var a=(e.flags&128)!==0;if(!r&&!a)return s&&Mf(e,n,!1),mn(t,e,i);r=e.stateNode,s1.current=e;var l=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&a?(e.child=xs(e,t.child,null,i),e.child=xs(e,null,l,i)):We(t,e,l,i),e.memoizedState=r.state,s&&Mf(e,n,!0),e.child}function Ly(t){var e=t.stateNode;e.pendingContext?Lf(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Lf(t,e.context,!1),Nd(t,e.containerInfo)}function Zf(t,e,n,r,s){return vs(),Cd(s),e.flags|=256,We(t,e,n,r),e.child}var mu={dehydrated:null,treeContext:null,retryLane:0};function gu(t){return{baseLanes:t,cachePool:null,transitions:null}}function My(t,e,n){var r=e.pendingProps,s=de.current,i=!1,a=(e.flags&128)!==0,l;if((l=a)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),re(de,s&1),t===null)return lu(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=r.children,t=r.fallback,i?(r=e.mode,i=e.child,a={mode:"hidden",children:a},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=a):i=pl(a,r,0,null),t=_r(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=gu(n),e.memoizedState=mu,t):Md(e,a));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return i1(t,e,a,r,l,s,n);if(i){i=r.fallback,a=e.mode,s=t.child,l=s.sibling;var c={mode:"hidden",children:r.children};return!(a&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=$n(s,c),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=$n(l,i):(i=_r(i,a,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,a=t.child.memoizedState,a=a===null?gu(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},i.memoizedState=a,i.childLanes=t.childLanes&~n,e.memoizedState=mu,r}return i=t.child,t=i.sibling,r=$n(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Md(t,e){return e=pl({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Oo(t,e,n,r){return r!==null&&Cd(r),xs(e,t.child,null,n),t=Md(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function i1(t,e,n,r,s,i,a){if(n)return e.flags&256?(e.flags&=-257,r=uc(Error(N(422))),Oo(t,e,a,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=pl({mode:"visible",children:r.children},s,0,null),i=_r(i,s,a,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&xs(e,t.child,null,a),e.child.memoizedState=gu(a),e.memoizedState=mu,i);if(!(e.mode&1))return Oo(t,e,a,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(N(419)),r=uc(i,r,void 0),Oo(t,e,a,r)}if(l=(a&t.childLanes)!==0,Xe||l){if(r=Te,r!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|a)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,pn(t,s),Ot(r,t,s,-1))}return $d(),r=uc(Error(N(421))),Oo(t,e,a,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=v1.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,at=Un(s.nextSibling),lt=e,ce=!0,jt=null,t!==null&&(pt[mt++]=nn,pt[mt++]=rn,pt[mt++]=Sr,nn=t.id,rn=t.overflow,Sr=e),e=Md(e,r.children),e.flags|=4096,e)}function ep(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),cu(t.return,e,n)}function dc(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function Fy(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(We(t,e,r.children,n),r=de.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&ep(t,n,e);else if(t.tag===19)ep(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(re(de,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&wa(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),dc(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&wa(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}dc(e,!0,n,null,i);break;case"together":dc(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Qo(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function mn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Er|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(N(153));if(e.child!==null){for(t=e.child,n=$n(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=$n(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function o1(t,e,n){switch(e.tag){case 3:Ly(e),vs();break;case 5:uy(e);break;case 1:tt(e.type)&&ma(e);break;case 4:Nd(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;re(va,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(re(de,de.current&1),e.flags|=128,null):n&e.child.childLanes?My(t,e,n):(re(de,de.current&1),t=mn(t,e,n),t!==null?t.sibling:null);re(de,de.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Fy(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),re(de,de.current),r)break;return null;case 22:case 23:return e.lanes=0,Oy(t,e,n)}return mn(t,e,n)}var Uy,yu,By,zy;Uy=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};yu=function(){};By=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,mr(Ht.current);var i=null;switch(n){case"input":s=Uc(t,s),r=Uc(t,r),i=[];break;case"select":s=pe({},s,{value:void 0}),r=pe({},r,{value:void 0}),i=[];break;case"textarea":s=Wc(t,s),r=Wc(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=fa)}Vc(n,r);var a;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(ki.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var c=r[u];if(l=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(a in l)!l.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&l[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(i||(i=[]),i.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(ki.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&se("scroll",t),i||l===c||(i=[])):(i=i||[]).push(u,c))}n&&(i=i||[]).push("style",n);var u=i;(e.updateQueue=u)&&(e.flags|=4)}};zy=function(t,e,n,r){n!==r&&(e.flags|=4)};function Ys(t,e){if(!ce)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Ue(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function a1(t,e,n){var r=e.pendingProps;switch(Sd(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ue(e),null;case 1:return tt(e.type)&&pa(),Ue(e),null;case 3:return r=e.stateNode,_s(),ie(et),ie(ze),Rd(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Po(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,jt!==null&&(ku(jt),jt=null))),yu(t,e),Ue(e),null;case 5:Td(e);var s=mr(Mi.current);if(n=e.type,t!==null&&e.stateNode!=null)By(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(N(166));return Ue(e),null}if(t=mr(Ht.current),Po(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[$t]=e,r[Di]=i,t=(e.mode&1)!==0,n){case"dialog":se("cancel",r),se("close",r);break;case"iframe":case"object":case"embed":se("load",r);break;case"video":case"audio":for(s=0;s<oi.length;s++)se(oi[s],r);break;case"source":se("error",r);break;case"img":case"image":case"link":se("error",r),se("load",r);break;case"details":se("toggle",r);break;case"input":cf(r,i),se("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},se("invalid",r);break;case"textarea":df(r,i),se("invalid",r)}Vc(n,i),s=null;for(var a in i)if(i.hasOwnProperty(a)){var l=i[a];a==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&Ro(r.textContent,l,t),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Ro(r.textContent,l,t),s=["children",""+l]):ki.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&se("scroll",r)}switch(n){case"input":Co(r),uf(r,i,!0);break;case"textarea":Co(r),hf(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=fa)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=mg(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=a.createElement(n,{is:r.is}):(t=a.createElement(n),n==="select"&&(a=t,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):t=a.createElementNS(t,n),t[$t]=e,t[Di]=r,Uy(t,e,!1,!1),e.stateNode=t;e:{switch(a=Hc(n,r),n){case"dialog":se("cancel",t),se("close",t),s=r;break;case"iframe":case"object":case"embed":se("load",t),s=r;break;case"video":case"audio":for(s=0;s<oi.length;s++)se(oi[s],t);s=r;break;case"source":se("error",t),s=r;break;case"img":case"image":case"link":se("error",t),se("load",t),s=r;break;case"details":se("toggle",t),s=r;break;case"input":cf(t,r),s=Uc(t,r),se("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=pe({},r,{value:void 0}),se("invalid",t);break;case"textarea":df(t,r),s=Wc(t,r),se("invalid",t);break;default:s=r}Vc(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?vg(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&gg(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&bi(t,c):typeof c=="number"&&bi(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(ki.hasOwnProperty(i)?c!=null&&i==="onScroll"&&se("scroll",t):c!=null&&ad(t,i,c,a))}switch(n){case"input":Co(t),uf(t,r,!1);break;case"textarea":Co(t),hf(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Yn(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?ss(t,!!r.multiple,i,!1):r.defaultValue!=null&&ss(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=fa)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ue(e),null;case 6:if(t&&e.stateNode!=null)zy(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(N(166));if(n=mr(Mi.current),mr(Ht.current),Po(e)){if(r=e.stateNode,n=e.memoizedProps,r[$t]=e,(i=r.nodeValue!==n)&&(t=lt,t!==null))switch(t.tag){case 3:Ro(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ro(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[$t]=e,e.stateNode=r}return Ue(e),null;case 13:if(ie(de),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ce&&at!==null&&e.mode&1&&!(e.flags&128))iy(),vs(),e.flags|=98560,i=!1;else if(i=Po(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(N(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(N(317));i[$t]=e}else vs(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ue(e),i=!1}else jt!==null&&(ku(jt),jt=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||de.current&1?be===0&&(be=3):$d())),e.updateQueue!==null&&(e.flags|=4),Ue(e),null);case 4:return _s(),yu(t,e),t===null&&Ai(e.stateNode.containerInfo),Ue(e),null;case 10:return bd(e.type._context),Ue(e),null;case 17:return tt(e.type)&&pa(),Ue(e),null;case 19:if(ie(de),i=e.memoizedState,i===null)return Ue(e),null;if(r=(e.flags&128)!==0,a=i.rendering,a===null)if(r)Ys(i,!1);else{if(be!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=wa(t),a!==null){for(e.flags|=128,Ys(i,!1),r=a.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,a=i.alternate,a===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,t=a.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return re(de,de.current&1|2),e.child}t=t.sibling}i.tail!==null&&ve()>Ss&&(e.flags|=128,r=!0,Ys(i,!1),e.lanes=4194304)}else{if(!r)if(t=wa(a),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Ys(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!ce)return Ue(e),null}else 2*ve()-i.renderingStartTime>Ss&&n!==1073741824&&(e.flags|=128,r=!0,Ys(i,!1),e.lanes=4194304);i.isBackwards?(a.sibling=e.child,e.child=a):(n=i.last,n!==null?n.sibling=a:e.child=a,i.last=a)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=ve(),e.sibling=null,n=de.current,re(de,r?n&1|2:n&1),e):(Ue(e),null);case 22:case 23:return Wd(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?ot&1073741824&&(Ue(e),e.subtreeFlags&6&&(e.flags|=8192)):Ue(e),null;case 24:return null;case 25:return null}throw Error(N(156,e.tag))}function l1(t,e){switch(Sd(e),e.tag){case 1:return tt(e.type)&&pa(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return _s(),ie(et),ie(ze),Rd(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Td(e),null;case 13:if(ie(de),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(N(340));vs()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ie(de),null;case 4:return _s(),null;case 10:return bd(e.type._context),null;case 22:case 23:return Wd(),null;case 24:return null;default:return null}}var Do=!1,Be=!1,c1=typeof WeakSet=="function"?WeakSet:Set,O=null;function ts(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){me(t,e,r)}else n.current=null}function vu(t,e,n){try{n()}catch(r){me(t,e,r)}}var tp=!1;function u1(t,e){if(tu=ua,t=Gg(),_d(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var a=0,l=-1,c=-1,u=0,h=0,f=t,d=null;t:for(;;){for(var x;f!==n||s!==0&&f.nodeType!==3||(l=a+s),f!==i||r!==0&&f.nodeType!==3||(c=a+r),f.nodeType===3&&(a+=f.nodeValue.length),(x=f.firstChild)!==null;)d=f,f=x;for(;;){if(f===t)break t;if(d===n&&++u===s&&(l=a),d===i&&++h===r&&(c=a),(x=f.nextSibling)!==null)break;f=d,d=f.parentNode}f=x}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(nu={focusedElem:t,selectionRange:n},ua=!1,O=e;O!==null;)if(e=O,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,O=t;else for(;O!==null;){e=O;try{var w=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var p=w.memoizedProps,_=w.memoizedState,m=e.stateNode,g=m.getSnapshotBeforeUpdate(e.elementType===e.type?p:kt(e.type,p),_);m.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var y=e.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(N(163))}}catch(v){me(e,e.return,v)}if(t=e.sibling,t!==null){t.return=e.return,O=t;break}O=e.return}return w=tp,tp=!1,w}function mi(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&vu(e,n,i)}s=s.next}while(s!==r)}}function hl(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function xu(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Wy(t){var e=t.alternate;e!==null&&(t.alternate=null,Wy(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[$t],delete e[Di],delete e[iu],delete e[Gw],delete e[qw])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function $y(t){return t.tag===5||t.tag===3||t.tag===4}function np(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||$y(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function _u(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=fa));else if(r!==4&&(t=t.child,t!==null))for(_u(t,e,n),t=t.sibling;t!==null;)_u(t,e,n),t=t.sibling}function wu(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(wu(t,e,n),t=t.sibling;t!==null;)wu(t,e,n),t=t.sibling}var Pe=null,bt=!1;function Cn(t,e,n){for(n=n.child;n!==null;)Vy(t,e,n),n=n.sibling}function Vy(t,e,n){if(Vt&&typeof Vt.onCommitFiberUnmount=="function")try{Vt.onCommitFiberUnmount(sl,n)}catch{}switch(n.tag){case 5:Be||ts(n,e);case 6:var r=Pe,s=bt;Pe=null,Cn(t,e,n),Pe=r,bt=s,Pe!==null&&(bt?(t=Pe,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Pe.removeChild(n.stateNode));break;case 18:Pe!==null&&(bt?(t=Pe,n=n.stateNode,t.nodeType===8?sc(t.parentNode,n):t.nodeType===1&&sc(t,n),Ti(t)):sc(Pe,n.stateNode));break;case 4:r=Pe,s=bt,Pe=n.stateNode.containerInfo,bt=!0,Cn(t,e,n),Pe=r,bt=s;break;case 0:case 11:case 14:case 15:if(!Be&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,a=i.destroy;i=i.tag,a!==void 0&&(i&2||i&4)&&vu(n,e,a),s=s.next}while(s!==r)}Cn(t,e,n);break;case 1:if(!Be&&(ts(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){me(n,e,l)}Cn(t,e,n);break;case 21:Cn(t,e,n);break;case 22:n.mode&1?(Be=(r=Be)||n.memoizedState!==null,Cn(t,e,n),Be=r):Cn(t,e,n);break;default:Cn(t,e,n)}}function rp(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new c1),e.forEach(function(r){var s=x1.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Et(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,a=e,l=a;e:for(;l!==null;){switch(l.tag){case 5:Pe=l.stateNode,bt=!1;break e;case 3:Pe=l.stateNode.containerInfo,bt=!0;break e;case 4:Pe=l.stateNode.containerInfo,bt=!0;break e}l=l.return}if(Pe===null)throw Error(N(160));Vy(i,a,s),Pe=null,bt=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){me(s,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Hy(e,t),e=e.sibling}function Hy(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Et(e,t),zt(t),r&4){try{mi(3,t,t.return),hl(3,t)}catch(p){me(t,t.return,p)}try{mi(5,t,t.return)}catch(p){me(t,t.return,p)}}break;case 1:Et(e,t),zt(t),r&512&&n!==null&&ts(n,n.return);break;case 5:if(Et(e,t),zt(t),r&512&&n!==null&&ts(n,n.return),t.flags&32){var s=t.stateNode;try{bi(s,"")}catch(p){me(t,t.return,p)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,a=n!==null?n.memoizedProps:i,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&fg(s,i),Hc(l,a);var u=Hc(l,i);for(a=0;a<c.length;a+=2){var h=c[a],f=c[a+1];h==="style"?vg(s,f):h==="dangerouslySetInnerHTML"?gg(s,f):h==="children"?bi(s,f):ad(s,h,f,u)}switch(l){case"input":Bc(s,i);break;case"textarea":pg(s,i);break;case"select":var d=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var x=i.value;x!=null?ss(s,!!i.multiple,x,!1):d!==!!i.multiple&&(i.defaultValue!=null?ss(s,!!i.multiple,i.defaultValue,!0):ss(s,!!i.multiple,i.multiple?[]:"",!1))}s[Di]=i}catch(p){me(t,t.return,p)}}break;case 6:if(Et(e,t),zt(t),r&4){if(t.stateNode===null)throw Error(N(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(p){me(t,t.return,p)}}break;case 3:if(Et(e,t),zt(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ti(e.containerInfo)}catch(p){me(t,t.return,p)}break;case 4:Et(e,t),zt(t);break;case 13:Et(e,t),zt(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Bd=ve())),r&4&&rp(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(Be=(u=Be)||h,Et(e,t),Be=u):Et(e,t),zt(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!h&&t.mode&1)for(O=t,h=t.child;h!==null;){for(f=O=h;O!==null;){switch(d=O,x=d.child,d.tag){case 0:case 11:case 14:case 15:mi(4,d,d.return);break;case 1:ts(d,d.return);var w=d.stateNode;if(typeof w.componentWillUnmount=="function"){r=d,n=d.return;try{e=r,w.props=e.memoizedProps,w.state=e.memoizedState,w.componentWillUnmount()}catch(p){me(r,n,p)}}break;case 5:ts(d,d.return);break;case 22:if(d.memoizedState!==null){ip(f);continue}}x!==null?(x.return=d,O=x):ip(f)}h=h.sibling}e:for(h=null,f=t;;){if(f.tag===5){if(h===null){h=f;try{s=f.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=f.stateNode,c=f.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=yg("display",a))}catch(p){me(t,t.return,p)}}}else if(f.tag===6){if(h===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(p){me(t,t.return,p)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Et(e,t),zt(t),r&4&&rp(t);break;case 21:break;default:Et(e,t),zt(t)}}function zt(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if($y(n)){var r=n;break e}n=n.return}throw Error(N(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(bi(s,""),r.flags&=-33);var i=np(t);wu(t,i,s);break;case 3:case 4:var a=r.stateNode.containerInfo,l=np(t);_u(t,l,a);break;default:throw Error(N(161))}}catch(c){me(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function d1(t,e,n){O=t,Gy(t)}function Gy(t,e,n){for(var r=(t.mode&1)!==0;O!==null;){var s=O,i=s.child;if(s.tag===22&&r){var a=s.memoizedState!==null||Do;if(!a){var l=s.alternate,c=l!==null&&l.memoizedState!==null||Be;l=Do;var u=Be;if(Do=a,(Be=c)&&!u)for(O=s;O!==null;)a=O,c=a.child,a.tag===22&&a.memoizedState!==null?op(s):c!==null?(c.return=a,O=c):op(s);for(;i!==null;)O=i,Gy(i),i=i.sibling;O=s,Do=l,Be=u}sp(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,O=i):sp(t)}}function sp(t){for(;O!==null;){var e=O;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Be||hl(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Be)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:kt(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Wf(e,i,r);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Wf(e,a,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var f=h.dehydrated;f!==null&&Ti(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(N(163))}Be||e.flags&512&&xu(e)}catch(d){me(e,e.return,d)}}if(e===t){O=null;break}if(n=e.sibling,n!==null){n.return=e.return,O=n;break}O=e.return}}function ip(t){for(;O!==null;){var e=O;if(e===t){O=null;break}var n=e.sibling;if(n!==null){n.return=e.return,O=n;break}O=e.return}}function op(t){for(;O!==null;){var e=O;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{hl(4,e)}catch(c){me(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){me(e,s,c)}}var i=e.return;try{xu(e)}catch(c){me(e,i,c)}break;case 5:var a=e.return;try{xu(e)}catch(c){me(e,a,c)}}}catch(c){me(e,e.return,c)}if(e===t){O=null;break}var l=e.sibling;if(l!==null){l.return=e.return,O=l;break}O=e.return}}var h1=Math.ceil,Ea=xn.ReactCurrentDispatcher,Fd=xn.ReactCurrentOwner,vt=xn.ReactCurrentBatchConfig,Y=0,Te=null,_e=null,Oe=0,ot=0,ns=nr(0),be=0,zi=null,Er=0,fl=0,Ud=0,gi=null,Qe=null,Bd=0,Ss=1/0,Zt=null,ka=!1,Su=null,zn=null,Lo=!1,An=null,ba=0,yi=0,Cu=null,Jo=-1,Xo=0;function Ve(){return Y&6?ve():Jo!==-1?Jo:Jo=ve()}function Wn(t){return t.mode&1?Y&2&&Oe!==0?Oe&-Oe:Yw.transition!==null?(Xo===0&&(Xo=Tg()),Xo):(t=J,t!==0||(t=window.event,t=t===void 0?16:Mg(t.type)),t):1}function Ot(t,e,n,r){if(50<yi)throw yi=0,Cu=null,Error(N(185));so(t,n,r),(!(Y&2)||t!==Te)&&(t===Te&&(!(Y&2)&&(fl|=n),be===4&&In(t,Oe)),nt(t,r),n===1&&Y===0&&!(e.mode&1)&&(Ss=ve()+500,cl&&rr()))}function nt(t,e){var n=t.callbackNode;Y0(t,e);var r=ca(t,t===Te?Oe:0);if(r===0)n!==null&&mf(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&mf(n),e===1)t.tag===0?Kw(ap.bind(null,t)):ny(ap.bind(null,t)),Vw(function(){!(Y&6)&&rr()}),n=null;else{switch(Rg(r)){case 1:n=hd;break;case 4:n=Ig;break;case 16:n=la;break;case 536870912:n=Ng;break;default:n=la}n=ev(n,qy.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function qy(t,e){if(Jo=-1,Xo=0,Y&6)throw Error(N(327));var n=t.callbackNode;if(cs()&&t.callbackNode!==n)return null;var r=ca(t,t===Te?Oe:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=ja(t,r);else{e=r;var s=Y;Y|=2;var i=Yy();(Te!==t||Oe!==e)&&(Zt=null,Ss=ve()+500,xr(t,e));do try{m1();break}catch(l){Ky(t,l)}while(!0);kd(),Ea.current=i,Y=s,_e!==null?e=0:(Te=null,Oe=0,e=be)}if(e!==0){if(e===2&&(s=Qc(t),s!==0&&(r=s,e=Eu(t,s))),e===1)throw n=zi,xr(t,0),In(t,r),nt(t,ve()),n;if(e===6)In(t,r);else{if(s=t.current.alternate,!(r&30)&&!f1(s)&&(e=ja(t,r),e===2&&(i=Qc(t),i!==0&&(r=i,e=Eu(t,i))),e===1))throw n=zi,xr(t,0),In(t,r),nt(t,ve()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(N(345));case 2:ur(t,Qe,Zt);break;case 3:if(In(t,r),(r&130023424)===r&&(e=Bd+500-ve(),10<e)){if(ca(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Ve(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=su(ur.bind(null,t,Qe,Zt),e);break}ur(t,Qe,Zt);break;case 4:if(In(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var a=31-At(r);i=1<<a,a=e[a],a>s&&(s=a),r&=~i}if(r=s,r=ve()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*h1(r/1960))-r,10<r){t.timeoutHandle=su(ur.bind(null,t,Qe,Zt),r);break}ur(t,Qe,Zt);break;case 5:ur(t,Qe,Zt);break;default:throw Error(N(329))}}}return nt(t,ve()),t.callbackNode===n?qy.bind(null,t):null}function Eu(t,e){var n=gi;return t.current.memoizedState.isDehydrated&&(xr(t,e).flags|=256),t=ja(t,e),t!==2&&(e=Qe,Qe=n,e!==null&&ku(e)),t}function ku(t){Qe===null?Qe=t:Qe.push.apply(Qe,t)}function f1(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Mt(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function In(t,e){for(e&=~Ud,e&=~fl,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-At(e),r=1<<n;t[n]=-1,e&=~r}}function ap(t){if(Y&6)throw Error(N(327));cs();var e=ca(t,0);if(!(e&1))return nt(t,ve()),null;var n=ja(t,e);if(t.tag!==0&&n===2){var r=Qc(t);r!==0&&(e=r,n=Eu(t,r))}if(n===1)throw n=zi,xr(t,0),In(t,e),nt(t,ve()),n;if(n===6)throw Error(N(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ur(t,Qe,Zt),nt(t,ve()),null}function zd(t,e){var n=Y;Y|=1;try{return t(e)}finally{Y=n,Y===0&&(Ss=ve()+500,cl&&rr())}}function kr(t){An!==null&&An.tag===0&&!(Y&6)&&cs();var e=Y;Y|=1;var n=vt.transition,r=J;try{if(vt.transition=null,J=1,t)return t()}finally{J=r,vt.transition=n,Y=e,!(Y&6)&&rr()}}function Wd(){ot=ns.current,ie(ns)}function xr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,$w(n)),_e!==null)for(n=_e.return;n!==null;){var r=n;switch(Sd(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&pa();break;case 3:_s(),ie(et),ie(ze),Rd();break;case 5:Td(r);break;case 4:_s();break;case 13:ie(de);break;case 19:ie(de);break;case 10:bd(r.type._context);break;case 22:case 23:Wd()}n=n.return}if(Te=t,_e=t=$n(t.current,null),Oe=ot=e,be=0,zi=null,Ud=fl=Er=0,Qe=gi=null,pr!==null){for(e=0;e<pr.length;e++)if(n=pr[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var a=i.next;i.next=s,r.next=a}n.pending=r}pr=null}return t}function Ky(t,e){do{var n=_e;try{if(kd(),Ko.current=Ca,Sa){for(var r=he.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Sa=!1}if(Cr=0,Ie=Ce=he=null,pi=!1,Fi=0,Fd.current=null,n===null||n.return===null){be=1,zi=e,_e=null;break}e:{var i=t,a=n.return,l=n,c=e;if(e=Oe,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,h=l,f=h.tag;if(!(h.mode&1)&&(f===0||f===11||f===15)){var d=h.alternate;d?(h.updateQueue=d.updateQueue,h.memoizedState=d.memoizedState,h.lanes=d.lanes):(h.updateQueue=null,h.memoizedState=null)}var x=Kf(a);if(x!==null){x.flags&=-257,Yf(x,a,l,i,e),x.mode&1&&qf(i,u,e),e=x,c=u;var w=e.updateQueue;if(w===null){var p=new Set;p.add(c),e.updateQueue=p}else w.add(c);break e}else{if(!(e&1)){qf(i,u,e),$d();break e}c=Error(N(426))}}else if(ce&&l.mode&1){var _=Kf(a);if(_!==null){!(_.flags&65536)&&(_.flags|=256),Yf(_,a,l,i,e),Cd(ws(c,l));break e}}i=c=ws(c,l),be!==4&&(be=2),gi===null?gi=[i]:gi.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var m=Ry(i,c,e);zf(i,m);break e;case 1:l=c;var g=i.type,y=i.stateNode;if(!(i.flags&128)&&(typeof g.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(zn===null||!zn.has(y)))){i.flags|=65536,e&=-e,i.lanes|=e;var v=Py(i,l,e);zf(i,v);break e}}i=i.return}while(i!==null)}Jy(n)}catch(C){e=C,_e===n&&n!==null&&(_e=n=n.return);continue}break}while(!0)}function Yy(){var t=Ea.current;return Ea.current=Ca,t===null?Ca:t}function $d(){(be===0||be===3||be===2)&&(be=4),Te===null||!(Er&268435455)&&!(fl&268435455)||In(Te,Oe)}function ja(t,e){var n=Y;Y|=2;var r=Yy();(Te!==t||Oe!==e)&&(Zt=null,xr(t,e));do try{p1();break}catch(s){Ky(t,s)}while(!0);if(kd(),Y=n,Ea.current=r,_e!==null)throw Error(N(261));return Te=null,Oe=0,be}function p1(){for(;_e!==null;)Qy(_e)}function m1(){for(;_e!==null&&!B0();)Qy(_e)}function Qy(t){var e=Zy(t.alternate,t,ot);t.memoizedProps=t.pendingProps,e===null?Jy(t):_e=e,Fd.current=null}function Jy(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=l1(n,e),n!==null){n.flags&=32767,_e=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{be=6,_e=null;return}}else if(n=a1(n,e,ot),n!==null){_e=n;return}if(e=e.sibling,e!==null){_e=e;return}_e=e=t}while(e!==null);be===0&&(be=5)}function ur(t,e,n){var r=J,s=vt.transition;try{vt.transition=null,J=1,g1(t,e,n,r)}finally{vt.transition=s,J=r}return null}function g1(t,e,n,r){do cs();while(An!==null);if(Y&6)throw Error(N(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(N(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(Q0(t,i),t===Te&&(_e=Te=null,Oe=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Lo||(Lo=!0,ev(la,function(){return cs(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=vt.transition,vt.transition=null;var a=J;J=1;var l=Y;Y|=4,Fd.current=null,u1(t,n),Hy(n,t),Lw(nu),ua=!!tu,nu=tu=null,t.current=n,d1(n),z0(),Y=l,J=a,vt.transition=i}else t.current=n;if(Lo&&(Lo=!1,An=t,ba=s),i=t.pendingLanes,i===0&&(zn=null),V0(n.stateNode),nt(t,ve()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(ka)throw ka=!1,t=Su,Su=null,t;return ba&1&&t.tag!==0&&cs(),i=t.pendingLanes,i&1?t===Cu?yi++:(yi=0,Cu=t):yi=0,rr(),null}function cs(){if(An!==null){var t=Rg(ba),e=vt.transition,n=J;try{if(vt.transition=null,J=16>t?16:t,An===null)var r=!1;else{if(t=An,An=null,ba=0,Y&6)throw Error(N(331));var s=Y;for(Y|=4,O=t.current;O!==null;){var i=O,a=i.child;if(O.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(O=u;O!==null;){var h=O;switch(h.tag){case 0:case 11:case 15:mi(8,h,i)}var f=h.child;if(f!==null)f.return=h,O=f;else for(;O!==null;){h=O;var d=h.sibling,x=h.return;if(Wy(h),h===u){O=null;break}if(d!==null){d.return=x,O=d;break}O=x}}}var w=i.alternate;if(w!==null){var p=w.child;if(p!==null){w.child=null;do{var _=p.sibling;p.sibling=null,p=_}while(p!==null)}}O=i}}if(i.subtreeFlags&2064&&a!==null)a.return=i,O=a;else e:for(;O!==null;){if(i=O,i.flags&2048)switch(i.tag){case 0:case 11:case 15:mi(9,i,i.return)}var m=i.sibling;if(m!==null){m.return=i.return,O=m;break e}O=i.return}}var g=t.current;for(O=g;O!==null;){a=O;var y=a.child;if(a.subtreeFlags&2064&&y!==null)y.return=a,O=y;else e:for(a=g;O!==null;){if(l=O,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:hl(9,l)}}catch(C){me(l,l.return,C)}if(l===a){O=null;break e}var v=l.sibling;if(v!==null){v.return=l.return,O=v;break e}O=l.return}}if(Y=s,rr(),Vt&&typeof Vt.onPostCommitFiberRoot=="function")try{Vt.onPostCommitFiberRoot(sl,t)}catch{}r=!0}return r}finally{J=n,vt.transition=e}}return!1}function lp(t,e,n){e=ws(n,e),e=Ry(t,e,1),t=Bn(t,e,1),e=Ve(),t!==null&&(so(t,1,e),nt(t,e))}function me(t,e,n){if(t.tag===3)lp(t,t,n);else for(;e!==null;){if(e.tag===3){lp(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(zn===null||!zn.has(r))){t=ws(n,t),t=Py(e,t,1),e=Bn(e,t,1),t=Ve(),e!==null&&(so(e,1,t),nt(e,t));break}}e=e.return}}function y1(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Ve(),t.pingedLanes|=t.suspendedLanes&n,Te===t&&(Oe&n)===n&&(be===4||be===3&&(Oe&130023424)===Oe&&500>ve()-Bd?xr(t,0):Ud|=n),nt(t,e)}function Xy(t,e){e===0&&(t.mode&1?(e=bo,bo<<=1,!(bo&130023424)&&(bo=4194304)):e=1);var n=Ve();t=pn(t,e),t!==null&&(so(t,e,n),nt(t,n))}function v1(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Xy(t,n)}function x1(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(N(314))}r!==null&&r.delete(e),Xy(t,n)}var Zy;Zy=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||et.current)Xe=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Xe=!1,o1(t,e,n);Xe=!!(t.flags&131072)}else Xe=!1,ce&&e.flags&1048576&&ry(e,ya,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Qo(t,e),t=e.pendingProps;var s=ys(e,ze.current);ls(e,n),s=Ad(null,e,r,t,s,n);var i=Od();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,tt(r)?(i=!0,ma(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Id(e),s.updater=dl,e.stateNode=s,s._reactInternals=e,du(e,r,t,n),e=pu(null,e,r,!0,i,n)):(e.tag=0,ce&&i&&wd(e),We(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Qo(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=w1(r),t=kt(r,t),s){case 0:e=fu(null,e,r,t,n);break e;case 1:e=Xf(null,e,r,t,n);break e;case 11:e=Qf(null,e,r,t,n);break e;case 14:e=Jf(null,e,r,kt(r.type,t),n);break e}throw Error(N(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:kt(r,s),fu(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:kt(r,s),Xf(t,e,r,s,n);case 3:e:{if(Ly(e),t===null)throw Error(N(387));r=e.pendingProps,i=e.memoizedState,s=i.element,cy(t,e),_a(e,r,null,n);var a=e.memoizedState;if(r=a.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=ws(Error(N(423)),e),e=Zf(t,e,r,n,s);break e}else if(r!==s){s=ws(Error(N(424)),e),e=Zf(t,e,r,n,s);break e}else for(at=Un(e.stateNode.containerInfo.firstChild),lt=e,ce=!0,jt=null,n=ay(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(vs(),r===s){e=mn(t,e,n);break e}We(t,e,r,n)}e=e.child}return e;case 5:return uy(e),t===null&&lu(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,a=s.children,ru(r,s)?a=null:i!==null&&ru(r,i)&&(e.flags|=32),Dy(t,e),We(t,e,a,n),e.child;case 6:return t===null&&lu(e),null;case 13:return My(t,e,n);case 4:return Nd(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=xs(e,null,r,n):We(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:kt(r,s),Qf(t,e,r,s,n);case 7:return We(t,e,e.pendingProps,n),e.child;case 8:return We(t,e,e.pendingProps.children,n),e.child;case 12:return We(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,a=s.value,re(va,r._currentValue),r._currentValue=a,i!==null)if(Mt(i.value,a)){if(i.children===s.children&&!et.current){e=mn(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){a=i.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=ln(-1,n&-n),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),cu(i.return,n,e),l.lanes|=n;break}c=c.next}}else if(i.tag===10)a=i.type===e.type?null:i.child;else if(i.tag===18){if(a=i.return,a===null)throw Error(N(341));a.lanes|=n,l=a.alternate,l!==null&&(l.lanes|=n),cu(a,n,e),a=i.sibling}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===e){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}We(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,ls(e,n),s=xt(s),r=r(s),e.flags|=1,We(t,e,r,n),e.child;case 14:return r=e.type,s=kt(r,e.pendingProps),s=kt(r.type,s),Jf(t,e,r,s,n);case 15:return Ay(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:kt(r,s),Qo(t,e),e.tag=1,tt(r)?(t=!0,ma(e)):t=!1,ls(e,n),Ty(e,r,s),du(e,r,s,n),pu(null,e,r,!0,t,n);case 19:return Fy(t,e,n);case 22:return Oy(t,e,n)}throw Error(N(156,e.tag))};function ev(t,e){return jg(t,e)}function _1(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function gt(t,e,n,r){return new _1(t,e,n,r)}function Vd(t){return t=t.prototype,!(!t||!t.isReactComponent)}function w1(t){if(typeof t=="function")return Vd(t)?1:0;if(t!=null){if(t=t.$$typeof,t===cd)return 11;if(t===ud)return 14}return 2}function $n(t,e){var n=t.alternate;return n===null?(n=gt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Zo(t,e,n,r,s,i){var a=2;if(r=t,typeof t=="function")Vd(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case Gr:return _r(n.children,s,i,e);case ld:a=8,s|=8;break;case Dc:return t=gt(12,n,e,s|2),t.elementType=Dc,t.lanes=i,t;case Lc:return t=gt(13,n,e,s),t.elementType=Lc,t.lanes=i,t;case Mc:return t=gt(19,n,e,s),t.elementType=Mc,t.lanes=i,t;case ug:return pl(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case lg:a=10;break e;case cg:a=9;break e;case cd:a=11;break e;case ud:a=14;break e;case kn:a=16,r=null;break e}throw Error(N(130,t==null?t:typeof t,""))}return e=gt(a,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function _r(t,e,n,r){return t=gt(7,t,r,e),t.lanes=n,t}function pl(t,e,n,r){return t=gt(22,t,r,e),t.elementType=ug,t.lanes=n,t.stateNode={isHidden:!1},t}function hc(t,e,n){return t=gt(6,t,null,e),t.lanes=n,t}function fc(t,e,n){return e=gt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function S1(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ql(0),this.expirationTimes=ql(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ql(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Hd(t,e,n,r,s,i,a,l,c){return t=new S1(t,e,n,l,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=gt(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Id(i),t}function C1(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Hr,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function tv(t){if(!t)return Qn;t=t._reactInternals;e:{if(Or(t)!==t||t.tag!==1)throw Error(N(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(tt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(N(171))}if(t.tag===1){var n=t.type;if(tt(n))return ty(t,n,e)}return e}function nv(t,e,n,r,s,i,a,l,c){return t=Hd(n,r,!0,t,s,i,a,l,c),t.context=tv(null),n=t.current,r=Ve(),s=Wn(n),i=ln(r,s),i.callback=e??null,Bn(n,i,s),t.current.lanes=s,so(t,s,r),nt(t,r),t}function ml(t,e,n,r){var s=e.current,i=Ve(),a=Wn(s);return n=tv(n),e.context===null?e.context=n:e.pendingContext=n,e=ln(i,a),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Bn(s,e,a),t!==null&&(Ot(t,s,a,i),qo(t,s,a)),a}function Ia(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function cp(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Gd(t,e){cp(t,e),(t=t.alternate)&&cp(t,e)}function E1(){return null}var rv=typeof reportError=="function"?reportError:function(t){console.error(t)};function qd(t){this._internalRoot=t}gl.prototype.render=qd.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(N(409));ml(t,e,null,null)};gl.prototype.unmount=qd.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;kr(function(){ml(null,t,null,null)}),e[fn]=null}};function gl(t){this._internalRoot=t}gl.prototype.unstable_scheduleHydration=function(t){if(t){var e=Og();t={blockedOn:null,target:t,priority:e};for(var n=0;n<jn.length&&e!==0&&e<jn[n].priority;n++);jn.splice(n,0,t),n===0&&Lg(t)}};function Kd(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function yl(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function up(){}function k1(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var u=Ia(a);i.call(u)}}var a=nv(e,r,t,0,null,!1,!1,"",up);return t._reactRootContainer=a,t[fn]=a.current,Ai(t.nodeType===8?t.parentNode:t),kr(),a}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var u=Ia(c);l.call(u)}}var c=Hd(t,0,!1,null,null,!1,!1,"",up);return t._reactRootContainer=c,t[fn]=c.current,Ai(t.nodeType===8?t.parentNode:t),kr(function(){ml(e,c,n,r)}),c}function vl(t,e,n,r,s){var i=n._reactRootContainer;if(i){var a=i;if(typeof s=="function"){var l=s;s=function(){var c=Ia(a);l.call(c)}}ml(e,a,t,s)}else a=k1(n,e,t,s,r);return Ia(a)}Pg=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=ii(e.pendingLanes);n!==0&&(fd(e,n|1),nt(e,ve()),!(Y&6)&&(Ss=ve()+500,rr()))}break;case 13:kr(function(){var r=pn(t,1);if(r!==null){var s=Ve();Ot(r,t,1,s)}}),Gd(t,1)}};pd=function(t){if(t.tag===13){var e=pn(t,134217728);if(e!==null){var n=Ve();Ot(e,t,134217728,n)}Gd(t,134217728)}};Ag=function(t){if(t.tag===13){var e=Wn(t),n=pn(t,e);if(n!==null){var r=Ve();Ot(n,t,e,r)}Gd(t,e)}};Og=function(){return J};Dg=function(t,e){var n=J;try{return J=t,e()}finally{J=n}};qc=function(t,e,n){switch(e){case"input":if(Bc(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=ll(r);if(!s)throw Error(N(90));hg(r),Bc(r,s)}}}break;case"textarea":pg(t,n);break;case"select":e=n.value,e!=null&&ss(t,!!n.multiple,e,!1)}};wg=zd;Sg=kr;var b1={usingClientEntryPoint:!1,Events:[oo,Qr,ll,xg,_g,zd]},Qs={findFiberByHostInstance:fr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},j1={bundleType:Qs.bundleType,version:Qs.version,rendererPackageName:Qs.rendererPackageName,rendererConfig:Qs.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:xn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=kg(t),t===null?null:t.stateNode},findFiberByHostInstance:Qs.findFiberByHostInstance||E1,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Mo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Mo.isDisabled&&Mo.supportsFiber)try{sl=Mo.inject(j1),Vt=Mo}catch{}}dt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=b1;dt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Kd(e))throw Error(N(200));return C1(t,e,null,n)};dt.createRoot=function(t,e){if(!Kd(t))throw Error(N(299));var n=!1,r="",s=rv;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Hd(t,1,!1,null,null,n,!1,r,s),t[fn]=e.current,Ai(t.nodeType===8?t.parentNode:t),new qd(e)};dt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(N(188)):(t=Object.keys(t).join(","),Error(N(268,t)));return t=kg(e),t=t===null?null:t.stateNode,t};dt.flushSync=function(t){return kr(t)};dt.hydrate=function(t,e,n){if(!yl(e))throw Error(N(200));return vl(null,t,e,!0,n)};dt.hydrateRoot=function(t,e,n){if(!Kd(t))throw Error(N(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",a=rv;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=nv(e,null,t,1,n??null,s,!1,i,a),t[fn]=e.current,Ai(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new gl(e)};dt.render=function(t,e,n){if(!yl(e))throw Error(N(200));return vl(null,t,e,!1,n)};dt.unmountComponentAtNode=function(t){if(!yl(t))throw Error(N(40));return t._reactRootContainer?(kr(function(){vl(null,null,t,!1,function(){t._reactRootContainer=null,t[fn]=null})}),!0):!1};dt.unstable_batchedUpdates=zd;dt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!yl(n))throw Error(N(200));if(t==null||t._reactInternals===void 0)throw Error(N(38));return vl(t,e,n,!1,r)};dt.version="18.3.1-next-f1338f8080-20240426";function sv(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(sv)}catch(t){console.error(t)}}sv(),sg.exports=dt;var I1=sg.exports,iv,dp=I1;iv=dp.createRoot,dp.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Wi(){return Wi=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Wi.apply(this,arguments)}var On;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(On||(On={}));const hp="popstate";function N1(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:a,hash:l}=r.location;return bu("",{pathname:i,search:a,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:Na(s)}return R1(e,n,null,t)}function fe(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Yd(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function T1(){return Math.random().toString(36).substr(2,8)}function fp(t,e){return{usr:t.state,key:t.key,idx:e}}function bu(t,e,n,r){return n===void 0&&(n=null),Wi({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?As(e):e,{state:n,key:e&&e.key||r||T1()})}function Na(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function As(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function R1(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,a=s.history,l=On.Pop,c=null,u=h();u==null&&(u=0,a.replaceState(Wi({},a.state,{idx:u}),""));function h(){return(a.state||{idx:null}).idx}function f(){l=On.Pop;let _=h(),m=_==null?null:_-u;u=_,c&&c({action:l,location:p.location,delta:m})}function d(_,m){l=On.Push;let g=bu(p.location,_,m);u=h()+1;let y=fp(g,u),v=p.createHref(g);try{a.pushState(y,"",v)}catch(C){if(C instanceof DOMException&&C.name==="DataCloneError")throw C;s.location.assign(v)}i&&c&&c({action:l,location:p.location,delta:1})}function x(_,m){l=On.Replace;let g=bu(p.location,_,m);u=h();let y=fp(g,u),v=p.createHref(g);a.replaceState(y,"",v),i&&c&&c({action:l,location:p.location,delta:0})}function w(_){let m=s.location.origin!=="null"?s.location.origin:s.location.href,g=typeof _=="string"?_:Na(_);return g=g.replace(/ $/,"%20"),fe(m,"No window.location.(origin|href) available to create URL for href: "+g),new URL(g,m)}let p={get action(){return l},get location(){return t(s,a)},listen(_){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(hp,f),c=_,()=>{s.removeEventListener(hp,f),c=null}},createHref(_){return e(s,_)},createURL:w,encodeLocation(_){let m=w(_);return{pathname:m.pathname,search:m.search,hash:m.hash}},push:d,replace:x,go(_){return a.go(_)}};return p}var pp;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(pp||(pp={}));function P1(t,e,n){return n===void 0&&(n="/"),A1(t,e,n)}function A1(t,e,n,r){let s=typeof e=="string"?As(e):e,i=Cs(s.pathname||"/",n);if(i==null)return null;let a=ov(t);O1(a);let l=null;for(let c=0;l==null&&c<a.length;++c){let u=H1(i);l=$1(a[c],u)}return l}function ov(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,a,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:a,route:i};c.relativePath.startsWith("/")&&(fe(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let u=Vn([r,c.relativePath]),h=n.concat(c);i.children&&i.children.length>0&&(fe(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),ov(i.children,e,h,u)),!(i.path==null&&!i.index)&&e.push({path:u,score:z1(u,i.index),routesMeta:h})};return t.forEach((i,a)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))s(i,a);else for(let c of av(i.path))s(i,a,c)}),e}function av(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let a=av(r.join("/")),l=[];return l.push(...a.map(c=>c===""?i:[i,c].join("/"))),s&&l.push(...a),l.map(c=>t.startsWith("/")&&c===""?"/":c)}function O1(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:W1(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const D1=/^:[\w-]+$/,L1=3,M1=2,F1=1,U1=10,B1=-2,mp=t=>t==="*";function z1(t,e){let n=t.split("/"),r=n.length;return n.some(mp)&&(r+=B1),e&&(r+=M1),n.filter(s=>!mp(s)).reduce((s,i)=>s+(D1.test(i)?L1:i===""?F1:U1),r)}function W1(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function $1(t,e,n){let{routesMeta:r}=t,s={},i="/",a=[];for(let l=0;l<r.length;++l){let c=r[l],u=l===r.length-1,h=i==="/"?e:e.slice(i.length)||"/",f=ju({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},h),d=c.route;if(!f)return null;Object.assign(s,f.params),a.push({params:s,pathname:Vn([i,f.pathname]),pathnameBase:Q1(Vn([i,f.pathnameBase])),route:d}),f.pathnameBase!=="/"&&(i=Vn([i,f.pathnameBase]))}return a}function ju(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=V1(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],a=i.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:r.reduce((u,h,f)=>{let{paramName:d,isOptional:x}=h;if(d==="*"){let p=l[f]||"";a=i.slice(0,i.length-p.length).replace(/(.)\/+$/,"$1")}const w=l[f];return x&&!w?u[d]=void 0:u[d]=(w||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:a,pattern:t}}function V1(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Yd(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,l,c)=>(r.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function H1(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Yd(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Cs(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}const G1=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,q1=t=>G1.test(t);function K1(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?As(t):t,i;if(n)if(q1(n))i=n;else{if(n.includes("//")){let a=n;n=n.replace(/\/\/+/g,"/"),Yd(!1,"Pathnames cannot have embedded double slashes - normalizing "+(a+" -> "+n))}n.startsWith("/")?i=gp(n.substring(1),"/"):i=gp(n,e)}else i=e;return{pathname:i,search:J1(r),hash:X1(s)}}function gp(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function pc(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Y1(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Qd(t,e){let n=Y1(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Jd(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=As(t):(s=Wi({},t),fe(!s.pathname||!s.pathname.includes("?"),pc("?","pathname","search",s)),fe(!s.pathname||!s.pathname.includes("#"),pc("#","pathname","hash",s)),fe(!s.search||!s.search.includes("#"),pc("#","search","hash",s)));let i=t===""||s.pathname==="",a=i?"/":s.pathname,l;if(a==null)l=n;else{let f=e.length-1;if(!r&&a.startsWith("..")){let d=a.split("/");for(;d[0]==="..";)d.shift(),f-=1;s.pathname=d.join("/")}l=f>=0?e[f]:"/"}let c=K1(s,l),u=a&&a!=="/"&&a.endsWith("/"),h=(i||a===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(u||h)&&(c.pathname+="/"),c}const Vn=t=>t.join("/").replace(/\/\/+/g,"/"),Q1=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),J1=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,X1=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function Z1(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const lv=["post","put","patch","delete"];new Set(lv);const eS=["get",...lv];new Set(eS);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function $i(){return $i=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},$i.apply(this,arguments)}const xl=S.createContext(null),cv=S.createContext(null),_n=S.createContext(null),_l=S.createContext(null),Kt=S.createContext({outlet:null,matches:[],isDataRoute:!1}),uv=S.createContext(null);function tS(t,e){let{relative:n}=e===void 0?{}:e;Os()||fe(!1);let{basename:r,navigator:s}=S.useContext(_n),{hash:i,pathname:a,search:l}=wl(t,{relative:n}),c=a;return r!=="/"&&(c=a==="/"?r:Vn([r,a])),s.createHref({pathname:c,search:l,hash:i})}function Os(){return S.useContext(_l)!=null}function wn(){return Os()||fe(!1),S.useContext(_l).location}function dv(t){S.useContext(_n).static||S.useLayoutEffect(t)}function sr(){let{isDataRoute:t}=S.useContext(Kt);return t?yS():nS()}function nS(){Os()||fe(!1);let t=S.useContext(xl),{basename:e,future:n,navigator:r}=S.useContext(_n),{matches:s}=S.useContext(Kt),{pathname:i}=wn(),a=JSON.stringify(Qd(s,n.v7_relativeSplatPath)),l=S.useRef(!1);return dv(()=>{l.current=!0}),S.useCallback(function(u,h){if(h===void 0&&(h={}),!l.current)return;if(typeof u=="number"){r.go(u);return}let f=Jd(u,JSON.parse(a),i,h.relative==="path");t==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:Vn([e,f.pathname])),(h.replace?r.replace:r.push)(f,h.state,h)},[e,r,a,i,t])}const rS=S.createContext(null);function sS(t){let e=S.useContext(Kt).outlet;return e&&S.createElement(rS.Provider,{value:t},e)}function iS(){let{matches:t}=S.useContext(Kt),e=t[t.length-1];return e?e.params:{}}function wl(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=S.useContext(_n),{matches:s}=S.useContext(Kt),{pathname:i}=wn(),a=JSON.stringify(Qd(s,r.v7_relativeSplatPath));return S.useMemo(()=>Jd(t,JSON.parse(a),i,n==="path"),[t,a,i,n])}function oS(t,e){return aS(t,e)}function aS(t,e,n,r){Os()||fe(!1);let{navigator:s}=S.useContext(_n),{matches:i}=S.useContext(Kt),a=i[i.length-1],l=a?a.params:{};a&&a.pathname;let c=a?a.pathnameBase:"/";a&&a.route;let u=wn(),h;if(e){var f;let _=typeof e=="string"?As(e):e;c==="/"||(f=_.pathname)!=null&&f.startsWith(c)||fe(!1),h=_}else h=u;let d=h.pathname||"/",x=d;if(c!=="/"){let _=c.replace(/^\//,"").split("/");x="/"+d.replace(/^\//,"").split("/").slice(_.length).join("/")}let w=P1(t,{pathname:x}),p=hS(w&&w.map(_=>Object.assign({},_,{params:Object.assign({},l,_.params),pathname:Vn([c,s.encodeLocation?s.encodeLocation(_.pathname).pathname:_.pathname]),pathnameBase:_.pathnameBase==="/"?c:Vn([c,s.encodeLocation?s.encodeLocation(_.pathnameBase).pathname:_.pathnameBase])})),i,n,r);return e&&p?S.createElement(_l.Provider,{value:{location:$i({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:On.Pop}},p):p}function lS(){let t=gS(),e=Z1(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return S.createElement(S.Fragment,null,S.createElement("h2",null,"Unexpected Application Error!"),S.createElement("h3",{style:{fontStyle:"italic"}},e),n?S.createElement("pre",{style:s},n):null,null)}const cS=S.createElement(lS,null);class uS extends S.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?S.createElement(Kt.Provider,{value:this.props.routeContext},S.createElement(uv.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function dS(t){let{routeContext:e,match:n,children:r}=t,s=S.useContext(xl);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),S.createElement(Kt.Provider,{value:e},r)}function hS(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let a=t,l=(s=n)==null?void 0:s.errors;if(l!=null){let h=a.findIndex(f=>f.route.id&&(l==null?void 0:l[f.route.id])!==void 0);h>=0||fe(!1),a=a.slice(0,Math.min(a.length,h+1))}let c=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let h=0;h<a.length;h++){let f=a[h];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(u=h),f.route.id){let{loaderData:d,errors:x}=n,w=f.route.loader&&d[f.route.id]===void 0&&(!x||x[f.route.id]===void 0);if(f.route.lazy||w){c=!0,u>=0?a=a.slice(0,u+1):a=[a[0]];break}}}return a.reduceRight((h,f,d)=>{let x,w=!1,p=null,_=null;n&&(x=l&&f.route.id?l[f.route.id]:void 0,p=f.route.errorElement||cS,c&&(u<0&&d===0?(vS("route-fallback"),w=!0,_=null):u===d&&(w=!0,_=f.route.hydrateFallbackElement||null)));let m=e.concat(a.slice(0,d+1)),g=()=>{let y;return x?y=p:w?y=_:f.route.Component?y=S.createElement(f.route.Component,null):f.route.element?y=f.route.element:y=h,S.createElement(dS,{match:f,routeContext:{outlet:h,matches:m,isDataRoute:n!=null},children:y})};return n&&(f.route.ErrorBoundary||f.route.errorElement||d===0)?S.createElement(uS,{location:n.location,revalidation:n.revalidation,component:p,error:x,children:g(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):g()},null)}var hv=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(hv||{}),fv=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(fv||{});function fS(t){let e=S.useContext(xl);return e||fe(!1),e}function pS(t){let e=S.useContext(cv);return e||fe(!1),e}function mS(t){let e=S.useContext(Kt);return e||fe(!1),e}function pv(t){let e=mS(),n=e.matches[e.matches.length-1];return n.route.id||fe(!1),n.route.id}function gS(){var t;let e=S.useContext(uv),n=pS(),r=pv();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function yS(){let{router:t}=fS(hv.UseNavigateStable),e=pv(fv.UseNavigateStable),n=S.useRef(!1);return dv(()=>{n.current=!0}),S.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,$i({fromRouteId:e},i)))},[t,e])}const yp={};function vS(t,e,n){yp[t]||(yp[t]=!0)}function xS(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function _S(t){let{to:e,replace:n,state:r,relative:s}=t;Os()||fe(!1);let{future:i,static:a}=S.useContext(_n),{matches:l}=S.useContext(Kt),{pathname:c}=wn(),u=sr(),h=Jd(e,Qd(l,i.v7_relativeSplatPath),c,s==="path"),f=JSON.stringify(h);return S.useEffect(()=>u(JSON.parse(f),{replace:n,state:r,relative:s}),[u,f,s,n,r]),null}function wS(t){return sS(t.context)}function le(t){fe(!1)}function SS(t){let{basename:e="/",children:n=null,location:r,navigationType:s=On.Pop,navigator:i,static:a=!1,future:l}=t;Os()&&fe(!1);let c=e.replace(/^\/*/,"/"),u=S.useMemo(()=>({basename:c,navigator:i,static:a,future:$i({v7_relativeSplatPath:!1},l)}),[c,l,i,a]);typeof r=="string"&&(r=As(r));let{pathname:h="/",search:f="",hash:d="",state:x=null,key:w="default"}=r,p=S.useMemo(()=>{let _=Cs(h,c);return _==null?null:{location:{pathname:_,search:f,hash:d,state:x,key:w},navigationType:s}},[c,h,f,d,x,w,s]);return p==null?null:S.createElement(_n.Provider,{value:u},S.createElement(_l.Provider,{children:n,value:p}))}function CS(t){let{children:e,location:n}=t;return oS(Iu(e),n)}new Promise(()=>{});function Iu(t,e){e===void 0&&(e=[]);let n=[];return S.Children.forEach(t,(r,s)=>{if(!S.isValidElement(r))return;let i=[...e,s];if(r.type===S.Fragment){n.push.apply(n,Iu(r.props.children,i));return}r.type!==le&&fe(!1),!r.props.index||!r.props.children||fe(!1);let a={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=Iu(r.props.children,i)),n.push(a)}),n}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ta(){return Ta=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ta.apply(this,arguments)}function mv(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function ES(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function kS(t,e){return t.button===0&&(!e||e==="_self")&&!ES(t)}function Nu(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(s=>[n,s]):[[n,r]])},[]))}function bS(t,e){let n=Nu(t);return e&&e.forEach((r,s)=>{n.has(s)||e.getAll(s).forEach(i=>{n.append(s,i)})}),n}const jS=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],IS=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],NS="6";try{window.__reactRouterVersion=NS}catch{}const TS=S.createContext({isTransitioning:!1}),RS="startTransition",vp=y0[RS];function PS(t){let{basename:e,children:n,future:r,window:s}=t,i=S.useRef();i.current==null&&(i.current=N1({window:s,v5Compat:!0}));let a=i.current,[l,c]=S.useState({action:a.action,location:a.location}),{v7_startTransition:u}=r||{},h=S.useCallback(f=>{u&&vp?vp(()=>c(f)):c(f)},[c,u]);return S.useLayoutEffect(()=>a.listen(h),[a,h]),S.useEffect(()=>xS(r),[r]),S.createElement(SS,{basename:e,children:n,location:l.location,navigationType:l.action,navigator:a,future:r})}const AS=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",OS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,R=S.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:a,state:l,target:c,to:u,preventScrollReset:h,viewTransition:f}=e,d=mv(e,jS),{basename:x}=S.useContext(_n),w,p=!1;if(typeof u=="string"&&OS.test(u)&&(w=u,AS))try{let y=new URL(window.location.href),v=u.startsWith("//")?new URL(y.protocol+u):new URL(u),C=Cs(v.pathname,x);v.origin===y.origin&&C!=null?u=C+v.search+v.hash:p=!0}catch{}let _=tS(u,{relative:s}),m=MS(u,{replace:a,state:l,target:c,preventScrollReset:h,relative:s,viewTransition:f});function g(y){r&&r(y),y.defaultPrevented||m(y)}return S.createElement("a",Ta({},d,{href:w||_,onClick:p||i?r:g,ref:n,target:c}))}),DS=S.forwardRef(function(e,n){let{"aria-current":r="page",caseSensitive:s=!1,className:i="",end:a=!1,style:l,to:c,viewTransition:u,children:h}=e,f=mv(e,IS),d=wl(c,{relative:f.relative}),x=wn(),w=S.useContext(cv),{navigator:p,basename:_}=S.useContext(_n),m=w!=null&&US(d)&&u===!0,g=p.encodeLocation?p.encodeLocation(d).pathname:d.pathname,y=x.pathname,v=w&&w.navigation&&w.navigation.location?w.navigation.location.pathname:null;s||(y=y.toLowerCase(),v=v?v.toLowerCase():null,g=g.toLowerCase()),v&&_&&(v=Cs(v,_)||v);const C=g!=="/"&&g.endsWith("/")?g.length-1:g.length;let E=y===g||!a&&y.startsWith(g)&&y.charAt(C)==="/",b=v!=null&&(v===g||!a&&v.startsWith(g)&&v.charAt(g.length)==="/"),I={isActive:E,isPending:b,isTransitioning:m},U=E?r:void 0,j;typeof i=="function"?j=i(I):j=[i,E?"active":null,b?"pending":null,m?"transitioning":null].filter(Boolean).join(" ");let $=typeof l=="function"?l(I):l;return S.createElement(R,Ta({},f,{"aria-current":U,className:j,ref:n,style:$,to:c,viewTransition:u}),typeof h=="function"?h(I):h)});var Tu;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Tu||(Tu={}));var xp;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(xp||(xp={}));function LS(t){let e=S.useContext(xl);return e||fe(!1),e}function MS(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:a,viewTransition:l}=e===void 0?{}:e,c=sr(),u=wn(),h=wl(t,{relative:a});return S.useCallback(f=>{if(kS(f,n)){f.preventDefault();let d=r!==void 0?r:Na(u)===Na(h);c(t,{replace:d,state:s,preventScrollReset:i,relative:a,viewTransition:l})}},[u,c,h,r,s,n,t,i,a,l])}function FS(t){let e=S.useRef(Nu(t)),n=S.useRef(!1),r=wn(),s=S.useMemo(()=>bS(r.search,n.current?null:e.current),[r.search]),i=sr(),a=S.useCallback((l,c)=>{const u=Nu(typeof l=="function"?l(s):l);n.current=!0,i("?"+u,c)},[i,s]);return[s,a]}function US(t,e){e===void 0&&(e={});let n=S.useContext(TS);n==null&&fe(!1);let{basename:r}=LS(Tu.useViewTransitionState),s=wl(t,{relative:e.relative});if(!n.isTransitioning)return!1;let i=Cs(n.currentLocation.pathname,r)||n.currentLocation.pathname,a=Cs(n.nextLocation.pathname,r)||n.nextLocation.pathname;return ju(s.pathname,a)!=null||ju(s.pathname,i)!=null}const BS=()=>{};var _p={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gv={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T=function(t,e){if(!t)throw Ds(e)},Ds=function(t){return new Error("Firebase Database ("+gv.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yv=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},zS=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],a=t[n++],l=t[n++],c=((s&7)<<18|(i&63)<<12|(a&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],a=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|a&63)}}return e.join("")},Xd={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],a=s+1<t.length,l=a?t[s+1]:0,c=s+2<t.length,u=c?t[s+2]:0,h=i>>2,f=(i&3)<<4|l>>4;let d=(l&15)<<2|u>>6,x=u&63;c||(x=64,a||(d=64)),r.push(n[h],n[f],n[d],n[x])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(yv(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):zS(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],l=s<t.length?n[t.charAt(s)]:0;++s;const u=s<t.length?n[t.charAt(s)]:64;++s;const f=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||l==null||u==null||f==null)throw new WS;const d=i<<2|l>>4;if(r.push(d),u!==64){const x=l<<4&240|u>>2;if(r.push(x),f!==64){const w=u<<6&192|f;r.push(w)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class WS extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const vv=function(t){const e=yv(t);return Xd.encodeByteArray(e,!0)},Ra=function(t){return vv(t).replace(/\./g,"")},Pa=function(t){try{return Xd.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $S(t){return xv(void 0,t)}function xv(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!VS(n)||(t[n]=xv(t[n],e[n]));return t}function VS(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GS=()=>HS().__FIREBASE_DEFAULTS__,qS=()=>{if(typeof process>"u"||typeof _p>"u")return;const t=_p.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},KS=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Pa(t[1]);return e&&JSON.parse(e)},Zd=()=>{try{return BS()||GS()||qS()||KS()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},_v=t=>{var e,n;return(n=(e=Zd())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},wv=t=>{const e=_v(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Sv=()=>{var t;return(t=Zd())==null?void 0:t.config},Cv=t=>{var e;return(e=Zd())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lo{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dr(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function eh(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ev(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Ra(JSON.stringify(n)),Ra(JSON.stringify(a)),""].join(".")}const vi={};function YS(){const t={prod:[],emulator:[]};for(const e of Object.keys(vi))vi[e]?t.emulator.push(e):t.prod.push(e);return t}function QS(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let wp=!1;function th(t,e){if(typeof window>"u"||typeof document>"u"||!Dr(window.location.host)||vi[t]===e||vi[t]||wp)return;vi[t]=e;function n(d){return`__firebase__banner__${d}`}const r="__firebase__banner",i=YS().prod.length>0;function a(){const d=document.getElementById(r);d&&d.remove()}function l(d){d.style.display="flex",d.style.background="#7faaf0",d.style.position="fixed",d.style.bottom="5px",d.style.left="5px",d.style.padding=".5em",d.style.borderRadius="5px",d.style.alignItems="center"}function c(d,x){d.setAttribute("width","24"),d.setAttribute("id",x),d.setAttribute("height","24"),d.setAttribute("viewBox","0 0 24 24"),d.setAttribute("fill","none"),d.style.marginLeft="-6px"}function u(){const d=document.createElement("span");return d.style.cursor="pointer",d.style.marginLeft="16px",d.style.fontSize="24px",d.innerHTML=" &times;",d.onclick=()=>{wp=!0,a()},d}function h(d,x){d.setAttribute("id",x),d.innerText="Learn more",d.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",d.setAttribute("target","__blank"),d.style.paddingLeft="5px",d.style.textDecoration="underline"}function f(){const d=QS(r),x=n("text"),w=document.getElementById(x)||document.createElement("span"),p=n("learnmore"),_=document.getElementById(p)||document.createElement("a"),m=n("preprendIcon"),g=document.getElementById(m)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(d.created){const y=d.element;l(y),h(_,p);const v=u();c(g,m),y.append(g,w,_,v),document.body.appendChild(y)}i?(w.innerText="Preview backend disconnected.",g.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(g.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,w.innerText="Preview backend running in this workspace."),w.setAttribute("id",x)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qe(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function nh(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(qe())}function JS(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function kv(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function bv(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function XS(){const t=qe();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function ZS(){return gv.NODE_ADMIN===!0}function jv(){try{return typeof indexedDB=="object"}catch{return!1}}function Iv(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)==null?void 0:i.message)||"")}}catch(n){e(n)}})}function eC(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tC="FirebaseError";class Ut extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=tC,Object.setPrototypeOf(this,Ut.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Lr.prototype.create)}}class Lr{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],a=i?nC(i,r):"Error",l=`${this.serviceName}: ${a} (${s}).`;return new Ut(s,l,r)}}function nC(t,e){return t.replace(rC,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const rC=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vi(t){return JSON.parse(t)}function ke(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nv=function(t){let e={},n={},r={},s="";try{const i=t.split(".");e=Vi(Pa(i[0])||""),n=Vi(Pa(i[1])||""),s=i[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:s}},sC=function(t){const e=Nv(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},iC=function(t){const e=Nv(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yt(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Es(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function Ru(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Aa(t,e,n){const r={};for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=e.call(n,t[s],s,t));return r}function Jn(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],a=e[s];if(Sp(i)&&Sp(a)){if(!Jn(i,a))return!1}else if(i!==a)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Sp(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ls(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function ai(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function li(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oC{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const r=this.W_;if(typeof e=="string")for(let f=0;f<16;f++)r[f]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let f=0;f<16;f++)r[f]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let f=16;f<80;f++){const d=r[f-3]^r[f-8]^r[f-14]^r[f-16];r[f]=(d<<1|d>>>31)&4294967295}let s=this.chain_[0],i=this.chain_[1],a=this.chain_[2],l=this.chain_[3],c=this.chain_[4],u,h;for(let f=0;f<80;f++){f<40?f<20?(u=l^i&(a^l),h=1518500249):(u=i^a^l,h=1859775393):f<60?(u=i&a|l&(i|a),h=2400959708):(u=i^a^l,h=3395469782);const d=(s<<5|s>>>27)+u+c+h+r[f]&4294967295;c=l,l=a,a=(i<<30|i>>>2)&4294967295,i=s,s=d}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+i&4294967295,this.chain_[2]=this.chain_[2]+a&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const r=n-this.blockSize;let s=0;const i=this.buf_;let a=this.inbuf_;for(;s<n;){if(a===0)for(;s<=r;)this.compress_(e,s),s+=this.blockSize;if(typeof e=="string"){for(;s<n;)if(i[a]=e.charCodeAt(s),++a,++s,a===this.blockSize){this.compress_(i),a=0;break}}else for(;s<n;)if(i[a]=e[s],++a,++s,a===this.blockSize){this.compress_(i),a=0;break}}this.inbuf_=a,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let s=this.blockSize-1;s>=56;s--)this.buf_[s]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let s=0;s<5;s++)for(let i=24;i>=0;i-=8)e[r]=this.chain_[s]>>i&255,++r;return e}}function aC(t,e){const n=new lC(t,e);return n.subscribe.bind(n)}class lC{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");cC(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=mc),s.error===void 0&&(s.error=mc),s.complete===void 0&&(s.complete=mc);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function cC(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function mc(){}function Sl(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uC=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);if(s>=55296&&s<=56319){const i=s-55296;r++,T(r<t.length,"Surrogate pair missing trail surrogate.");const a=t.charCodeAt(r)-56320;s=65536+(i<<10)+a}s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):s<65536?(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},Cl=function(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dC=1e3,hC=2,fC=4*60*60*1e3,pC=.5;function Cp(t,e=dC,n=hC){const r=e*Math.pow(n,t),s=Math.round(pC*r*(Math.random()-.5)*2);return Math.min(fC,r+s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function we(t){return t&&t._delegate?t._delegate:t}class wt{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mC{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new lo;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(yC(e))try{this.getOrInitializeService({instanceIdentifier:dr})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=dr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=dr){return this.instances.has(e)}getOptions(e=dr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);r===l&&a.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:gC(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=dr){return this.component?this.component.multipleInstances?e:dr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function gC(t){return t===dr?void 0:t}function yC(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vC{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new mC(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var X;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(X||(X={}));const xC={debug:X.DEBUG,verbose:X.VERBOSE,info:X.INFO,warn:X.WARN,error:X.ERROR,silent:X.SILENT},_C=X.INFO,wC={[X.DEBUG]:"log",[X.VERBOSE]:"log",[X.INFO]:"info",[X.WARN]:"warn",[X.ERROR]:"error"},SC=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=wC[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class El{constructor(e){this.name=e,this._logLevel=_C,this._logHandler=SC,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in X))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?xC[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,X.DEBUG,...e),this._logHandler(this,X.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,X.VERBOSE,...e),this._logHandler(this,X.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,X.INFO,...e),this._logHandler(this,X.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,X.WARN,...e),this._logHandler(this,X.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,X.ERROR,...e),this._logHandler(this,X.ERROR,...e)}}const CC=(t,e)=>e.some(n=>t instanceof n);let Ep,kp;function EC(){return Ep||(Ep=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function kC(){return kp||(kp=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Tv=new WeakMap,Pu=new WeakMap,Rv=new WeakMap,gc=new WeakMap,rh=new WeakMap;function bC(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",a)},i=()=>{n(Hn(t.result)),s()},a=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&Tv.set(n,t)}).catch(()=>{}),rh.set(e,t),e}function jC(t){if(Pu.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",a),t.removeEventListener("abort",a)},i=()=>{n(),s()},a=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",a),t.addEventListener("abort",a)});Pu.set(t,e)}let Au={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Pu.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Rv.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Hn(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function IC(t){Au=t(Au)}function NC(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(yc(this),e,...n);return Rv.set(r,e.sort?e.sort():[e]),Hn(r)}:kC().includes(t)?function(...e){return t.apply(yc(this),e),Hn(Tv.get(this))}:function(...e){return Hn(t.apply(yc(this),e))}}function TC(t){return typeof t=="function"?NC(t):(t instanceof IDBTransaction&&jC(t),CC(t,EC())?new Proxy(t,Au):t)}function Hn(t){if(t instanceof IDBRequest)return bC(t);if(gc.has(t))return gc.get(t);const e=TC(t);return e!==t&&(gc.set(t,e),rh.set(e,t)),e}const yc=t=>rh.get(t);function Pv(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const a=indexedDB.open(t,e),l=Hn(a);return r&&a.addEventListener("upgradeneeded",c=>{r(Hn(a.result),c.oldVersion,c.newVersion,Hn(a.transaction),c)}),n&&a.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),l.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",u=>s(u.oldVersion,u.newVersion,u))}).catch(()=>{}),l}const RC=["get","getKey","getAll","getAllKeys","count"],PC=["put","add","delete","clear"],vc=new Map;function bp(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(vc.get(e))return vc.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=PC.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||RC.includes(n)))return;const i=async function(a,...l){const c=this.transaction(a,s?"readwrite":"readonly");let u=c.store;return r&&(u=u.index(l.shift())),(await Promise.all([u[n](...l),s&&c.done]))[0]};return vc.set(e,i),i}IC(t=>({...t,get:(e,n,r)=>bp(e,n)||t.get(e,n,r),has:(e,n)=>!!bp(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AC{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(OC(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function OC(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Ou="@firebase/app",jp="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gn=new El("@firebase/app"),DC="@firebase/app-compat",LC="@firebase/analytics-compat",MC="@firebase/analytics",FC="@firebase/app-check-compat",UC="@firebase/app-check",BC="@firebase/auth",zC="@firebase/auth-compat",WC="@firebase/database",$C="@firebase/data-connect",VC="@firebase/database-compat",HC="@firebase/functions",GC="@firebase/functions-compat",qC="@firebase/installations",KC="@firebase/installations-compat",YC="@firebase/messaging",QC="@firebase/messaging-compat",JC="@firebase/performance",XC="@firebase/performance-compat",ZC="@firebase/remote-config",eE="@firebase/remote-config-compat",tE="@firebase/storage",nE="@firebase/storage-compat",rE="@firebase/firestore",sE="@firebase/ai",iE="@firebase/firestore-compat",oE="firebase",aE="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Du="[DEFAULT]",lE={[Ou]:"fire-core",[DC]:"fire-core-compat",[MC]:"fire-analytics",[LC]:"fire-analytics-compat",[UC]:"fire-app-check",[FC]:"fire-app-check-compat",[BC]:"fire-auth",[zC]:"fire-auth-compat",[WC]:"fire-rtdb",[$C]:"fire-data-connect",[VC]:"fire-rtdb-compat",[HC]:"fire-fn",[GC]:"fire-fn-compat",[qC]:"fire-iid",[KC]:"fire-iid-compat",[YC]:"fire-fcm",[QC]:"fire-fcm-compat",[JC]:"fire-perf",[XC]:"fire-perf-compat",[ZC]:"fire-rc",[eE]:"fire-rc-compat",[tE]:"fire-gcs",[nE]:"fire-gcs-compat",[rE]:"fire-fst",[iE]:"fire-fst-compat",[sE]:"fire-vertex","fire-js":"fire-js",[oE]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oa=new Map,cE=new Map,Lu=new Map;function Ip(t,e){try{t.container.addComponent(e)}catch(n){gn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ft(t){const e=t.name;if(Lu.has(e))return gn.debug(`There were multiple attempts to register component ${e}.`),!1;Lu.set(e,t);for(const n of Oa.values())Ip(n,t);for(const n of cE.values())Ip(n,t);return!0}function ir(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Je(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uE={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Gn=new Lr("app","Firebase",uE);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dE{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new wt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Gn.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mr=aE;function Av(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:Du,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw Gn.create("bad-app-name",{appName:String(s)});if(n||(n=Sv()),!n)throw Gn.create("no-options");const i=Oa.get(s);if(i){if(Jn(n,i.options)&&Jn(r,i.config))return i;throw Gn.create("duplicate-app",{appName:s})}const a=new vC(s);for(const c of Lu.values())a.addComponent(c);const l=new dE(n,r,a);return Oa.set(s,l),l}function kl(t=Du){const e=Oa.get(t);if(!e&&t===Du&&Sv())return Av();if(!e)throw Gn.create("no-app",{appName:t});return e}function rt(t,e,n){let r=lE[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const a=[`Unable to register library "${r}" with version "${e}":`];s&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&a.push("and"),i&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),gn.warn(a.join(" "));return}Ft(new wt(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hE="firebase-heartbeat-database",fE=1,Hi="firebase-heartbeat-store";let xc=null;function Ov(){return xc||(xc=Pv(hE,fE,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Hi)}catch(n){console.warn(n)}}}}).catch(t=>{throw Gn.create("idb-open",{originalErrorMessage:t.message})})),xc}async function pE(t){try{const n=(await Ov()).transaction(Hi),r=await n.objectStore(Hi).get(Dv(t));return await n.done,r}catch(e){if(e instanceof Ut)gn.warn(e.message);else{const n=Gn.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});gn.warn(n.message)}}}async function Np(t,e){try{const r=(await Ov()).transaction(Hi,"readwrite");await r.objectStore(Hi).put(e,Dv(t)),await r.done}catch(n){if(n instanceof Ut)gn.warn(n.message);else{const r=Gn.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});gn.warn(r.message)}}}function Dv(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mE=1024,gE=30;class yE{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new xE(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Tp();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(a=>a.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>gE){const a=_E(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){gn.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Tp(),{heartbeatsToSend:r,unsentEntries:s}=vE(this._heartbeatsCache.heartbeats),i=Ra(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return gn.warn(n),""}}}function Tp(){return new Date().toISOString().substring(0,10)}function vE(t,e=mE){const n=[];let r=t.slice();for(const s of t){const i=n.find(a=>a.agent===s.agent);if(i){if(i.dates.push(s.date),Rp(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Rp(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class xE{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return jv()?Iv().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await pE(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Np(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Np(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Rp(t){return Ra(JSON.stringify({version:2,heartbeats:t})).length}function _E(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wE(t){Ft(new wt("platform-logger",e=>new AC(e),"PRIVATE")),Ft(new wt("heartbeat",e=>new yE(e),"PRIVATE")),rt(Ou,jp,t),rt(Ou,jp,"esm2020"),rt("fire-js","")}wE("");function Lv(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const SE=Lv,Mv=new Lr("auth","Firebase",Lv());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Da=new El("@firebase/auth");function CE(t,...e){Da.logLevel<=X.WARN&&Da.warn(`Auth (${Mr}): ${t}`,...e)}function ea(t,...e){Da.logLevel<=X.ERROR&&Da.error(`Auth (${Mr}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function St(t,...e){throw ih(t,...e)}function Dt(t,...e){return ih(t,...e)}function sh(t,e,n){const r={...SE(),[e]:n};return new Lr("auth","Firebase",r).create(e,{appName:t.name})}function cn(t){return sh(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function EE(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&St(t,"argument-error"),sh(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function ih(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return Mv.create(t,...e)}function D(t,e,...n){if(!t)throw ih(e,...n)}function sn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw ea(e),new Error(e)}function yn(t,e){t||sn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mu(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function kE(){return Pp()==="http:"||Pp()==="https:"}function Pp(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bE(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(kE()||kv()||"connection"in navigator)?navigator.onLine:!0}function jE(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class co{constructor(e,n){this.shortDelay=e,this.longDelay=n,yn(n>e,"Short delay should be less than long delay!"),this.isMobile=nh()||bv()}get(){return bE()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oh(t,e){yn(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fv{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;sn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;sn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;sn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IE={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NE=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],TE=new co(3e4,6e4);function or(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function ar(t,e,n,r,s={}){return Uv(t,s,async()=>{let i={},a={};r&&(e==="GET"?a=r:i={body:JSON.stringify(r)});const l=Ls({key:t.config.apiKey,...a}).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const u={method:e,headers:c,...i};return JS()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&Dr(t.emulatorConfig.host)&&(u.credentials="include"),Fv.fetch()(await Bv(t,t.config.apiHost,n,l),u)})}async function Uv(t,e,n){t._canInitEmulator=!1;const r={...IE,...e};try{const s=new PE(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const a=await i.json();if("needConfirmation"in a)throw Fo(t,"account-exists-with-different-credential",a);if(i.ok&&!("errorMessage"in a))return a;{const l=i.ok?a.errorMessage:a.error.message,[c,u]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Fo(t,"credential-already-in-use",a);if(c==="EMAIL_EXISTS")throw Fo(t,"email-already-in-use",a);if(c==="USER_DISABLED")throw Fo(t,"user-disabled",a);const h=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw sh(t,h,u);St(t,h)}}catch(s){if(s instanceof Ut)throw s;St(t,"network-request-failed",{message:String(s)})}}async function uo(t,e,n,r,s={}){const i=await ar(t,e,n,r,s);return"mfaPendingCredential"in i&&St(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function Bv(t,e,n,r){const s=`${e}${n}?${r}`,i=t,a=i.config.emulator?oh(t.config,s):`${t.config.apiScheme}://${s}`;return NE.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(a).toString():a}function RE(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class PE{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Dt(this.auth,"network-request-failed")),TE.get())})}}function Fo(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=Dt(t,e,r);return s.customData._tokenResponse=n,s}function Ap(t){return t!==void 0&&t.enterprise!==void 0}class AE{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return RE(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function OE(t,e){return ar(t,"GET","/v2/recaptchaConfig",or(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DE(t,e){return ar(t,"POST","/v1/accounts:delete",e)}async function La(t,e){return ar(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xi(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function LE(t,e=!1){const n=we(t),r=await n.getIdToken(e),s=ah(r);D(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,a=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:xi(_c(s.auth_time)),issuedAtTime:xi(_c(s.iat)),expirationTime:xi(_c(s.exp)),signInProvider:a||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function _c(t){return Number(t)*1e3}function ah(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return ea("JWT malformed, contained fewer than 3 sections"),null;try{const s=Pa(n);return s?JSON.parse(s):(ea("Failed to decode base64 JWT payload"),null)}catch(s){return ea("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function Op(t){const e=ah(t);return D(e,"internal-error"),D(typeof e.exp<"u","internal-error"),D(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gi(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Ut&&ME(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function ME({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FE{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fu{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=xi(this.lastLoginAt),this.creationTime=xi(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ma(t){var f;const e=t.auth,n=await t.getIdToken(),r=await Gi(t,La(e,{idToken:n}));D(r==null?void 0:r.users.length,e,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const i=(f=s.providerUserInfo)!=null&&f.length?zv(s.providerUserInfo):[],a=BE(t.providerData,i),l=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),u=l?c:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Fu(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(t,h)}async function UE(t){const e=we(t);await Ma(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function BE(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function zv(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zE(t,e){const n=await Uv(t,{},async()=>{const r=Ls({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,a=await Bv(t,s,"/v1/token",`key=${i}`),l=await t._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:l,body:r};return t.emulatorConfig&&Dr(t.emulatorConfig.host)&&(c.credentials="include"),Fv.fetch()(a,c)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function WE(t,e){return ar(t,"POST","/v2/accounts:revokeToken",or(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class us{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){D(e.idToken,"internal-error"),D(typeof e.idToken<"u","internal-error"),D(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Op(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){D(e.length!==0,"internal-error");const n=Op(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(D(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await zE(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,a=new us;return r&&(D(typeof r=="string","internal-error",{appName:e}),a.refreshToken=r),s&&(D(typeof s=="string","internal-error",{appName:e}),a.accessToken=s),i&&(D(typeof i=="number","internal-error",{appName:e}),a.expirationTime=i),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new us,this.toJSON())}_performRefresh(){return sn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function En(t,e){D(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Tt{constructor({uid:e,auth:n,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new FE(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Fu(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Gi(this,this.stsTokenManager.getToken(this.auth,e));return D(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return LE(this,e)}reload(){return UE(this)}_assign(e){this!==e&&(D(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Tt({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){D(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Ma(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Je(this.auth.app))return Promise.reject(cn(this.auth));const e=await this.getIdToken();return await Gi(this,DE(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,s=n.email??void 0,i=n.phoneNumber??void 0,a=n.photoURL??void 0,l=n.tenantId??void 0,c=n._redirectEventId??void 0,u=n.createdAt??void 0,h=n.lastLoginAt??void 0,{uid:f,emailVerified:d,isAnonymous:x,providerData:w,stsTokenManager:p}=n;D(f&&p,e,"internal-error");const _=us.fromJSON(this.name,p);D(typeof f=="string",e,"internal-error"),En(r,e.name),En(s,e.name),D(typeof d=="boolean",e,"internal-error"),D(typeof x=="boolean",e,"internal-error"),En(i,e.name),En(a,e.name),En(l,e.name),En(c,e.name),En(u,e.name),En(h,e.name);const m=new Tt({uid:f,auth:e,email:s,emailVerified:d,displayName:r,isAnonymous:x,photoURL:a,phoneNumber:i,tenantId:l,stsTokenManager:_,createdAt:u,lastLoginAt:h});return w&&Array.isArray(w)&&(m.providerData=w.map(g=>({...g}))),c&&(m._redirectEventId=c),m}static async _fromIdTokenResponse(e,n,r=!1){const s=new us;s.updateFromServerResponse(n);const i=new Tt({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Ma(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];D(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?zv(s.providerUserInfo):[],a=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),l=new us;l.updateFromIdToken(r);const c=new Tt({uid:s.localId,auth:e,stsTokenManager:l,isAnonymous:a}),u={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new Fu(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(c,u),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dp=new Map;function on(t){yn(t instanceof Function,"Expected a class definition");let e=Dp.get(t);return e?(yn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Dp.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wv{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Wv.type="NONE";const Lp=Wv;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ta(t,e,n){return`firebase:${t}:${e}:${n}`}class ds{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=ta(this.userKey,s.apiKey,i),this.fullPersistenceKey=ta("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await La(this.auth,{idToken:e}).catch(()=>{});return n?Tt._fromGetAccountInfoResponse(this.auth,n,e):null}return Tt._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new ds(on(Lp),e,r);const s=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let i=s[0]||on(Lp);const a=ta(r,e.config.apiKey,e.name);let l=null;for(const u of n)try{const h=await u._get(a);if(h){let f;if(typeof h=="string"){const d=await La(e,{idToken:h}).catch(()=>{});if(!d)break;f=await Tt._fromGetAccountInfoResponse(e,d,h)}else f=Tt._fromJSON(e,h);u!==i&&(l=f),i=u;break}}catch{}const c=s.filter(u=>u._shouldAllowMigration);return!i._shouldAllowMigration||!c.length?new ds(i,e,r):(i=c[0],l&&await i._set(a,l.toJSON()),await Promise.all(n.map(async u=>{if(u!==i)try{await u._remove(a)}catch{}})),new ds(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mp(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Gv(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if($v(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Kv(e))return"Blackberry";if(Yv(e))return"Webos";if(Vv(e))return"Safari";if((e.includes("chrome/")||Hv(e))&&!e.includes("edge/"))return"Chrome";if(qv(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function $v(t=qe()){return/firefox\//i.test(t)}function Vv(t=qe()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Hv(t=qe()){return/crios\//i.test(t)}function Gv(t=qe()){return/iemobile/i.test(t)}function qv(t=qe()){return/android/i.test(t)}function Kv(t=qe()){return/blackberry/i.test(t)}function Yv(t=qe()){return/webos/i.test(t)}function lh(t=qe()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function $E(t=qe()){var e;return lh(t)&&!!((e=window.navigator)!=null&&e.standalone)}function VE(){return XS()&&document.documentMode===10}function Qv(t=qe()){return lh(t)||qv(t)||Yv(t)||Kv(t)||/windows phone/i.test(t)||Gv(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jv(t,e=[]){let n;switch(t){case"Browser":n=Mp(qe());break;case"Worker":n=`${Mp(qe())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Mr}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HE{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((a,l)=>{try{const c=e(i);a(c)}catch(c){l(c)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GE(t,e={}){return ar(t,"GET","/v2/passwordPolicy",or(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qE=6;class KE{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??qE,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YE{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Fp(this),this.idTokenSubscription=new Fp(this),this.beforeStateQueue=new HE(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Mv,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=on(n)),this._initializationPromise=this.queue(async()=>{var r,s,i;if(!this._deleted&&(this.persistenceManager=await ds.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)==null?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await La(this,{idToken:e}),r=await Tt._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var i;if(Je(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(l,l))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(i=this.redirectUser)==null?void 0:i._redirectEventId,l=r==null?void 0:r._redirectEventId,c=await this.tryRedirectSignIn(e);(!a||a===l)&&(c!=null&&c.user)&&(r=c.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(a){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return D(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Ma(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=jE()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Je(this.app))return Promise.reject(cn(this));const n=e?we(e):null;return n&&D(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&D(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Je(this.app)?Promise.reject(cn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Je(this.app)?Promise.reject(cn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(on(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await GE(this),n=new KE(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Lr("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await WE(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&on(e)||this._popupRedirectResolver;D(n,this,"argument-error"),this.redirectPersistenceManager=await ds.create(this,[on(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let a=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(D(l,this,"internal-error"),l.then(()=>{a||i(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,s);return()=>{a=!0,c()}}else{const c=e.addObserver(n);return()=>{a=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return D(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Jv(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(Je(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&CE(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function lr(t){return we(t)}class Fp{constructor(e){this.auth=e,this.observer=null,this.addObserver=aC(n=>this.observer=n)}get next(){return D(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bl={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function QE(t){bl=t}function Xv(t){return bl.loadJS(t)}function JE(){return bl.recaptchaEnterpriseScript}function XE(){return bl.gapiScript}function ZE(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class ek{constructor(){this.enterprise=new tk}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class tk{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const nk="recaptcha-enterprise",Zv="NO_RECAPTCHA";class rk{constructor(e){this.type=nk,this.auth=lr(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(a,l)=>{OE(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const u=new AE(c);return i.tenantId==null?i._agentRecaptchaConfig=u:i._tenantRecaptchaConfigs[i.tenantId]=u,a(u.siteKey)}}).catch(c=>{l(c)})})}function s(i,a,l){const c=window.grecaptcha;Ap(c)?c.enterprise.ready(()=>{c.enterprise.execute(i,{action:e}).then(u=>{a(u)}).catch(()=>{a(Zv)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new ek().execute("siteKey",{action:"verify"}):new Promise((i,a)=>{r(this.auth).then(l=>{if(!n&&Ap(window.grecaptcha))s(l,i,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let c=JE();c.length!==0&&(c+=l),Xv(c).then(()=>{s(l,i,a)}).catch(u=>{a(u)})}}).catch(l=>{a(l)})})}}async function Up(t,e,n,r=!1,s=!1){const i=new rk(t);let a;if(s)a=Zv;else try{a=await i.verify(n)}catch{a=await i.verify(n,!0)}const l={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in l){const c=l.phoneEnrollmentInfo.phoneNumber,u=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:u,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const c=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return r?Object.assign(l,{captchaResp:a}):Object.assign(l,{captchaResponse:a}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function Uu(t,e,n,r,s){var i;if((i=t._getRecaptchaConfig())!=null&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await Up(t,e,n,n==="getOobCode");return r(t,a)}else return r(t,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await Up(t,e,n,n==="getOobCode");return r(t,l)}else return Promise.reject(a)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sk(t,e){const n=ir(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(Jn(i,e??{}))return s;St(s,"already-initialized")}return n.initialize({options:e})}function ik(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(on);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function ok(t,e,n){const r=lr(t);D(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=ex(e),{host:a,port:l}=ak(e),c=l===null?"":`:${l}`,u={url:`${i}//${a}${c}/`},h=Object.freeze({host:a,port:l,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){D(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),D(Jn(u,r.config.emulator)&&Jn(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=u,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,Dr(a)?(eh(`${i}//${a}${c}`),th("Auth",!0)):lk()}function ex(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function ak(t){const e=ex(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:Bp(r.substr(i.length+1))}}else{const[i,a]=r.split(":");return{host:i,port:Bp(a)}}}function Bp(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function lk(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ch{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return sn("not implemented")}_getIdTokenResponse(e){return sn("not implemented")}_linkToIdToken(e,n){return sn("not implemented")}_getReauthenticationResolver(e){return sn("not implemented")}}async function ck(t,e){return ar(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uk(t,e){return uo(t,"POST","/v1/accounts:signInWithPassword",or(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dk(t,e){return uo(t,"POST","/v1/accounts:signInWithEmailLink",or(t,e))}async function hk(t,e){return uo(t,"POST","/v1/accounts:signInWithEmailLink",or(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qi extends ch{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new qi(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new qi(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Uu(e,n,"signInWithPassword",uk);case"emailLink":return dk(e,{email:this._email,oobCode:this._password});default:St(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Uu(e,r,"signUpPassword",ck);case"emailLink":return hk(e,{idToken:n,email:this._email,oobCode:this._password});default:St(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hs(t,e){return uo(t,"POST","/v1/accounts:signInWithIdp",or(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fk="http://localhost";class br extends ch{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new br(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):St("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...i}=n;if(!r||!s)return null;const a=new br(r,s);return a.idToken=i.idToken||void 0,a.accessToken=i.accessToken||void 0,a.secret=i.secret,a.nonce=i.nonce,a.pendingToken=i.pendingToken||null,a}_getIdTokenResponse(e){const n=this.buildRequest();return hs(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,hs(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,hs(e,n)}buildRequest(){const e={requestUri:fk,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Ls(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pk(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function mk(t){const e=ai(li(t)).link,n=e?ai(li(e)).deep_link_id:null,r=ai(li(t)).deep_link_id;return(r?ai(li(r)).link:null)||r||n||e||t}class uh{constructor(e){const n=ai(li(e)),r=n.apiKey??null,s=n.oobCode??null,i=pk(n.mode??null);D(r&&s&&i,"argument-error"),this.apiKey=r,this.operation=i,this.code=s,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=mk(e);try{return new uh(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ms{constructor(){this.providerId=Ms.PROVIDER_ID}static credential(e,n){return qi._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=uh.parseLink(n);return D(r,"argument-error"),qi._fromEmailAndCode(e,r.code,r.tenantId)}}Ms.PROVIDER_ID="password";Ms.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ms.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dh{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ho extends dh{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nn extends ho{constructor(){super("facebook.com")}static credential(e){return br._fromParams({providerId:Nn.PROVIDER_ID,signInMethod:Nn.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Nn.credentialFromTaggedObject(e)}static credentialFromError(e){return Nn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Nn.credential(e.oauthAccessToken)}catch{return null}}}Nn.FACEBOOK_SIGN_IN_METHOD="facebook.com";Nn.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn extends ho{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return br._fromParams({providerId:tn.PROVIDER_ID,signInMethod:tn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return tn.credentialFromTaggedObject(e)}static credentialFromError(e){return tn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return tn.credential(n,r)}catch{return null}}}tn.GOOGLE_SIGN_IN_METHOD="google.com";tn.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tn extends ho{constructor(){super("github.com")}static credential(e){return br._fromParams({providerId:Tn.PROVIDER_ID,signInMethod:Tn.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Tn.credentialFromTaggedObject(e)}static credentialFromError(e){return Tn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Tn.credential(e.oauthAccessToken)}catch{return null}}}Tn.GITHUB_SIGN_IN_METHOD="github.com";Tn.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rn extends ho{constructor(){super("twitter.com")}static credential(e,n){return br._fromParams({providerId:Rn.PROVIDER_ID,signInMethod:Rn.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Rn.credentialFromTaggedObject(e)}static credentialFromError(e){return Rn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Rn.credential(n,r)}catch{return null}}}Rn.TWITTER_SIGN_IN_METHOD="twitter.com";Rn.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gk(t,e){return uo(t,"POST","/v1/accounts:signUp",or(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await Tt._fromIdTokenResponse(e,r,s),a=zp(r);return new jr({user:i,providerId:a,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=zp(r);return new jr({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function zp(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fa extends Ut{constructor(e,n,r,s){super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Fa.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Fa(e,n,r,s)}}function tx(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Fa._fromErrorAndOperation(t,i,e,r):i})}async function yk(t,e,n=!1){const r=await Gi(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return jr._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vk(t,e,n=!1){const{auth:r}=t;if(Je(r.app))return Promise.reject(cn(r));const s="reauthenticate";try{const i=await Gi(t,tx(r,s,e,t),n);D(i.idToken,r,"internal-error");const a=ah(i.idToken);D(a,r,"internal-error");const{sub:l}=a;return D(t.uid===l,r,"user-mismatch"),jr._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&St(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nx(t,e,n=!1){if(Je(t.app))return Promise.reject(cn(t));const r="signIn",s=await tx(t,r,e),i=await jr._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function xk(t,e){return nx(lr(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rx(t){const e=lr(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function _k(t,e,n){if(Je(t.app))return Promise.reject(cn(t));const r=lr(t),a=await Uu(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",gk).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&rx(t),c}),l=await jr._fromIdTokenResponse(r,"signIn",a);return await r._updateCurrentUser(l.user),l}function wk(t,e,n){return Je(t.app)?Promise.reject(cn(t)):xk(we(t),Ms.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&rx(t),r})}function Sk(t,e,n,r){return we(t).onIdTokenChanged(e,n,r)}function Ck(t,e,n){return we(t).beforeAuthStateChanged(e,n)}function Ek(t,e,n,r){return we(t).onAuthStateChanged(e,n,r)}function kk(t){return we(t).signOut()}const Ua="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sx{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Ua,"1"),this.storage.removeItem(Ua),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bk=1e3,jk=10;class ix extends sx{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Qv(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((a,l,c)=>{this.notifyListeners(a,c)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const a=this.storage.getItem(r);!n&&this.localCache[r]===a||this.notifyListeners(r,a)},i=this.storage.getItem(r);VE()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,jk):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},bk)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}ix.type="LOCAL";const Ik=ix;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ox extends sx{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}ox.type="SESSION";const ax=ox;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nk(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jl{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new jl(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,a=this.handlersMap[s];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const l=Array.from(a).map(async u=>u(n.origin,i)),c=await Nk(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}jl.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hh(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tk{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,a;return new Promise((l,c)=>{const u=hh("",20);s.port1.start();const h=setTimeout(()=>{c(new Error("unsupported_event"))},r);a={messageChannel:s,onMessage(f){const d=f;if(d.data.eventId===u)switch(d.data.status){case"ack":clearTimeout(h),i=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),l(d.data.response);break;default:clearTimeout(h),clearTimeout(i),c(new Error("invalid_response"));break}}},this.handlers.add(a),s.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[s.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gt(){return window}function Rk(t){Gt().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lx(){return typeof Gt().WorkerGlobalScope<"u"&&typeof Gt().importScripts=="function"}async function Pk(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Ak(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function Ok(){return lx()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cx="firebaseLocalStorageDb",Dk=1,Ba="firebaseLocalStorage",ux="fbase_key";class fo{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Il(t,e){return t.transaction([Ba],e?"readwrite":"readonly").objectStore(Ba)}function Lk(){const t=indexedDB.deleteDatabase(cx);return new fo(t).toPromise()}function Bu(){const t=indexedDB.open(cx,Dk);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Ba,{keyPath:ux})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Ba)?e(r):(r.close(),await Lk(),e(await Bu()))})})}async function Wp(t,e,n){const r=Il(t,!0).put({[ux]:e,value:n});return new fo(r).toPromise()}async function Mk(t,e){const n=Il(t,!1).get(e),r=await new fo(n).toPromise();return r===void 0?null:r.value}function $p(t,e){const n=Il(t,!0).delete(e);return new fo(n).toPromise()}const Fk=800,Uk=3;class dx{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Bu(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>Uk)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return lx()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=jl._getInstance(Ok()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await Pk(),!this.activeServiceWorker)return;this.sender=new Tk(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Ak()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Bu();return await Wp(e,Ua,"1"),await $p(e,Ua),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Wp(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>Mk(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>$p(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Il(s,!1).getAll();return new fo(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Fk)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}dx.type="LOCAL";const Bk=dx;new co(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hx(t,e){return e?on(e):(D(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fh extends ch{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return hs(e,this._buildIdpRequest())}_linkToIdToken(e,n){return hs(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return hs(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function zk(t){return nx(t.auth,new fh(t),t.bypassAuthState)}function Wk(t){const{auth:e,user:n}=t;return D(n,e,"internal-error"),vk(n,new fh(t),t.bypassAuthState)}async function $k(t){const{auth:e,user:n}=t;return D(n,e,"internal-error"),yk(n,new fh(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fx{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:a,type:l}=e;if(a){this.reject(a);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return zk;case"linkViaPopup":case"linkViaRedirect":return $k;case"reauthViaPopup":case"reauthViaRedirect":return Wk;default:St(this.auth,"internal-error")}}resolve(e){yn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){yn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vk=new co(2e3,1e4);async function Hk(t,e,n){if(Je(t.app))return Promise.reject(Dt(t,"operation-not-supported-in-this-environment"));const r=lr(t);EE(t,e,dh);const s=hx(r,n);return new gr(r,"signInViaPopup",e,s).executeNotNull()}class gr extends fx{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,gr.currentPopupAction&&gr.currentPopupAction.cancel(),gr.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return D(e,this.auth,"internal-error"),e}async onExecution(){yn(this.filter.length===1,"Popup operations only handle one event");const e=hh();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Dt(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Dt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,gr.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Dt(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Vk.get())};e()}}gr.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gk="pendingRedirect",na=new Map;class qk extends fx{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=na.get(this.auth._key());if(!e){try{const r=await Kk(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}na.set(this.auth._key(),e)}return this.bypassAuthState||na.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Kk(t,e){const n=Jk(e),r=Qk(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function Yk(t,e){na.set(t._key(),e)}function Qk(t){return on(t._redirectPersistence)}function Jk(t){return ta(Gk,t.config.apiKey,t.name)}async function Xk(t,e,n=!1){if(Je(t.app))return Promise.reject(cn(t));const r=lr(t),s=hx(r,e),a=await new qk(r,s,n).execute();return a&&!n&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zk=10*60*1e3;class eb{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!tb(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!px(e)){const s=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(Dt(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Zk&&this.cachedEventUids.clear(),this.cachedEventUids.has(Vp(e))}saveEventToCache(e){this.cachedEventUids.add(Vp(e)),this.lastProcessedEventTime=Date.now()}}function Vp(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function px({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function tb(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return px(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nb(t,e={}){return ar(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rb=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,sb=/^https?/;async function ib(t){if(t.config.emulator)return;const{authorizedDomains:e}=await nb(t);for(const n of e)try{if(ob(n))return}catch{}St(t,"unauthorized-domain")}function ob(t){const e=Mu(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===r}if(!sb.test(n))return!1;if(rb.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ab=new co(3e4,6e4);function Hp(){const t=Gt().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function lb(t){return new Promise((e,n)=>{var s,i,a;function r(){Hp(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Hp(),n(Dt(t,"network-request-failed"))},timeout:ab.get()})}if((i=(s=Gt().gapi)==null?void 0:s.iframes)!=null&&i.Iframe)e(gapi.iframes.getContext());else if((a=Gt().gapi)!=null&&a.load)r();else{const l=ZE("iframefcb");return Gt()[l]=()=>{gapi.load?r():n(Dt(t,"network-request-failed"))},Xv(`${XE()}?onload=${l}`).catch(c=>n(c))}}).catch(e=>{throw ra=null,e})}let ra=null;function cb(t){return ra=ra||lb(t),ra}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ub=new co(5e3,15e3),db="__/auth/iframe",hb="emulator/auth/iframe",fb={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},pb=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function mb(t){const e=t.config;D(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?oh(e,hb):`https://${t.config.authDomain}/${db}`,r={apiKey:e.apiKey,appName:t.name,v:Mr},s=pb.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${Ls(r).slice(1)}`}async function gb(t){const e=await cb(t),n=Gt().gapi;return D(n,t,"internal-error"),e.open({where:document.body,url:mb(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:fb,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const a=Dt(t,"network-request-failed"),l=Gt().setTimeout(()=>{i(a)},ub.get());function c(){Gt().clearTimeout(l),s(r)}r.ping(c).then(c,()=>{i(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yb={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},vb=500,xb=600,_b="_blank",wb="http://localhost";class Gp{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Sb(t,e,n,r=vb,s=xb){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const c={...yb,width:r.toString(),height:s.toString(),top:i,left:a},u=qe().toLowerCase();n&&(l=Hv(u)?_b:n),$v(u)&&(e=e||wb,c.scrollbars="yes");const h=Object.entries(c).reduce((d,[x,w])=>`${d}${x}=${w},`,"");if($E(u)&&l!=="_self")return Cb(e||"",l),new Gp(null);const f=window.open(e||"",l,h);D(f,t,"popup-blocked");try{f.focus()}catch{}return new Gp(f)}function Cb(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eb="__/auth/handler",kb="emulator/auth/handler",bb=encodeURIComponent("fac");async function qp(t,e,n,r,s,i){D(t.config.authDomain,t,"auth-domain-config-required"),D(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Mr,eventId:s};if(e instanceof dh){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",Ru(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,f]of Object.entries({}))a[h]=f}if(e instanceof ho){const h=e.getScopes().filter(f=>f!=="");h.length>0&&(a.scopes=h.join(","))}t.tenantId&&(a.tid=t.tenantId);const l=a;for(const h of Object.keys(l))l[h]===void 0&&delete l[h];const c=await t._getAppCheckToken(),u=c?`#${bb}=${encodeURIComponent(c)}`:"";return`${jb(t)}?${Ls(l).slice(1)}${u}`}function jb({config:t}){return t.emulator?oh(t,kb):`https://${t.authDomain}/${Eb}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wc="webStorageSupport";class Ib{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ax,this._completeRedirectFn=Xk,this._overrideRedirectResult=Yk}async _openPopup(e,n,r,s){var a;yn((a=this.eventManagers[e._key()])==null?void 0:a.manager,"_initialize() not called before _openPopup()");const i=await qp(e,n,r,Mu(),s);return Sb(e,i,hh())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await qp(e,n,r,Mu(),s);return Rk(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(yn(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await gb(e),r=new eb(e);return n.register("authEvent",s=>(D(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(wc,{type:wc},s=>{var a;const i=(a=s==null?void 0:s[0])==null?void 0:a[wc];i!==void 0&&n(!!i),St(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=ib(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Qv()||Vv()||lh()}}const Nb=Ib;var Kp="@firebase/auth",Yp="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tb{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){D(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rb(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Pb(t){Ft(new wt("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:a,authDomain:l}=r.options;D(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:a,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Jv(t)},u=new YE(r,s,i,c);return ik(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Ft(new wt("auth-internal",e=>{const n=lr(e.getProvider("auth").getImmediate());return(r=>new Tb(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),rt(Kp,Yp,Rb(t)),rt(Kp,Yp,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ab=5*60,Ob=Cv("authIdTokenMaxAge")||Ab;let Qp=null;const Db=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>Ob)return;const s=n==null?void 0:n.token;Qp!==s&&(Qp=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function Lb(t=kl()){const e=ir(t,"auth");if(e.isInitialized())return e.getImmediate();const n=sk(t,{popupRedirectResolver:Nb,persistence:[Bk,Ik,ax]}),r=Cv("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const a=Db(i.toString());Ck(n,a,()=>a(n.currentUser)),Sk(n,l=>a(l))}}const s=_v("auth");return s&&ok(n,`http://${s}`),n}function Mb(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}QE({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=Dt("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",Mb().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Pb("Browser");var Jp={};const Xp="@firebase/database",Zp="1.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mx="";function Fb(t){mx=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ub{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),ke(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:Vi(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bb{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return Yt(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gx=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new Ub(e)}}catch{}return new Bb},yr=gx("localStorage"),zb=gx("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fs=new El("@firebase/database"),Wb=function(){let t=1;return function(){return t++}}(),yx=function(t){const e=uC(t),n=new oC;n.update(e);const r=n.digest();return Xd.encodeByteArray(r)},po=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=po.apply(null,r):typeof r=="object"?e+=ke(r):e+=r,e+=" "}return e};let _i=null,em=!0;const $b=function(t,e){T(!0,"Can't turn on custom loggers persistently."),fs.logLevel=X.VERBOSE,_i=fs.log.bind(fs)},Ae=function(...t){if(em===!0&&(em=!1,_i===null&&zb.get("logging_enabled")===!0&&$b()),_i){const e=po.apply(null,t);_i(e)}},mo=function(t){return function(...e){Ae(t,...e)}},zu=function(...t){const e="FIREBASE INTERNAL ERROR: "+po(...t);fs.error(e)},vn=function(...t){const e=`FIREBASE FATAL ERROR: ${po(...t)}`;throw fs.error(e),new Error(e)},He=function(...t){const e="FIREBASE WARNING: "+po(...t);fs.warn(e)},Vb=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&He("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},ph=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},Hb=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},ks="[MIN_NAME]",Ir="[MAX_NAME]",Fr=function(t,e){if(t===e)return 0;if(t===ks||e===Ir)return-1;if(e===ks||t===Ir)return 1;{const n=tm(t),r=tm(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},Gb=function(t,e){return t===e?0:t<e?-1:1},Js=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+ke(e))},mh=function(t){if(typeof t!="object"||t===null)return ke(t);const e=[];for(const r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=ke(e[r]),n+=":",n+=mh(t[e[r]]);return n+="}",n},vx=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let s=0;s<n;s+=e)s+e>n?r.push(t.substring(s,n)):r.push(t.substring(s,s+e));return r};function Me(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const xx=function(t){T(!ph(t),"Invalid JSON number");const e=11,n=52,r=(1<<e-1)-1;let s,i,a,l,c;t===0?(i=0,a=0,s=1/t===-1/0?1:0):(s=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(l=Math.min(Math.floor(Math.log(t)/Math.LN2),r),i=l+r,a=Math.round(t*Math.pow(2,n-l)-Math.pow(2,n))):(i=0,a=Math.round(t/Math.pow(2,1-r-n))));const u=[];for(c=n;c;c-=1)u.push(a%2?1:0),a=Math.floor(a/2);for(c=e;c;c-=1)u.push(i%2?1:0),i=Math.floor(i/2);u.push(s?1:0),u.reverse();const h=u.join("");let f="";for(c=0;c<64;c+=8){let d=parseInt(h.substr(c,8),2).toString(16);d.length===1&&(d="0"+d),f=f+d}return f.toLowerCase()},qb=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},Kb=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function Yb(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}const Qb=new RegExp("^-?(0*)\\d{1,10}$"),Jb=-2147483648,Xb=2147483647,tm=function(t){if(Qb.test(t)){const e=Number(t);if(e>=Jb&&e<=Xb)return e}return null},Fs=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw He("Exception was thrown by user callback.",n),e},Math.floor(0))}},Zb=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},wi=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ej{constructor(e,n){this.appCheckProvider=n,this.appName=e.name,Je(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(r=>this.appCheck=r)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)==null||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){He(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tj{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(s=>this.auth_=s)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(Ae("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',He(e)}}class sa{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}sa.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gh="5",_x="v",wx="s",Sx="r",Cx="f",Ex=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,kx="ls",bx="p",Wu="ac",jx="websocket",Ix="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nx{constructor(e,n,r,s,i=!1,a="",l=!1,c=!1,u=null){this.secure=n,this.namespace=r,this.webSocketOnly=s,this.nodeAdmin=i,this.persistenceKey=a,this.includeNamespaceInQueryParams=l,this.isUsingEmulator=c,this.emulatorOptions=u,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=yr.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&yr.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function nj(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function Tx(t,e,n){T(typeof e=="string","typeof type must == string"),T(typeof n=="object","typeof params must == object");let r;if(e===jx)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===Ix)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);nj(t)&&(n.ns=t.namespace);const s=[];return Me(n,(i,a)=>{s.push(i+"="+a)}),r+s.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rj{constructor(){this.counters_={}}incrementCounter(e,n=1){Yt(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return $S(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sc={},Cc={};function yh(t){const e=t.toString();return Sc[e]||(Sc[e]=new rj),Sc[e]}function sj(t,e){const n=t.toString();return Cc[n]||(Cc[n]=e()),Cc[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ij{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let s=0;s<r.length;++s)r[s]&&Fs(()=>{this.onMessage_(r[s])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nm="start",oj="close",aj="pLPCommand",lj="pRTLPCB",Rx="id",Px="pw",Ax="ser",cj="cb",uj="seg",dj="ts",hj="d",fj="dframe",Ox=1870,Dx=30,pj=Ox-Dx,mj=25e3,gj=3e4;class rs{constructor(e,n,r,s,i,a,l){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=s,this.authToken=i,this.transportSessionId=a,this.lastSessionId=l,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=mo(e),this.stats_=yh(n),this.urlFn=c=>(this.appCheckToken&&(c[Wu]=this.appCheckToken),Tx(n,Ix,c))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new ij(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(gj)),Hb(()=>{if(this.isClosed_)return;this.scriptTagHolder=new vh((...i)=>{const[a,l,c,u,h]=i;if(this.incrementIncomingBytes_(i),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,a===nm)this.id=l,this.password=c;else if(a===oj)l?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(l,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+a)},(...i)=>{const[a,l]=i;this.incrementIncomingBytes_(i),this.myPacketOrderer.handleResponse(a,l)},()=>{this.onClosed_()},this.urlFn);const r={};r[nm]="t",r[Ax]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[cj]=this.scriptTagHolder.uniqueCallbackIdentifier),r[_x]=gh,this.transportSessionId&&(r[wx]=this.transportSessionId),this.lastSessionId&&(r[kx]=this.lastSessionId),this.applicationId&&(r[bx]=this.applicationId),this.appCheckToken&&(r[Wu]=this.appCheckToken),typeof location<"u"&&location.hostname&&Ex.test(location.hostname)&&(r[Sx]=Cx);const s=this.urlFn(r);this.log_("Connecting via long-poll to "+s),this.scriptTagHolder.addTag(s,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){rs.forceAllow_=!0}static forceDisallow(){rs.forceDisallow_=!0}static isAvailable(){return rs.forceAllow_?!0:!rs.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!qb()&&!Kb()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=ke(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=vv(n),s=vx(r,pj);for(let i=0;i<s.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,s.length,s[i]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const r={};r[fj]="t",r[Rx]=e,r[Px]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=ke(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class vh{constructor(e,n,r,s){this.onDisconnect=r,this.urlFn=s,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=Wb(),window[aj+this.uniqueCallbackIdentifier]=e,window[lj+this.uniqueCallbackIdentifier]=n,this.myIFrame=vh.createIFrame_();let i="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(i='<script>document.domain="'+document.domain+'";<\/script>');const a="<html><body>"+i+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(a),this.myIFrame.doc.close()}catch(l){Ae("frame writing exception"),l.stack&&Ae(l.stack),Ae(l)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Ae("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[Rx]=this.myID,e[Px]=this.myPW,e[Ax]=this.currentSerial;let n=this.urlFn(e),r="",s=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+Dx+r.length<=Ox;){const a=this.pendingSegs.shift();r=r+"&"+uj+s+"="+a.seg+"&"+dj+s+"="+a.ts+"&"+hj+s+"="+a.d,s++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},s=setTimeout(r,Math.floor(mj)),i=()=>{clearTimeout(s),r()};this.addTag(e,i)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const s=r.readyState;(!s||s==="loaded"||s==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{Ae("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yj=16384,vj=45e3;let za=null;typeof MozWebSocket<"u"?za=MozWebSocket:typeof WebSocket<"u"&&(za=WebSocket);class It{constructor(e,n,r,s,i,a,l){this.connId=e,this.applicationId=r,this.appCheckToken=s,this.authToken=i,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=mo(this.connId),this.stats_=yh(n),this.connURL=It.connectionURL_(n,a,l,s,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,r,s,i){const a={};return a[_x]=gh,typeof location<"u"&&location.hostname&&Ex.test(location.hostname)&&(a[Sx]=Cx),n&&(a[wx]=n),r&&(a[kx]=r),s&&(a[Wu]=s),i&&(a[bx]=i),Tx(e,jx,a)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,yr.set("previous_websocket_failure",!0);try{let r;ZS(),this.mySock=new za(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){It.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&za!==null&&!It.forceDisallow_}static previouslyFailed(){return yr.isInMemoryStorage||yr.get("previous_websocket_failure")===!0}markConnectionHealthy(){yr.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const r=Vi(n);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(T(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const n=ke(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=vx(n,yj);r.length>1&&this.sendString_(String(r.length));for(let s=0;s<r.length;s++)this.sendString_(r[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(vj))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}It.responsesRequiredToBeHealthy=2;It.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ki{static get ALL_TRANSPORTS(){return[rs,It]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const n=It&&It.isAvailable();let r=n&&!It.previouslyFailed();if(e.webSocketOnly&&(n||He("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[It];else{const s=this.transports_=[];for(const i of Ki.ALL_TRANSPORTS)i&&i.isAvailable()&&s.push(i);Ki.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Ki.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xj=6e4,_j=5e3,wj=10*1024,Sj=100*1024,Ec="t",rm="d",Cj="s",sm="r",Ej="e",im="o",om="a",am="n",lm="p",kj="h";class bj{constructor(e,n,r,s,i,a,l,c,u,h){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=s,this.authToken_=i,this.onMessage_=a,this.onReady_=l,this.onDisconnect_=c,this.onKill_=u,this.lastSessionId=h,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=mo("c:"+this.id+":"),this.transportManager_=new Ki(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const s=e.healthyTimeout||0;s>0&&(this.healthyTimeout_=wi(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>Sj?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>wj?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(s)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(Ec in e){const n=e[Ec];n===om?this.upgradeIfSecondaryHealthy_():n===sm?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===im&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=Js("t",e),r=Js("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:lm,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:om,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:am,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=Js("t",e),r=Js("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=Js(Ec,e);if(rm in e){const r=e[rm];if(n===kj){const s={...r};this.repoInfo_.isUsingEmulator&&(s.h=this.repoInfo_.host),this.onHandshake_(s)}else if(n===am){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let s=0;s<this.pendingDataMessages.length;++s)this.onDataMessage_(this.pendingDataMessages[s]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===Cj?this.onConnectionShutdown_(r):n===sm?this.onReset_(r):n===Ej?zu("Server Error: "+r):n===im?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):zu("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,r=e.v,s=e.h;this.sessionId=e.s,this.repoInfo_.host=s,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),gh!==r&&He("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),wi(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(xj))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):wi(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(_j))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:lm,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(yr.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lx{put(e,n,r,s){}merge(e,n,r,s){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mx{constructor(e){this.allowedEvents_=e,this.listeners_={},T(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let s=0;s<r.length;s++)r[s].callback.apply(r[s].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});const s=this.getInitialEvent(e);s&&n.apply(r,s)}off(e,n,r){this.validateEventType_(e);const s=this.listeners_[e]||[];for(let i=0;i<s.length;i++)if(s[i].callback===n&&(!r||r===s[i].context)){s.splice(i,1);return}}validateEventType_(e){T(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wa extends Mx{static getInstance(){return new Wa}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!nh()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return T(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cm=32,um=768;class Z{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let s=0;s<this.pieces_.length;s++)this.pieces_[s].length>0&&(this.pieces_[r]=this.pieces_[s],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function Q(){return new Z("")}function K(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function Xn(t){return t.pieces_.length-t.pieceNum_}function ne(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new Z(t.pieces_,e)}function xh(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function jj(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function Yi(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function Fx(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new Z(e,0)}function ge(t,e){const n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof Z)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{const r=e.split("/");for(let s=0;s<r.length;s++)r[s].length>0&&n.push(r[s])}return new Z(n,0)}function G(t){return t.pieceNum_>=t.pieces_.length}function $e(t,e){const n=K(t),r=K(e);if(n===null)return e;if(n===r)return $e(ne(t),ne(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function Ij(t,e){const n=Yi(t,0),r=Yi(e,0);for(let s=0;s<n.length&&s<r.length;s++){const i=Fr(n[s],r[s]);if(i!==0)return i}return n.length===r.length?0:n.length<r.length?-1:1}function Ux(t,e){if(Xn(t)!==Xn(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function yt(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(Xn(t)>Xn(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class Nj{constructor(e,n){this.errorPrefix_=n,this.parts_=Yi(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=Cl(this.parts_[r]);Bx(this)}}function Tj(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=Cl(e),Bx(t)}function Rj(t){const e=t.parts_.pop();t.byteLength_-=Cl(e),t.parts_.length>0&&(t.byteLength_-=1)}function Bx(t){if(t.byteLength_>um)throw new Error(t.errorPrefix_+"has a key path longer than "+um+" bytes ("+t.byteLength_+").");if(t.parts_.length>cm)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+cm+") or object contains a cycle "+hr(t))}function hr(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _h extends Mx{static getInstance(){return new _h}constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}getInitialEvent(e){return T(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xs=1e3,Pj=60*5*1e3,dm=30*1e3,Aj=1.3,Oj=3e4,Dj="server_kill",hm=3;class un extends Lx{constructor(e,n,r,s,i,a,l,c){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=s,this.onServerInfoUpdate_=i,this.authTokenProvider_=a,this.appCheckTokenProvider_=l,this.authOverride_=c,this.id=un.nextPersistentConnectionId_++,this.log_=mo("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Xs,this.maxReconnectDelay_=Pj,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,c)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");_h.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&Wa.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,r){const s=++this.requestNumber_,i={r:s,a:e,b:n};this.log_(ke(i)),T(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),r&&(this.requestCBHash_[s]=r)}get(e){this.initConnection_();const n=new lo,s={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:a=>{const l=a.d;a.s==="ok"?n.resolve(l):n.reject(l)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;const i=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(i),n.promise}listen(e,n,r,s){this.initConnection_();const i=e._queryIdentifier,a=e._path.toString();this.log_("Listen called for "+a+" "+i),this.listens.has(a)||this.listens.set(a,new Map),T(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),T(!this.listens.get(a).has(i),"listen() called twice for same path/queryId.");const l={onComplete:s,hashFn:n,query:e,tag:r};this.listens.get(a).set(i,l),this.connected_&&this.sendListen_(l)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}sendListen_(e){const n=e.query,r=n._path.toString(),s=n._queryIdentifier;this.log_("Listen on "+r+" for "+s);const i={p:r},a="q";e.tag&&(i.q=n._queryObject,i.t=e.tag),i.h=e.hashFn(),this.sendRequest(a,i,l=>{const c=l.d,u=l.s;un.warnOnListenWarnings_(c,n),(this.listens.get(r)&&this.listens.get(r).get(s))===e&&(this.log_("listen response",l),u!=="ok"&&this.removeListen_(r,s),e.onComplete&&e.onComplete(u,c))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&Yt(e,"w")){const r=Es(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const s='".indexOn": "'+n._queryParams.getIndex().toString()+'"',i=n._path.toString();He(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${i} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||iC(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=dm)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=sC(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(n,r,s=>{const i=s.s,a=s.d||"error";this.authToken_===e&&(i==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(i,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,r=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,r)})}unlisten(e,n){const r=e._path.toString(),s=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+s),T(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,s)&&this.connected_&&this.sendUnlisten_(r,s,e._queryObject,n)}sendUnlisten_(e,n,r,s){this.log_("Unlisten on "+e+" for "+n);const i={p:e},a="n";s&&(i.q=r,i.t=s),this.sendRequest(a,i)}onDisconnectPut(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:r})}onDisconnectMerge(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:r})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,r,s){const i={p:n,d:r};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,a=>{s&&setTimeout(()=>{s(a.s,a.d)},Math.floor(0))})}put(e,n,r,s){this.putInternal("p",e,n,r,s)}merge(e,n,r,s){this.putInternal("m",e,n,r,s)}putInternal(e,n,r,s,i){this.initConnection_();const a={p:n,d:r};i!==void 0&&(a.h=i),this.outstandingPuts_.push({action:e,request:a,onComplete:s}),this.outstandingPutCount_++;const l=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(l):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,s=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,i=>{this.log_(n+" response",i),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(i.s,i.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,r=>{if(r.s!=="ok"){const i=r.d;this.log_("reportStats","Error sending stats: "+i)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+ke(e));const n=e.r,r=this.requestCBHash_[n];r&&(delete this.requestCBHash_[n],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):zu("Unrecognized action received from server: "+ke(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){T(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Xs,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Xs,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>Oj&&(this.reconnectDelay_=Xs),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*Aj)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+un.nextConnectionId_++,i=this.lastSessionId;let a=!1,l=null;const c=function(){l?l.close():(a=!0,r())},u=function(f){T(l,"sendRequest call when we're not connected not allowed."),l.sendRequest(f)};this.realtime_={close:c,sendRequest:u};const h=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[f,d]=await Promise.all([this.authTokenProvider_.getToken(h),this.appCheckTokenProvider_.getToken(h)]);a?Ae("getToken() completed but was canceled"):(Ae("getToken() completed. Creating connection."),this.authToken_=f&&f.accessToken,this.appCheckToken_=d&&d.token,l=new bj(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,x=>{He(x+" ("+this.repoInfo_.toString()+")"),this.interrupt(Dj)},i))}catch(f){this.log_("Failed to get token: "+f),a||(this.repoInfo_.nodeAdmin&&He(f),c())}}}interrupt(e){Ae("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Ae("Resuming connection for reason: "+e),delete this.interruptReasons_[e],Ru(this.interruptReasons_)&&(this.reconnectDelay_=Xs,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let r;n?r=n.map(i=>mh(i)).join("$"):r="default";const s=this.removeListen_(e,r);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(e,n){const r=new Z(e).toString();let s;if(this.listens.has(r)){const i=this.listens.get(r);s=i.get(n),i.delete(n),i.size===0&&this.listens.delete(r)}else s=void 0;return s}onAuthRevoked_(e,n){Ae("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=hm&&(this.reconnectDelay_=dm,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){Ae("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=hm&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+mx.replace(/\./g,"-")]=1,nh()?e["framework.cordova"]=1:bv()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=Wa.getInstance().currentlyOnline();return Ru(this.interruptReasons_)&&e}}un.nextPersistentConnectionId_=0;un.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new H(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nl{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const r=new H(ks,e),s=new H(ks,n);return this.compare(r,s)!==0}minPost(){return H.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Uo;class zx extends Nl{static get __EMPTY_NODE(){return Uo}static set __EMPTY_NODE(e){Uo=e}compare(e,n){return Fr(e.name,n.name)}isDefinedOn(e){throw Ds("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return H.MIN}maxPost(){return new H(Ir,Uo)}makePost(e,n){return T(typeof e=="string","KeyIndex indexValue must always be a string."),new H(e,Uo)}toString(){return".key"}}const ps=new zx;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bo{constructor(e,n,r,s,i=null){this.isReverse_=s,this.resultGenerator_=i,this.nodeStack_=[];let a=1;for(;!e.isEmpty();)if(e=e,a=n?r(e.key,n):1,s&&(a*=-1),a<0)this.isReverse_?e=e.left:e=e.right;else if(a===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class Ne{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??Ne.RED,this.left=s??Ze.EMPTY_NODE,this.right=i??Ze.EMPTY_NODE}copy(e,n,r,s,i){return new Ne(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return i<0?s=s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s=s.copy(null,n,null,null,null):s=s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return Ze.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let r,s;if(r=this,n(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(e,r.key)===0){if(r.right.isEmpty())return Ze.EMPTY_NODE;s=r.right.min_(),r=r.copy(s.key,s.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,Ne.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,Ne.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}Ne.RED=!0;Ne.BLACK=!1;class Lj{copy(e,n,r,s,i){return this}insert(e,n,r){return new Ne(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class Ze{constructor(e,n=Ze.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new Ze(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Ne.BLACK,null,null))}remove(e){return new Ze(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Ne.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,s=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return s?s.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(s=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Bo(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new Bo(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new Bo(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new Bo(this.root_,null,this.comparator_,!0,e)}}Ze.EMPTY_NODE=new Lj;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mj(t,e){return Fr(t.name,e.name)}function wh(t,e){return Fr(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $u;function Fj(t){$u=t}const Wx=function(t){return typeof t=="number"?"number:"+xx(t):"string:"+t},$x=function(t){if(t.isLeafNode()){const e=t.val();T(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Yt(e,".sv"),"Priority must be a string or number.")}else T(t===$u||t.isEmpty(),"priority of unexpected type.");T(t===$u||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fm;class je{static set __childrenNodeConstructor(e){fm=e}static get __childrenNodeConstructor(){return fm}constructor(e,n=je.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,T(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),$x(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new je(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:je.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return G(e)?this:K(e)===".priority"?this.priorityNode_:je.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:je.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const r=K(e);return r===null?n:n.isEmpty()&&r!==".priority"?this:(T(r!==".priority"||Xn(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,je.__childrenNodeConstructor.EMPTY_NODE.updateChild(ne(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+Wx(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=xx(this.value_):e+=this.value_,this.lazyHash_=yx(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===je.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof je.__childrenNodeConstructor?-1:(T(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,r=typeof this.value_,s=je.VALUE_TYPE_ORDER.indexOf(n),i=je.VALUE_TYPE_ORDER.indexOf(r);return T(s>=0,"Unknown leaf type: "+n),T(i>=0,"Unknown leaf type: "+r),s===i?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:i-s}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}je.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Vx,Hx;function Uj(t){Vx=t}function Bj(t){Hx=t}class zj extends Nl{compare(e,n){const r=e.node.getPriority(),s=n.node.getPriority(),i=r.compareTo(s);return i===0?Fr(e.name,n.name):i}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return H.MIN}maxPost(){return new H(Ir,new je("[PRIORITY-POST]",Hx))}makePost(e,n){const r=Vx(e);return new H(n,new je("[PRIORITY-POST]",r))}toString(){return".priority"}}const ye=new zj;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wj=Math.log(2);class $j{constructor(e){const n=i=>parseInt(Math.log(i)/Wj,10),r=i=>parseInt(Array(i+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const s=r(this.count);this.bits_=e+1&s}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const $a=function(t,e,n,r){t.sort(e);const s=function(c,u){const h=u-c;let f,d;if(h===0)return null;if(h===1)return f=t[c],d=n?n(f):f,new Ne(d,f.node,Ne.BLACK,null,null);{const x=parseInt(h/2,10)+c,w=s(c,x),p=s(x+1,u);return f=t[x],d=n?n(f):f,new Ne(d,f.node,Ne.BLACK,w,p)}},i=function(c){let u=null,h=null,f=t.length;const d=function(w,p){const _=f-w,m=f;f-=w;const g=s(_+1,m),y=t[_],v=n?n(y):y;x(new Ne(v,y.node,p,null,g))},x=function(w){u?(u.left=w,u=w):(h=w,u=w)};for(let w=0;w<c.count;++w){const p=c.nextBitIsOne(),_=Math.pow(2,c.count-(w+1));p?d(_,Ne.BLACK):(d(_,Ne.BLACK),d(_,Ne.RED))}return h},a=new $j(t.length),l=i(a);return new Ze(r||e,l)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let kc;const Vr={};class an{static get Default(){return T(Vr&&ye,"ChildrenNode.ts has not been loaded"),kc=kc||new an({".priority":Vr},{".priority":ye}),kc}constructor(e,n){this.indexes_=e,this.indexSet_=n}get(e){const n=Es(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof Ze?n:null}hasIndex(e){return Yt(this.indexSet_,e.toString())}addIndex(e,n){T(e!==ps,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let s=!1;const i=n.getIterator(H.Wrap);let a=i.getNext();for(;a;)s=s||e.isDefinedOn(a.node),r.push(a),a=i.getNext();let l;s?l=$a(r,e.getCompare()):l=Vr;const c=e.toString(),u={...this.indexSet_};u[c]=e;const h={...this.indexes_};return h[c]=l,new an(h,u)}addToIndexes(e,n){const r=Aa(this.indexes_,(s,i)=>{const a=Es(this.indexSet_,i);if(T(a,"Missing index implementation for "+i),s===Vr)if(a.isDefinedOn(e.node)){const l=[],c=n.getIterator(H.Wrap);let u=c.getNext();for(;u;)u.name!==e.name&&l.push(u),u=c.getNext();return l.push(e),$a(l,a.getCompare())}else return Vr;else{const l=n.get(e.name);let c=s;return l&&(c=c.remove(new H(e.name,l))),c.insert(e,e.node)}});return new an(r,this.indexSet_)}removeFromIndexes(e,n){const r=Aa(this.indexes_,s=>{if(s===Vr)return s;{const i=n.get(e.name);return i?s.remove(new H(e.name,i)):s}});return new an(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zs;class L{static get EMPTY_NODE(){return Zs||(Zs=new L(new Ze(wh),null,an.Default))}constructor(e,n,r){this.children_=e,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&$x(this.priorityNode_),this.children_.isEmpty()&&T(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Zs}updatePriority(e){return this.children_.isEmpty()?this:new L(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?Zs:n}}getChild(e){const n=K(e);return n===null?this:this.getImmediateChild(n).getChild(ne(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(T(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const r=new H(e,n);let s,i;n.isEmpty()?(s=this.children_.remove(e),i=this.indexMap_.removeFromIndexes(r,this.children_)):(s=this.children_.insert(e,n),i=this.indexMap_.addToIndexes(r,this.children_));const a=s.isEmpty()?Zs:this.priorityNode_;return new L(s,a,i)}}updateChild(e,n){const r=K(e);if(r===null)return n;{T(K(e)!==".priority"||Xn(e)===1,".priority must be the last token in a path");const s=this.getImmediateChild(r).updateChild(ne(e),n);return this.updateImmediateChild(r,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let r=0,s=0,i=!0;if(this.forEachChild(ye,(a,l)=>{n[a]=l.val(e),r++,i&&L.INTEGER_REGEXP_.test(a)?s=Math.max(s,Number(a)):i=!1}),!e&&i&&s<2*r){const a=[];for(const l in n)a[l]=n[l];return a}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+Wx(this.getPriority().val())+":"),this.forEachChild(ye,(n,r)=>{const s=r.hash();s!==""&&(e+=":"+n+":"+s)}),this.lazyHash_=e===""?"":yx(e)}return this.lazyHash_}getPredecessorChildName(e,n,r){const s=this.resolveIndex_(r);if(s){const i=s.getPredecessorKey(new H(e,n));return i?i.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new H(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new H(n,this.children_.get(n)):null}forEachChild(e,n){const r=this.resolveIndex_(e);return r?r.inorderTraversal(s=>n(s.name,s.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(e,s=>s);{const s=this.children_.getIteratorFrom(e.name,H.Wrap);let i=s.peek();for(;i!=null&&n.compare(i,e)<0;)s.getNext(),i=s.peek();return s}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(e,s=>s);{const s=this.children_.getReverseIteratorFrom(e.name,H.Wrap);let i=s.peek();for(;i!=null&&n.compare(i,e)>0;)s.getNext(),i=s.peek();return s}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===go?-1:0}withIndex(e){if(e===ps||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new L(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===ps||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const r=this.getIterator(ye),s=n.getIterator(ye);let i=r.getNext(),a=s.getNext();for(;i&&a;){if(i.name!==a.name||!i.node.equals(a.node))return!1;i=r.getNext(),a=s.getNext()}return i===null&&a===null}else return!1;else return!1}}resolveIndex_(e){return e===ps?null:this.indexMap_.get(e.toString())}}L.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class Vj extends L{constructor(){super(new Ze(wh),L.EMPTY_NODE,an.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return L.EMPTY_NODE}isEmpty(){return!1}}const go=new Vj;Object.defineProperties(H,{MIN:{value:new H(ks,L.EMPTY_NODE)},MAX:{value:new H(Ir,go)}});zx.__EMPTY_NODE=L.EMPTY_NODE;je.__childrenNodeConstructor=L;Fj(go);Bj(go);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hj=!0;function Ee(t,e=null){if(t===null)return L.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),T(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new je(n,Ee(e))}if(!(t instanceof Array)&&Hj){const n=[];let r=!1;if(Me(t,(a,l)=>{if(a.substring(0,1)!=="."){const c=Ee(l);c.isEmpty()||(r=r||!c.getPriority().isEmpty(),n.push(new H(a,c)))}}),n.length===0)return L.EMPTY_NODE;const i=$a(n,Mj,a=>a.name,wh);if(r){const a=$a(n,ye.getCompare());return new L(i,Ee(e),new an({".priority":a},{".priority":ye}))}else return new L(i,Ee(e),an.Default)}else{let n=L.EMPTY_NODE;return Me(t,(r,s)=>{if(Yt(t,r)&&r.substring(0,1)!=="."){const i=Ee(s);(i.isLeafNode()||!i.isEmpty())&&(n=n.updateImmediateChild(r,i))}}),n.updatePriority(Ee(e))}}Uj(Ee);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gj extends Nl{constructor(e){super(),this.indexPath_=e,T(!G(e)&&K(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const r=this.extractChild(e.node),s=this.extractChild(n.node),i=r.compareTo(s);return i===0?Fr(e.name,n.name):i}makePost(e,n){const r=Ee(e),s=L.EMPTY_NODE.updateChild(this.indexPath_,r);return new H(n,s)}maxPost(){const e=L.EMPTY_NODE.updateChild(this.indexPath_,go);return new H(Ir,e)}toString(){return Yi(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qj extends Nl{compare(e,n){const r=e.node.compareTo(n.node);return r===0?Fr(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return H.MIN}maxPost(){return H.MAX}makePost(e,n){const r=Ee(e);return new H(n,r)}toString(){return".value"}}const Kj=new qj;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gx(t){return{type:"value",snapshotNode:t}}function bs(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function Qi(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function Ji(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function Yj(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sh{constructor(e){this.index_=e}updateChild(e,n,r,s,i,a){T(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const l=e.getImmediateChild(n);return l.getChild(s).equals(r.getChild(s))&&l.isEmpty()===r.isEmpty()||(a!=null&&(r.isEmpty()?e.hasChild(n)?a.trackChildChange(Qi(n,l)):T(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):l.isEmpty()?a.trackChildChange(bs(n,r)):a.trackChildChange(Ji(n,r,l))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(e,n,r){return r!=null&&(e.isLeafNode()||e.forEachChild(ye,(s,i)=>{n.hasChild(s)||r.trackChildChange(Qi(s,i))}),n.isLeafNode()||n.forEachChild(ye,(s,i)=>{if(e.hasChild(s)){const a=e.getImmediateChild(s);a.equals(i)||r.trackChildChange(Ji(s,i,a))}else r.trackChildChange(bs(s,i))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?L.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xi{constructor(e){this.indexedFilter_=new Sh(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Xi.getStartPost_(e),this.endPost_=Xi.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&r}updateChild(e,n,r,s,i,a){return this.matches(new H(n,r))||(r=L.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,r,s,i,a)}updateFullNode(e,n,r){n.isLeafNode()&&(n=L.EMPTY_NODE);let s=n.withIndex(this.index_);s=s.updatePriority(L.EMPTY_NODE);const i=this;return n.forEachChild(ye,(a,l)=>{i.matches(new H(a,l))||(s=s.updateImmediateChild(a,L.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,s,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qj{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{const r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new Xi(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,r,s,i,a){return this.rangedFilter_.matches(new H(n,r))||(r=L.EMPTY_NODE),e.getImmediateChild(n).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,r,s,i,a):this.fullLimitUpdateChild_(e,n,r,i,a)}updateFullNode(e,n,r){let s;if(n.isLeafNode()||n.isEmpty())s=L.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){s=L.EMPTY_NODE.withIndex(this.index_);let i;this.reverse_?i=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):i=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let a=0;for(;i.hasNext()&&a<this.limit_;){const l=i.getNext();if(this.withinDirectionalStart(l))if(this.withinDirectionalEnd(l))s=s.updateImmediateChild(l.name,l.node),a++;else break;else continue}}else{s=n.withIndex(this.index_),s=s.updatePriority(L.EMPTY_NODE);let i;this.reverse_?i=s.getReverseIterator(this.index_):i=s.getIterator(this.index_);let a=0;for(;i.hasNext();){const l=i.getNext();a<this.limit_&&this.withinDirectionalStart(l)&&this.withinDirectionalEnd(l)?a++:s=s.updateImmediateChild(l.name,L.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,s,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,r,s,i){let a;if(this.reverse_){const f=this.index_.getCompare();a=(d,x)=>f(x,d)}else a=this.index_.getCompare();const l=e;T(l.numChildren()===this.limit_,"");const c=new H(n,r),u=this.reverse_?l.getFirstChild(this.index_):l.getLastChild(this.index_),h=this.rangedFilter_.matches(c);if(l.hasChild(n)){const f=l.getImmediateChild(n);let d=s.getChildAfterChild(this.index_,u,this.reverse_);for(;d!=null&&(d.name===n||l.hasChild(d.name));)d=s.getChildAfterChild(this.index_,d,this.reverse_);const x=d==null?1:a(d,c);if(h&&!r.isEmpty()&&x>=0)return i!=null&&i.trackChildChange(Ji(n,r,f)),l.updateImmediateChild(n,r);{i!=null&&i.trackChildChange(Qi(n,f));const p=l.updateImmediateChild(n,L.EMPTY_NODE);return d!=null&&this.rangedFilter_.matches(d)?(i!=null&&i.trackChildChange(bs(d.name,d.node)),p.updateImmediateChild(d.name,d.node)):p}}else return r.isEmpty()?e:h&&a(u,c)>=0?(i!=null&&(i.trackChildChange(Qi(u.name,u.node)),i.trackChildChange(bs(n,r))),l.updateImmediateChild(n,r).updateImmediateChild(u.name,L.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ch{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=ye}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return T(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return T(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:ks}hasEnd(){return this.endSet_}getIndexEndValue(){return T(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return T(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Ir}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return T(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===ye}copy(){const e=new Ch;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function Jj(t){return t.loadsAllData()?new Sh(t.getIndex()):t.hasLimit()?new Qj(t):new Xi(t)}function pm(t){const e={};if(t.isDefault())return e;let n;if(t.index_===ye?n="$priority":t.index_===Kj?n="$value":t.index_===ps?n="$key":(T(t.index_ instanceof Gj,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=ke(n),t.startSet_){const r=t.startAfterSet_?"startAfter":"startAt";e[r]=ke(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+ke(t.indexStartName_))}if(t.endSet_){const r=t.endBeforeSet_?"endBefore":"endAt";e[r]=ke(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+ke(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function mm(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==ye&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Va extends Lx{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(T(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,n,r,s){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=s,this.log_=mo("p:rest:"),this.listens_={}}listen(e,n,r,s){const i=e._path.toString();this.log_("Listen called for "+i+" "+e._queryIdentifier);const a=Va.getListenId_(e,r),l={};this.listens_[a]=l;const c=pm(e._queryParams);this.restRequest_(i+".json",c,(u,h)=>{let f=h;if(u===404&&(f=null,u=null),u===null&&this.onDataUpdate_(i,f,!1,r),Es(this.listens_,a)===l){let d;u?u===401?d="permission_denied":d="rest_error:"+u:d="ok",s(d,null)}})}unlisten(e,n){const r=Va.getListenId_(e,n);delete this.listens_[r]}get(e){const n=pm(e._queryParams),r=e._path.toString(),s=new lo;return this.restRequest_(r+".json",n,(i,a)=>{let l=a;i===404&&(l=null,i=null),i===null?(this.onDataUpdate_(r,l,!1,null),s.resolve(l)):s.reject(new Error(l))}),s.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([s,i])=>{s&&s.accessToken&&(n.auth=s.accessToken),i&&i.token&&(n.ac=i.token);const a=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Ls(n);this.log_("Sending REST request for "+a);const l=new XMLHttpRequest;l.onreadystatechange=()=>{if(r&&l.readyState===4){this.log_("REST Response for "+a+" received. status:",l.status,"response:",l.responseText);let c=null;if(l.status>=200&&l.status<300){try{c=Vi(l.responseText)}catch{He("Failed to parse JSON response for "+a+": "+l.responseText)}r(null,c)}else l.status!==401&&l.status!==404&&He("Got unsuccessful REST response for "+a+" Status: "+l.status),r(l.status);r=null}},l.open("GET",a,!0),l.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xj{constructor(){this.rootNode_=L.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ha(){return{value:null,children:new Map}}function qx(t,e,n){if(G(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const r=K(e);t.children.has(r)||t.children.set(r,Ha());const s=t.children.get(r);e=ne(e),qx(s,e,n)}}function Vu(t,e,n){t.value!==null?n(e,t.value):Zj(t,(r,s)=>{const i=new Z(e.toString()+"/"+r);Vu(s,i,n)})}function Zj(t,e){t.children.forEach((n,r)=>{e(r,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eI{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n={...e};return this.last_&&Me(this.last_,(r,s)=>{n[r]=n[r]-s}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gm=10*1e3,tI=30*1e3,nI=5*60*1e3;class rI{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new eI(e);const r=gm+(tI-gm)*Math.random();wi(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),n={};let r=!1;Me(e,(s,i)=>{i>0&&Yt(this.statsToReport_,s)&&(n[s]=i,r=!0)}),r&&this.server_.reportStats(n),wi(this.reportStats_.bind(this),Math.floor(Math.random()*2*nI))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Rt;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(Rt||(Rt={}));function Eh(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function kh(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function bh(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ga{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=Rt.ACK_USER_WRITE,this.source=Eh()}operationForChild(e){if(G(this.path)){if(this.affectedTree.value!=null)return T(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new Z(e));return new Ga(Q(),n,this.revert)}}else return T(K(this.path)===e,"operationForChild called for unrelated child."),new Ga(ne(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zi{constructor(e,n){this.source=e,this.path=n,this.type=Rt.LISTEN_COMPLETE}operationForChild(e){return G(this.path)?new Zi(this.source,Q()):new Zi(this.source,ne(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nr{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=Rt.OVERWRITE}operationForChild(e){return G(this.path)?new Nr(this.source,Q(),this.snap.getImmediateChild(e)):new Nr(this.source,ne(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class js{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=Rt.MERGE}operationForChild(e){if(G(this.path)){const n=this.children.subtree(new Z(e));return n.isEmpty()?null:n.value?new Nr(this.source,Q(),n.value):new js(this.source,Q(),n)}else return T(K(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new js(this.source,ne(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zn{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(G(e))return this.isFullyInitialized()&&!this.filtered_;const n=K(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sI{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function iI(t,e,n,r){const s=[],i=[];return e.forEach(a=>{a.type==="child_changed"&&t.index_.indexedValueChanged(a.oldSnap,a.snapshotNode)&&i.push(Yj(a.childName,a.snapshotNode))}),ei(t,s,"child_removed",e,r,n),ei(t,s,"child_added",e,r,n),ei(t,s,"child_moved",i,r,n),ei(t,s,"child_changed",e,r,n),ei(t,s,"value",e,r,n),s}function ei(t,e,n,r,s,i){const a=r.filter(l=>l.type===n);a.sort((l,c)=>aI(t,l,c)),a.forEach(l=>{const c=oI(t,l,i);s.forEach(u=>{u.respondsTo(l.type)&&e.push(u.createEvent(c,t.query_))})})}function oI(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function aI(t,e,n){if(e.childName==null||n.childName==null)throw Ds("Should only compare child_ events.");const r=new H(e.childName,e.snapshotNode),s=new H(n.childName,n.snapshotNode);return t.index_.compare(r,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tl(t,e){return{eventCache:t,serverCache:e}}function Si(t,e,n,r){return Tl(new Zn(e,n,r),t.serverCache)}function Kx(t,e,n,r){return Tl(t.eventCache,new Zn(e,n,r))}function qa(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Tr(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bc;const lI=()=>(bc||(bc=new Ze(Gb)),bc);class te{static fromObject(e){let n=new te(null);return Me(e,(r,s)=>{n=n.set(new Z(r),s)}),n}constructor(e,n=lI()){this.value=e,this.children=n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:Q(),value:this.value};if(G(e))return null;{const r=K(e),s=this.children.get(r);if(s!==null){const i=s.findRootMostMatchingPathAndValue(ne(e),n);return i!=null?{path:ge(new Z(r),i.path),value:i.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(G(e))return this;{const n=K(e),r=this.children.get(n);return r!==null?r.subtree(ne(e)):new te(null)}}set(e,n){if(G(e))return new te(n,this.children);{const r=K(e),i=(this.children.get(r)||new te(null)).set(ne(e),n),a=this.children.insert(r,i);return new te(this.value,a)}}remove(e){if(G(e))return this.children.isEmpty()?new te(null):new te(null,this.children);{const n=K(e),r=this.children.get(n);if(r){const s=r.remove(ne(e));let i;return s.isEmpty()?i=this.children.remove(n):i=this.children.insert(n,s),this.value===null&&i.isEmpty()?new te(null):new te(this.value,i)}else return this}}get(e){if(G(e))return this.value;{const n=K(e),r=this.children.get(n);return r?r.get(ne(e)):null}}setTree(e,n){if(G(e))return n;{const r=K(e),i=(this.children.get(r)||new te(null)).setTree(ne(e),n);let a;return i.isEmpty()?a=this.children.remove(r):a=this.children.insert(r,i),new te(this.value,a)}}fold(e){return this.fold_(Q(),e)}fold_(e,n){const r={};return this.children.inorderTraversal((s,i)=>{r[s]=i.fold_(ge(e,s),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,Q(),n)}findOnPath_(e,n,r){const s=this.value?r(n,this.value):!1;if(s)return s;if(G(e))return null;{const i=K(e),a=this.children.get(i);return a?a.findOnPath_(ne(e),ge(n,i),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,Q(),n)}foreachOnPath_(e,n,r){if(G(e))return this;{this.value&&r(n,this.value);const s=K(e),i=this.children.get(s);return i?i.foreachOnPath_(ne(e),ge(n,s),r):new te(null)}}foreach(e){this.foreach_(Q(),e)}foreach_(e,n){this.children.inorderTraversal((r,s)=>{s.foreach_(ge(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(e){this.writeTree_=e}static empty(){return new Lt(new te(null))}}function Ci(t,e,n){if(G(e))return new Lt(new te(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){const s=r.path;let i=r.value;const a=$e(s,e);return i=i.updateChild(a,n),new Lt(t.writeTree_.set(s,i))}else{const s=new te(n),i=t.writeTree_.setTree(e,s);return new Lt(i)}}}function Hu(t,e,n){let r=t;return Me(n,(s,i)=>{r=Ci(r,ge(e,s),i)}),r}function ym(t,e){if(G(e))return Lt.empty();{const n=t.writeTree_.setTree(e,new te(null));return new Lt(n)}}function Gu(t,e){return Ur(t,e)!=null}function Ur(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild($e(n.path,e)):null}function vm(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(ye,(r,s)=>{e.push(new H(r,s))}):t.writeTree_.children.inorderTraversal((r,s)=>{s.value!=null&&e.push(new H(r,s.value))}),e}function qn(t,e){if(G(e))return t;{const n=Ur(t,e);return n!=null?new Lt(new te(n)):new Lt(t.writeTree_.subtree(e))}}function qu(t){return t.writeTree_.isEmpty()}function Is(t,e){return Yx(Q(),t.writeTree_,e)}function Yx(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((s,i)=>{s===".priority"?(T(i.value!==null,"Priority writes must always be leaf nodes"),r=i.value):n=Yx(ge(t,s),i,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(ge(t,".priority"),r)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rl(t,e){return Zx(e,t)}function cI(t,e,n,r,s){T(r>t.lastWriteId,"Stacking an older write on top of newer ones"),s===void 0&&(s=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:s}),s&&(t.visibleWrites=Ci(t.visibleWrites,e,n)),t.lastWriteId=r}function uI(t,e,n,r){T(r>t.lastWriteId,"Stacking an older merge on top of newer ones"),t.allWrites.push({path:e,children:n,writeId:r,visible:!0}),t.visibleWrites=Hu(t.visibleWrites,e,n),t.lastWriteId=r}function dI(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}function hI(t,e){const n=t.allWrites.findIndex(l=>l.writeId===e);T(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let s=r.visible,i=!1,a=t.allWrites.length-1;for(;s&&a>=0;){const l=t.allWrites[a];l.visible&&(a>=n&&fI(l,r.path)?s=!1:yt(r.path,l.path)&&(i=!0)),a--}if(s){if(i)return pI(t),!0;if(r.snap)t.visibleWrites=ym(t.visibleWrites,r.path);else{const l=r.children;Me(l,c=>{t.visibleWrites=ym(t.visibleWrites,ge(r.path,c))})}return!0}else return!1}function fI(t,e){if(t.snap)return yt(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&yt(ge(t.path,n),e))return!0;return!1}function pI(t){t.visibleWrites=Qx(t.allWrites,mI,Q()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function mI(t){return t.visible}function Qx(t,e,n){let r=Lt.empty();for(let s=0;s<t.length;++s){const i=t[s];if(e(i)){const a=i.path;let l;if(i.snap)yt(n,a)?(l=$e(n,a),r=Ci(r,l,i.snap)):yt(a,n)&&(l=$e(a,n),r=Ci(r,Q(),i.snap.getChild(l)));else if(i.children){if(yt(n,a))l=$e(n,a),r=Hu(r,l,i.children);else if(yt(a,n))if(l=$e(a,n),G(l))r=Hu(r,Q(),i.children);else{const c=Es(i.children,K(l));if(c){const u=c.getChild(ne(l));r=Ci(r,Q(),u)}}}else throw Ds("WriteRecord should have .snap or .children")}}return r}function Jx(t,e,n,r,s){if(!r&&!s){const i=Ur(t.visibleWrites,e);if(i!=null)return i;{const a=qn(t.visibleWrites,e);if(qu(a))return n;if(n==null&&!Gu(a,Q()))return null;{const l=n||L.EMPTY_NODE;return Is(a,l)}}}else{const i=qn(t.visibleWrites,e);if(!s&&qu(i))return n;if(!s&&n==null&&!Gu(i,Q()))return null;{const a=function(u){return(u.visible||s)&&(!r||!~r.indexOf(u.writeId))&&(yt(u.path,e)||yt(e,u.path))},l=Qx(t.allWrites,a,e),c=n||L.EMPTY_NODE;return Is(l,c)}}}function gI(t,e,n){let r=L.EMPTY_NODE;const s=Ur(t.visibleWrites,e);if(s)return s.isLeafNode()||s.forEachChild(ye,(i,a)=>{r=r.updateImmediateChild(i,a)}),r;if(n){const i=qn(t.visibleWrites,e);return n.forEachChild(ye,(a,l)=>{const c=Is(qn(i,new Z(a)),l);r=r.updateImmediateChild(a,c)}),vm(i).forEach(a=>{r=r.updateImmediateChild(a.name,a.node)}),r}else{const i=qn(t.visibleWrites,e);return vm(i).forEach(a=>{r=r.updateImmediateChild(a.name,a.node)}),r}}function yI(t,e,n,r,s){T(r||s,"Either existingEventSnap or existingServerSnap must exist");const i=ge(e,n);if(Gu(t.visibleWrites,i))return null;{const a=qn(t.visibleWrites,i);return qu(a)?s.getChild(n):Is(a,s.getChild(n))}}function vI(t,e,n,r){const s=ge(e,n),i=Ur(t.visibleWrites,s);if(i!=null)return i;if(r.isCompleteForChild(n)){const a=qn(t.visibleWrites,s);return Is(a,r.getNode().getImmediateChild(n))}else return null}function xI(t,e){return Ur(t.visibleWrites,e)}function _I(t,e,n,r,s,i,a){let l;const c=qn(t.visibleWrites,e),u=Ur(c,Q());if(u!=null)l=u;else if(n!=null)l=Is(c,n);else return[];if(l=l.withIndex(a),!l.isEmpty()&&!l.isLeafNode()){const h=[],f=a.getCompare(),d=i?l.getReverseIteratorFrom(r,a):l.getIteratorFrom(r,a);let x=d.getNext();for(;x&&h.length<s;)f(x,r)!==0&&h.push(x),x=d.getNext();return h}else return[]}function wI(){return{visibleWrites:Lt.empty(),allWrites:[],lastWriteId:-1}}function Ka(t,e,n,r){return Jx(t.writeTree,t.treePath,e,n,r)}function jh(t,e){return gI(t.writeTree,t.treePath,e)}function xm(t,e,n,r){return yI(t.writeTree,t.treePath,e,n,r)}function Ya(t,e){return xI(t.writeTree,ge(t.treePath,e))}function SI(t,e,n,r,s,i){return _I(t.writeTree,t.treePath,e,n,r,s,i)}function Ih(t,e,n){return vI(t.writeTree,t.treePath,e,n)}function Xx(t,e){return Zx(ge(t.treePath,e),t.writeTree)}function Zx(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CI{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,r=e.childName;T(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),T(r!==".priority","Only non-priority child changes can be tracked.");const s=this.changeMap.get(r);if(s){const i=s.type;if(n==="child_added"&&i==="child_removed")this.changeMap.set(r,Ji(r,e.snapshotNode,s.snapshotNode));else if(n==="child_removed"&&i==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&i==="child_changed")this.changeMap.set(r,Qi(r,s.oldSnap));else if(n==="child_changed"&&i==="child_added")this.changeMap.set(r,bs(r,e.snapshotNode));else if(n==="child_changed"&&i==="child_changed")this.changeMap.set(r,Ji(r,e.snapshotNode,s.oldSnap));else throw Ds("Illegal combination of changes: "+e+" occurred after "+s)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EI{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}}const e_=new EI;class Nh{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new Zn(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Ih(this.writes_,e,r)}}getChildAfterChild(e,n,r){const s=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Tr(this.viewCache_),i=SI(this.writes_,s,n,1,r,e);return i.length===0?null:i[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kI(t){return{filter:t}}function bI(t,e){T(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),T(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function jI(t,e,n,r,s){const i=new CI;let a,l;if(n.type===Rt.OVERWRITE){const u=n;u.source.fromUser?a=Ku(t,e,u.path,u.snap,r,s,i):(T(u.source.fromServer,"Unknown source."),l=u.source.tagged||e.serverCache.isFiltered()&&!G(u.path),a=Qa(t,e,u.path,u.snap,r,s,l,i))}else if(n.type===Rt.MERGE){const u=n;u.source.fromUser?a=NI(t,e,u.path,u.children,r,s,i):(T(u.source.fromServer,"Unknown source."),l=u.source.tagged||e.serverCache.isFiltered(),a=Yu(t,e,u.path,u.children,r,s,l,i))}else if(n.type===Rt.ACK_USER_WRITE){const u=n;u.revert?a=PI(t,e,u.path,r,s,i):a=TI(t,e,u.path,u.affectedTree,r,s,i)}else if(n.type===Rt.LISTEN_COMPLETE)a=RI(t,e,n.path,r,i);else throw Ds("Unknown operation type: "+n.type);const c=i.getChanges();return II(e,a,c),{viewCache:a,changes:c}}function II(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const s=r.getNode().isLeafNode()||r.getNode().isEmpty(),i=qa(t);(n.length>0||!t.eventCache.isFullyInitialized()||s&&!r.getNode().equals(i)||!r.getNode().getPriority().equals(i.getPriority()))&&n.push(Gx(qa(e)))}}function t_(t,e,n,r,s,i){const a=e.eventCache;if(Ya(r,n)!=null)return e;{let l,c;if(G(n))if(T(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const u=Tr(e),h=u instanceof L?u:L.EMPTY_NODE,f=jh(r,h);l=t.filter.updateFullNode(e.eventCache.getNode(),f,i)}else{const u=Ka(r,Tr(e));l=t.filter.updateFullNode(e.eventCache.getNode(),u,i)}else{const u=K(n);if(u===".priority"){T(Xn(n)===1,"Can't have a priority with additional path components");const h=a.getNode();c=e.serverCache.getNode();const f=xm(r,n,h,c);f!=null?l=t.filter.updatePriority(h,f):l=a.getNode()}else{const h=ne(n);let f;if(a.isCompleteForChild(u)){c=e.serverCache.getNode();const d=xm(r,n,a.getNode(),c);d!=null?f=a.getNode().getImmediateChild(u).updateChild(h,d):f=a.getNode().getImmediateChild(u)}else f=Ih(r,u,e.serverCache);f!=null?l=t.filter.updateChild(a.getNode(),u,f,h,s,i):l=a.getNode()}}return Si(e,l,a.isFullyInitialized()||G(n),t.filter.filtersNodes())}}function Qa(t,e,n,r,s,i,a,l){const c=e.serverCache;let u;const h=a?t.filter:t.filter.getIndexedFilter();if(G(n))u=h.updateFullNode(c.getNode(),r,null);else if(h.filtersNodes()&&!c.isFiltered()){const x=c.getNode().updateChild(n,r);u=h.updateFullNode(c.getNode(),x,null)}else{const x=K(n);if(!c.isCompleteForPath(n)&&Xn(n)>1)return e;const w=ne(n),_=c.getNode().getImmediateChild(x).updateChild(w,r);x===".priority"?u=h.updatePriority(c.getNode(),_):u=h.updateChild(c.getNode(),x,_,w,e_,null)}const f=Kx(e,u,c.isFullyInitialized()||G(n),h.filtersNodes()),d=new Nh(s,f,i);return t_(t,f,n,s,d,l)}function Ku(t,e,n,r,s,i,a){const l=e.eventCache;let c,u;const h=new Nh(s,e,i);if(G(n))u=t.filter.updateFullNode(e.eventCache.getNode(),r,a),c=Si(e,u,!0,t.filter.filtersNodes());else{const f=K(n);if(f===".priority")u=t.filter.updatePriority(e.eventCache.getNode(),r),c=Si(e,u,l.isFullyInitialized(),l.isFiltered());else{const d=ne(n),x=l.getNode().getImmediateChild(f);let w;if(G(d))w=r;else{const p=h.getCompleteChild(f);p!=null?xh(d)===".priority"&&p.getChild(Fx(d)).isEmpty()?w=p:w=p.updateChild(d,r):w=L.EMPTY_NODE}if(x.equals(w))c=e;else{const p=t.filter.updateChild(l.getNode(),f,w,d,h,a);c=Si(e,p,l.isFullyInitialized(),t.filter.filtersNodes())}}}return c}function _m(t,e){return t.eventCache.isCompleteForChild(e)}function NI(t,e,n,r,s,i,a){let l=e;return r.foreach((c,u)=>{const h=ge(n,c);_m(e,K(h))&&(l=Ku(t,l,h,u,s,i,a))}),r.foreach((c,u)=>{const h=ge(n,c);_m(e,K(h))||(l=Ku(t,l,h,u,s,i,a))}),l}function wm(t,e,n){return n.foreach((r,s)=>{e=e.updateChild(r,s)}),e}function Yu(t,e,n,r,s,i,a,l){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c=e,u;G(n)?u=r:u=new te(null).setTree(n,r);const h=e.serverCache.getNode();return u.children.inorderTraversal((f,d)=>{if(h.hasChild(f)){const x=e.serverCache.getNode().getImmediateChild(f),w=wm(t,x,d);c=Qa(t,c,new Z(f),w,s,i,a,l)}}),u.children.inorderTraversal((f,d)=>{const x=!e.serverCache.isCompleteForChild(f)&&d.value===null;if(!h.hasChild(f)&&!x){const w=e.serverCache.getNode().getImmediateChild(f),p=wm(t,w,d);c=Qa(t,c,new Z(f),p,s,i,a,l)}}),c}function TI(t,e,n,r,s,i,a){if(Ya(s,n)!=null)return e;const l=e.serverCache.isFiltered(),c=e.serverCache;if(r.value!=null){if(G(n)&&c.isFullyInitialized()||c.isCompleteForPath(n))return Qa(t,e,n,c.getNode().getChild(n),s,i,l,a);if(G(n)){let u=new te(null);return c.getNode().forEachChild(ps,(h,f)=>{u=u.set(new Z(h),f)}),Yu(t,e,n,u,s,i,l,a)}else return e}else{let u=new te(null);return r.foreach((h,f)=>{const d=ge(n,h);c.isCompleteForPath(d)&&(u=u.set(h,c.getNode().getChild(d)))}),Yu(t,e,n,u,s,i,l,a)}}function RI(t,e,n,r,s){const i=e.serverCache,a=Kx(e,i.getNode(),i.isFullyInitialized()||G(n),i.isFiltered());return t_(t,a,n,r,e_,s)}function PI(t,e,n,r,s,i){let a;if(Ya(r,n)!=null)return e;{const l=new Nh(r,e,s),c=e.eventCache.getNode();let u;if(G(n)||K(n)===".priority"){let h;if(e.serverCache.isFullyInitialized())h=Ka(r,Tr(e));else{const f=e.serverCache.getNode();T(f instanceof L,"serverChildren would be complete if leaf node"),h=jh(r,f)}h=h,u=t.filter.updateFullNode(c,h,i)}else{const h=K(n);let f=Ih(r,h,e.serverCache);f==null&&e.serverCache.isCompleteForChild(h)&&(f=c.getImmediateChild(h)),f!=null?u=t.filter.updateChild(c,h,f,ne(n),l,i):e.eventCache.getNode().hasChild(h)?u=t.filter.updateChild(c,h,L.EMPTY_NODE,ne(n),l,i):u=c,u.isEmpty()&&e.serverCache.isFullyInitialized()&&(a=Ka(r,Tr(e)),a.isLeafNode()&&(u=t.filter.updateFullNode(u,a,i)))}return a=e.serverCache.isFullyInitialized()||Ya(r,Q())!=null,Si(e,u,a,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AI{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,s=new Sh(r.getIndex()),i=Jj(r);this.processor_=kI(i);const a=n.serverCache,l=n.eventCache,c=s.updateFullNode(L.EMPTY_NODE,a.getNode(),null),u=i.updateFullNode(L.EMPTY_NODE,l.getNode(),null),h=new Zn(c,a.isFullyInitialized(),s.filtersNodes()),f=new Zn(u,l.isFullyInitialized(),i.filtersNodes());this.viewCache_=Tl(f,h),this.eventGenerator_=new sI(this.query_)}get query(){return this.query_}}function OI(t){return t.viewCache_.serverCache.getNode()}function DI(t){return qa(t.viewCache_)}function LI(t,e){const n=Tr(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!G(e)&&!n.getImmediateChild(K(e)).isEmpty())?n.getChild(e):null}function Sm(t){return t.eventRegistrations_.length===0}function MI(t,e){t.eventRegistrations_.push(e)}function Cm(t,e,n){const r=[];if(n){T(e==null,"A cancel should cancel all event registrations.");const s=t.query._path;t.eventRegistrations_.forEach(i=>{const a=i.createCancelEvent(n,s);a&&r.push(a)})}if(e){let s=[];for(let i=0;i<t.eventRegistrations_.length;++i){const a=t.eventRegistrations_[i];if(!a.matches(e))s.push(a);else if(e.hasAnyCallback()){s=s.concat(t.eventRegistrations_.slice(i+1));break}}t.eventRegistrations_=s}else t.eventRegistrations_=[];return r}function Em(t,e,n,r){e.type===Rt.MERGE&&e.source.queryId!==null&&(T(Tr(t.viewCache_),"We should always have a full cache before handling merges"),T(qa(t.viewCache_),"Missing event cache, even though we have a server cache"));const s=t.viewCache_,i=jI(t.processor_,s,e,n,r);return bI(t.processor_,i.viewCache),T(i.viewCache.serverCache.isFullyInitialized()||!s.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=i.viewCache,n_(t,i.changes,i.viewCache.eventCache.getNode(),null)}function FI(t,e){const n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(ye,(i,a)=>{r.push(bs(i,a))}),n.isFullyInitialized()&&r.push(Gx(n.getNode())),n_(t,r,n.getNode(),e)}function n_(t,e,n,r){const s=r?[r]:t.eventRegistrations_;return iI(t.eventGenerator_,e,n,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ja;class r_{constructor(){this.views=new Map}}function UI(t){T(!Ja,"__referenceConstructor has already been defined"),Ja=t}function BI(){return T(Ja,"Reference.ts has not been loaded"),Ja}function zI(t){return t.views.size===0}function Th(t,e,n,r){const s=e.source.queryId;if(s!==null){const i=t.views.get(s);return T(i!=null,"SyncTree gave us an op for an invalid query."),Em(i,e,n,r)}else{let i=[];for(const a of t.views.values())i=i.concat(Em(a,e,n,r));return i}}function s_(t,e,n,r,s){const i=e._queryIdentifier,a=t.views.get(i);if(!a){let l=Ka(n,s?r:null),c=!1;l?c=!0:r instanceof L?(l=jh(n,r),c=!1):(l=L.EMPTY_NODE,c=!1);const u=Tl(new Zn(l,c,!1),new Zn(r,s,!1));return new AI(e,u)}return a}function WI(t,e,n,r,s,i){const a=s_(t,e,r,s,i);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,a),MI(a,n),FI(a,n)}function $I(t,e,n,r){const s=e._queryIdentifier,i=[];let a=[];const l=er(t);if(s==="default")for(const[c,u]of t.views.entries())a=a.concat(Cm(u,n,r)),Sm(u)&&(t.views.delete(c),u.query._queryParams.loadsAllData()||i.push(u.query));else{const c=t.views.get(s);c&&(a=a.concat(Cm(c,n,r)),Sm(c)&&(t.views.delete(s),c.query._queryParams.loadsAllData()||i.push(c.query)))}return l&&!er(t)&&i.push(new(BI())(e._repo,e._path)),{removed:i,events:a}}function i_(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function Kn(t,e){let n=null;for(const r of t.views.values())n=n||LI(r,e);return n}function o_(t,e){if(e._queryParams.loadsAllData())return Pl(t);{const r=e._queryIdentifier;return t.views.get(r)}}function a_(t,e){return o_(t,e)!=null}function er(t){return Pl(t)!=null}function Pl(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xa;function VI(t){T(!Xa,"__referenceConstructor has already been defined"),Xa=t}function HI(){return T(Xa,"Reference.ts has not been loaded"),Xa}let GI=1;class km{constructor(e){this.listenProvider_=e,this.syncPointTree_=new te(null),this.pendingWriteTree_=wI(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function l_(t,e,n,r,s){return cI(t.pendingWriteTree_,e,n,r,s),s?Us(t,new Nr(Eh(),e,n)):[]}function qI(t,e,n,r){uI(t.pendingWriteTree_,e,n,r);const s=te.fromObject(n);return Us(t,new js(Eh(),e,s))}function Dn(t,e,n=!1){const r=dI(t.pendingWriteTree_,e);if(hI(t.pendingWriteTree_,e)){let i=new te(null);return r.snap!=null?i=i.set(Q(),!0):Me(r.children,a=>{i=i.set(new Z(a),!0)}),Us(t,new Ga(r.path,i,n))}else return[]}function yo(t,e,n){return Us(t,new Nr(kh(),e,n))}function KI(t,e,n){const r=te.fromObject(n);return Us(t,new js(kh(),e,r))}function YI(t,e){return Us(t,new Zi(kh(),e))}function QI(t,e,n){const r=Ph(t,n);if(r){const s=Ah(r),i=s.path,a=s.queryId,l=$e(i,e),c=new Zi(bh(a),l);return Oh(t,i,c)}else return[]}function c_(t,e,n,r,s=!1){const i=e._path,a=t.syncPointTree_.get(i);let l=[];if(a&&(e._queryIdentifier==="default"||a_(a,e))){const c=$I(a,e,n,r);zI(a)&&(t.syncPointTree_=t.syncPointTree_.remove(i));const u=c.removed;if(l=c.events,!s){const h=u.findIndex(d=>d._queryParams.loadsAllData())!==-1,f=t.syncPointTree_.findOnPath(i,(d,x)=>er(x));if(h&&!f){const d=t.syncPointTree_.subtree(i);if(!d.isEmpty()){const x=eN(d);for(let w=0;w<x.length;++w){const p=x[w],_=p.query,m=f_(t,p);t.listenProvider_.startListening(Ei(_),eo(t,_),m.hashFn,m.onComplete)}}}!f&&u.length>0&&!r&&(h?t.listenProvider_.stopListening(Ei(e),null):u.forEach(d=>{const x=t.queryToTagMap.get(Al(d));t.listenProvider_.stopListening(Ei(d),x)}))}tN(t,u)}return l}function u_(t,e,n,r){const s=Ph(t,r);if(s!=null){const i=Ah(s),a=i.path,l=i.queryId,c=$e(a,e),u=new Nr(bh(l),c,n);return Oh(t,a,u)}else return[]}function JI(t,e,n,r){const s=Ph(t,r);if(s){const i=Ah(s),a=i.path,l=i.queryId,c=$e(a,e),u=te.fromObject(n),h=new js(bh(l),c,u);return Oh(t,a,h)}else return[]}function XI(t,e,n,r=!1){const s=e._path;let i=null,a=!1;t.syncPointTree_.foreachOnPath(s,(d,x)=>{const w=$e(d,s);i=i||Kn(x,w),a=a||er(x)});let l=t.syncPointTree_.get(s);l?(a=a||er(l),i=i||Kn(l,Q())):(l=new r_,t.syncPointTree_=t.syncPointTree_.set(s,l));let c;i!=null?c=!0:(c=!1,i=L.EMPTY_NODE,t.syncPointTree_.subtree(s).foreachChild((x,w)=>{const p=Kn(w,Q());p&&(i=i.updateImmediateChild(x,p))}));const u=a_(l,e);if(!u&&!e._queryParams.loadsAllData()){const d=Al(e);T(!t.queryToTagMap.has(d),"View does not exist, but we have a tag");const x=nN();t.queryToTagMap.set(d,x),t.tagToQueryMap.set(x,d)}const h=Rl(t.pendingWriteTree_,s);let f=WI(l,e,n,h,i,c);if(!u&&!a&&!r){const d=o_(l,e);f=f.concat(rN(t,e,d))}return f}function Rh(t,e,n){const s=t.pendingWriteTree_,i=t.syncPointTree_.findOnPath(e,(a,l)=>{const c=$e(a,e),u=Kn(l,c);if(u)return u});return Jx(s,e,i,n,!0)}function ZI(t,e){const n=e._path;let r=null;t.syncPointTree_.foreachOnPath(n,(u,h)=>{const f=$e(u,n);r=r||Kn(h,f)});let s=t.syncPointTree_.get(n);s?r=r||Kn(s,Q()):(s=new r_,t.syncPointTree_=t.syncPointTree_.set(n,s));const i=r!=null,a=i?new Zn(r,!0,!1):null,l=Rl(t.pendingWriteTree_,e._path),c=s_(s,e,l,i?a.getNode():L.EMPTY_NODE,i);return DI(c)}function Us(t,e){return d_(e,t.syncPointTree_,null,Rl(t.pendingWriteTree_,Q()))}function d_(t,e,n,r){if(G(t.path))return h_(t,e,n,r);{const s=e.get(Q());n==null&&s!=null&&(n=Kn(s,Q()));let i=[];const a=K(t.path),l=t.operationForChild(a),c=e.children.get(a);if(c&&l){const u=n?n.getImmediateChild(a):null,h=Xx(r,a);i=i.concat(d_(l,c,u,h))}return s&&(i=i.concat(Th(s,t,r,n))),i}}function h_(t,e,n,r){const s=e.get(Q());n==null&&s!=null&&(n=Kn(s,Q()));let i=[];return e.children.inorderTraversal((a,l)=>{const c=n?n.getImmediateChild(a):null,u=Xx(r,a),h=t.operationForChild(a);h&&(i=i.concat(h_(h,l,c,u)))}),s&&(i=i.concat(Th(s,t,r,n))),i}function f_(t,e){const n=e.query,r=eo(t,n);return{hashFn:()=>(OI(e)||L.EMPTY_NODE).hash(),onComplete:s=>{if(s==="ok")return r?QI(t,n._path,r):YI(t,n._path);{const i=Yb(s,n);return c_(t,n,null,i)}}}}function eo(t,e){const n=Al(e);return t.queryToTagMap.get(n)}function Al(t){return t._path.toString()+"$"+t._queryIdentifier}function Ph(t,e){return t.tagToQueryMap.get(e)}function Ah(t){const e=t.indexOf("$");return T(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new Z(t.substr(0,e))}}function Oh(t,e,n){const r=t.syncPointTree_.get(e);T(r,"Missing sync point for query tag that we're tracking");const s=Rl(t.pendingWriteTree_,e);return Th(r,n,s,null)}function eN(t){return t.fold((e,n,r)=>{if(n&&er(n))return[Pl(n)];{let s=[];return n&&(s=i_(n)),Me(r,(i,a)=>{s=s.concat(a)}),s}})}function Ei(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(HI())(t._repo,t._path):t}function tN(t,e){for(let n=0;n<e.length;++n){const r=e[n];if(!r._queryParams.loadsAllData()){const s=Al(r),i=t.queryToTagMap.get(s);t.queryToTagMap.delete(s),t.tagToQueryMap.delete(i)}}}function nN(){return GI++}function rN(t,e,n){const r=e._path,s=eo(t,e),i=f_(t,n),a=t.listenProvider_.startListening(Ei(e),s,i.hashFn,i.onComplete),l=t.syncPointTree_.subtree(r);if(s)T(!er(l.value),"If we're adding a query, it shouldn't be shadowed");else{const c=l.fold((u,h,f)=>{if(!G(u)&&h&&er(h))return[Pl(h).query];{let d=[];return h&&(d=d.concat(i_(h).map(x=>x.query))),Me(f,(x,w)=>{d=d.concat(w)}),d}});for(let u=0;u<c.length;++u){const h=c[u];t.listenProvider_.stopListening(Ei(h),eo(t,h))}}return a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dh{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new Dh(n)}node(){return this.node_}}class Lh{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=ge(this.path_,e);return new Lh(this.syncTree_,n)}node(){return Rh(this.syncTree_,this.path_)}}const sN=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},bm=function(t,e,n){if(!t||typeof t!="object")return t;if(T(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return iN(t[".sv"],e,n);if(typeof t[".sv"]=="object")return oN(t[".sv"],e);T(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},iN=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:T(!1,"Unexpected server value: "+t)}},oN=function(t,e,n){t.hasOwnProperty("increment")||T(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t.increment;typeof r!="number"&&T(!1,"Unexpected increment value: "+r);const s=e.node();if(T(s!==null&&typeof s<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!s.isLeafNode())return r;const a=s.getValue();return typeof a!="number"?r:a+r},p_=function(t,e,n,r){return Mh(e,new Lh(n,t),r)},m_=function(t,e,n){return Mh(t,new Dh(e),n)};function Mh(t,e,n){const r=t.getPriority().val(),s=bm(r,e.getImmediateChild(".priority"),n);let i;if(t.isLeafNode()){const a=t,l=bm(a.getValue(),e,n);return l!==a.getValue()||s!==a.getPriority().val()?new je(l,Ee(s)):t}else{const a=t;return i=a,s!==a.getPriority().val()&&(i=i.updatePriority(new je(s))),a.forEachChild(ye,(l,c)=>{const u=Mh(c,e.getImmediateChild(l),n);u!==c&&(i=i.updateImmediateChild(l,u))}),i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fh{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}}function Uh(t,e){let n=e instanceof Z?e:new Z(e),r=t,s=K(n);for(;s!==null;){const i=Es(r.node.children,s)||{children:{},childCount:0};r=new Fh(s,r,i),n=ne(n),s=K(n)}return r}function Bs(t){return t.node.value}function g_(t,e){t.node.value=e,Qu(t)}function y_(t){return t.node.childCount>0}function aN(t){return Bs(t)===void 0&&!y_(t)}function Ol(t,e){Me(t.node.children,(n,r)=>{e(new Fh(n,t,r))})}function v_(t,e,n,r){n&&e(t),Ol(t,s=>{v_(s,e,!0)})}function lN(t,e,n){let r=t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function vo(t){return new Z(t.parent===null?t.name:vo(t.parent)+"/"+t.name)}function Qu(t){t.parent!==null&&cN(t.parent,t.name,t)}function cN(t,e,n){const r=aN(n),s=Yt(t.node.children,e);r&&s?(delete t.node.children[e],t.node.childCount--,Qu(t)):!r&&!s&&(t.node.children[e]=n.node,t.node.childCount++,Qu(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uN=/[\[\].#$\/\u0000-\u001F\u007F]/,dN=/[\[\].#$\u0000-\u001F\u007F]/,jc=10*1024*1024,Bh=function(t){return typeof t=="string"&&t.length!==0&&!uN.test(t)},x_=function(t){return typeof t=="string"&&t.length!==0&&!dN.test(t)},hN=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),x_(t)},fN=function(t){return t===null||typeof t=="string"||typeof t=="number"&&!ph(t)||t&&typeof t=="object"&&Yt(t,".sv")},__=function(t,e,n,r){r&&e===void 0||Dl(Sl(t,"value"),e,n)},Dl=function(t,e,n){const r=n instanceof Z?new Nj(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+hr(r));if(typeof e=="function")throw new Error(t+"contains a function "+hr(r)+" with contents = "+e.toString());if(ph(e))throw new Error(t+"contains "+e.toString()+" "+hr(r));if(typeof e=="string"&&e.length>jc/3&&Cl(e)>jc)throw new Error(t+"contains a string greater than "+jc+" utf8 bytes "+hr(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let s=!1,i=!1;if(Me(e,(a,l)=>{if(a===".value")s=!0;else if(a!==".priority"&&a!==".sv"&&(i=!0,!Bh(a)))throw new Error(t+" contains an invalid key ("+a+") "+hr(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);Tj(r,a),Dl(t,l,r),Rj(r)}),s&&i)throw new Error(t+' contains ".value" child '+hr(r)+" in addition to actual children.")}},pN=function(t,e){let n,r;for(n=0;n<e.length;n++){r=e[n];const i=Yi(r);for(let a=0;a<i.length;a++)if(!(i[a]===".priority"&&a===i.length-1)){if(!Bh(i[a]))throw new Error(t+"contains an invalid key ("+i[a]+") in path "+r.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort(Ij);let s=null;for(n=0;n<e.length;n++){if(r=e[n],s!==null&&yt(s,r))throw new Error(t+"contains a path "+s.toString()+" that is ancestor of another path "+r.toString());s=r}},mN=function(t,e,n,r){const s=Sl(t,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(s+" must be an object containing the children to replace.");const i=[];Me(e,(a,l)=>{const c=new Z(a);if(Dl(s,l,ge(n,c)),xh(c)===".priority"&&!fN(l))throw new Error(s+"contains an invalid value for '"+c.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");i.push(c)}),pN(s,i)},w_=function(t,e,n,r){if(!x_(n))throw new Error(Sl(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},gN=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),w_(t,e,n)},zh=function(t,e){if(K(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},yN=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!Bh(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!hN(n))throw new Error(Sl(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vN{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Wh(t,e){let n=null;for(let r=0;r<e.length;r++){const s=e[r],i=s.getPath();n!==null&&!Ux(i,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:i}),n.events.push(s)}n&&t.eventLists_.push(n)}function Ct(t,e,n){Wh(t,n),xN(t,r=>yt(r,e)||yt(e,r))}function xN(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const s=t.eventLists_[r];if(s){const i=s.path;e(i)?(_N(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function _N(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const r=n.getEventRunner();_i&&Ae("event: "+n.toString()),Fs(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wN="repo_interrupt",SN=25;class CN{constructor(e,n,r,s){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=s,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new vN,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Ha(),this.transactionQueueTree_=new Fh,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function EN(t,e,n){if(t.stats_=yh(t.repoInfo_),t.forceRestClient_||Zb())t.server_=new Va(t.repoInfo_,(r,s,i,a)=>{jm(t,r,s,i,a)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>Im(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{ke(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new un(t.repoInfo_,e,(r,s,i,a)=>{jm(t,r,s,i,a)},r=>{Im(t,r)},r=>{kN(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=sj(t.repoInfo_,()=>new rI(t.stats_,t.server_)),t.infoData_=new Xj,t.infoSyncTree_=new km({startListening:(r,s,i,a)=>{let l=[];const c=t.infoData_.getNode(r._path);return c.isEmpty()||(l=yo(t.infoSyncTree_,r._path,c),setTimeout(()=>{a("ok")},0)),l},stopListening:()=>{}}),$h(t,"connected",!1),t.serverSyncTree_=new km({startListening:(r,s,i,a)=>(t.server_.listen(r,i,s,(l,c)=>{const u=a(l,c);Ct(t.eventQueue_,r._path,u)}),[]),stopListening:(r,s)=>{t.server_.unlisten(r,s)}})}function S_(t){const n=t.infoData_.getNode(new Z(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function Ll(t){return sN({timestamp:S_(t)})}function jm(t,e,n,r,s){t.dataUpdateCount++;const i=new Z(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let a=[];if(s)if(r){const c=Aa(n,u=>Ee(u));a=JI(t.serverSyncTree_,i,c,s)}else{const c=Ee(n);a=u_(t.serverSyncTree_,i,c,s)}else if(r){const c=Aa(n,u=>Ee(u));a=KI(t.serverSyncTree_,i,c)}else{const c=Ee(n);a=yo(t.serverSyncTree_,i,c)}let l=i;a.length>0&&(l=Ns(t,i)),Ct(t.eventQueue_,l,a)}function Im(t,e){$h(t,"connected",e),e===!1&&NN(t)}function kN(t,e){Me(e,(n,r)=>{$h(t,n,r)})}function $h(t,e,n){const r=new Z("/.info/"+e),s=Ee(n);t.infoData_.updateSnapshot(r,s);const i=yo(t.infoSyncTree_,r,s);Ct(t.eventQueue_,r,i)}function Vh(t){return t.nextWriteId_++}function bN(t,e,n){const r=ZI(t.serverSyncTree_,e);return r!=null?Promise.resolve(r):t.server_.get(e).then(s=>{const i=Ee(s).withIndex(e._queryParams.getIndex());XI(t.serverSyncTree_,e,n,!0);let a;if(e._queryParams.loadsAllData())a=yo(t.serverSyncTree_,e._path,i);else{const l=eo(t.serverSyncTree_,e);a=u_(t.serverSyncTree_,e._path,i,l)}return Ct(t.eventQueue_,e._path,a),c_(t.serverSyncTree_,e,n,null,!0),i},s=>(xo(t,"get for query "+ke(e)+" failed: "+s),Promise.reject(new Error(s))))}function jN(t,e,n,r,s){xo(t,"set",{path:e.toString(),value:n,priority:r});const i=Ll(t),a=Ee(n,r),l=Rh(t.serverSyncTree_,e),c=m_(a,l,i),u=Vh(t),h=l_(t.serverSyncTree_,e,c,u,!0);Wh(t.eventQueue_,h),t.server_.put(e.toString(),a.val(!0),(d,x)=>{const w=d==="ok";w||He("set at "+e+" failed: "+d);const p=Dn(t.serverSyncTree_,u,!w);Ct(t.eventQueue_,e,p),Ju(t,s,d,x)});const f=Gh(t,e);Ns(t,f),Ct(t.eventQueue_,f,[])}function IN(t,e,n,r){xo(t,"update",{path:e.toString(),value:n});let s=!0;const i=Ll(t),a={};if(Me(n,(l,c)=>{s=!1,a[l]=p_(ge(e,l),Ee(c),t.serverSyncTree_,i)}),s)Ae("update() called with empty data.  Don't do anything."),Ju(t,r,"ok",void 0);else{const l=Vh(t),c=qI(t.serverSyncTree_,e,a,l);Wh(t.eventQueue_,c),t.server_.merge(e.toString(),n,(u,h)=>{const f=u==="ok";f||He("update at "+e+" failed: "+u);const d=Dn(t.serverSyncTree_,l,!f),x=d.length>0?Ns(t,e):e;Ct(t.eventQueue_,x,d),Ju(t,r,u,h)}),Me(n,u=>{const h=Gh(t,ge(e,u));Ns(t,h)}),Ct(t.eventQueue_,e,[])}}function NN(t){xo(t,"onDisconnectEvents");const e=Ll(t),n=Ha();Vu(t.onDisconnect_,Q(),(s,i)=>{const a=p_(s,i,t.serverSyncTree_,e);qx(n,s,a)});let r=[];Vu(n,Q(),(s,i)=>{r=r.concat(yo(t.serverSyncTree_,s,i));const a=Gh(t,s);Ns(t,a)}),t.onDisconnect_=Ha(),Ct(t.eventQueue_,Q(),r)}function TN(t){t.persistentConnection_&&t.persistentConnection_.interrupt(wN)}function xo(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),Ae(n,...e)}function Ju(t,e,n,r){e&&Fs(()=>{if(n==="ok")e(null);else{const s=(n||"error").toUpperCase();let i=s;r&&(i+=": "+r);const a=new Error(i);a.code=s,e(a)}})}function C_(t,e,n){return Rh(t.serverSyncTree_,e,n)||L.EMPTY_NODE}function Hh(t,e=t.transactionQueueTree_){if(e||Ml(t,e),Bs(e)){const n=k_(t,e);T(n.length>0,"Sending zero length transaction queue"),n.every(s=>s.status===0)&&RN(t,vo(e),n)}else y_(e)&&Ol(e,n=>{Hh(t,n)})}function RN(t,e,n){const r=n.map(u=>u.currentWriteId),s=C_(t,e,r);let i=s;const a=s.hash();for(let u=0;u<n.length;u++){const h=n[u];T(h.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),h.status=1,h.retryCount++;const f=$e(e,h.path);i=i.updateChild(f,h.currentOutputSnapshotRaw)}const l=i.val(!0),c=e;t.server_.put(c.toString(),l,u=>{xo(t,"transaction put response",{path:c.toString(),status:u});let h=[];if(u==="ok"){const f=[];for(let d=0;d<n.length;d++)n[d].status=2,h=h.concat(Dn(t.serverSyncTree_,n[d].currentWriteId)),n[d].onComplete&&f.push(()=>n[d].onComplete(null,!0,n[d].currentOutputSnapshotResolved)),n[d].unwatcher();Ml(t,Uh(t.transactionQueueTree_,e)),Hh(t,t.transactionQueueTree_),Ct(t.eventQueue_,e,h);for(let d=0;d<f.length;d++)Fs(f[d])}else{if(u==="datastale")for(let f=0;f<n.length;f++)n[f].status===3?n[f].status=4:n[f].status=0;else{He("transaction at "+c.toString()+" failed: "+u);for(let f=0;f<n.length;f++)n[f].status=4,n[f].abortReason=u}Ns(t,e)}},a)}function Ns(t,e){const n=E_(t,e),r=vo(n),s=k_(t,n);return PN(t,s,r),r}function PN(t,e,n){if(e.length===0)return;const r=[];let s=[];const a=e.filter(l=>l.status===0).map(l=>l.currentWriteId);for(let l=0;l<e.length;l++){const c=e[l],u=$e(n,c.path);let h=!1,f;if(T(u!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)h=!0,f=c.abortReason,s=s.concat(Dn(t.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=SN)h=!0,f="maxretry",s=s.concat(Dn(t.serverSyncTree_,c.currentWriteId,!0));else{const d=C_(t,c.path,a);c.currentInputSnapshot=d;const x=e[l].update(d.val());if(x!==void 0){Dl("transaction failed: Data returned ",x,c.path);let w=Ee(x);typeof x=="object"&&x!=null&&Yt(x,".priority")||(w=w.updatePriority(d.getPriority()));const _=c.currentWriteId,m=Ll(t),g=m_(w,d,m);c.currentOutputSnapshotRaw=w,c.currentOutputSnapshotResolved=g,c.currentWriteId=Vh(t),a.splice(a.indexOf(_),1),s=s.concat(l_(t.serverSyncTree_,c.path,g,c.currentWriteId,c.applyLocally)),s=s.concat(Dn(t.serverSyncTree_,_,!0))}else h=!0,f="nodata",s=s.concat(Dn(t.serverSyncTree_,c.currentWriteId,!0))}Ct(t.eventQueue_,n,s),s=[],h&&(e[l].status=2,function(d){setTimeout(d,Math.floor(0))}(e[l].unwatcher),e[l].onComplete&&(f==="nodata"?r.push(()=>e[l].onComplete(null,!1,e[l].currentInputSnapshot)):r.push(()=>e[l].onComplete(new Error(f),!1,null))))}Ml(t,t.transactionQueueTree_);for(let l=0;l<r.length;l++)Fs(r[l]);Hh(t,t.transactionQueueTree_)}function E_(t,e){let n,r=t.transactionQueueTree_;for(n=K(e);n!==null&&Bs(r)===void 0;)r=Uh(r,n),e=ne(e),n=K(e);return r}function k_(t,e){const n=[];return b_(t,e,n),n.sort((r,s)=>r.order-s.order),n}function b_(t,e,n){const r=Bs(e);if(r)for(let s=0;s<r.length;s++)n.push(r[s]);Ol(e,s=>{b_(t,s,n)})}function Ml(t,e){const n=Bs(e);if(n){let r=0;for(let s=0;s<n.length;s++)n[s].status!==2&&(n[r]=n[s],r++);n.length=r,g_(e,n.length>0?n:void 0)}Ol(e,r=>{Ml(t,r)})}function Gh(t,e){const n=vo(E_(t,e)),r=Uh(t.transactionQueueTree_,e);return lN(r,s=>{Ic(t,s)}),Ic(t,r),v_(r,s=>{Ic(t,s)}),n}function Ic(t,e){const n=Bs(e);if(n){const r=[];let s=[],i=-1;for(let a=0;a<n.length;a++)n[a].status===3||(n[a].status===1?(T(i===a-1,"All SENT items should be at beginning of queue."),i=a,n[a].status=3,n[a].abortReason="set"):(T(n[a].status===0,"Unexpected transaction status in abort"),n[a].unwatcher(),s=s.concat(Dn(t.serverSyncTree_,n[a].currentWriteId,!0)),n[a].onComplete&&r.push(n[a].onComplete.bind(null,new Error("set"),!1,null))));i===-1?g_(e,void 0):n.length=i+1,Ct(t.eventQueue_,vo(e),s);for(let a=0;a<r.length;a++)Fs(r[a])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AN(t){let e="";const n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let s=n[r];try{s=decodeURIComponent(s.replace(/\+/g," "))}catch{}e+="/"+s}return e}function ON(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):He(`Invalid query segment '${n}' in query '${t}'`)}return e}const Nm=function(t,e){const n=DN(t),r=n.namespace;n.domain==="firebase.com"&&vn(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&vn("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||Vb();const s=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new Nx(n.host,n.secure,r,s,e,"",r!==n.subdomain),path:new Z(n.pathString)}},DN=function(t){let e="",n="",r="",s="",i="",a=!0,l="https",c=443;if(typeof t=="string"){let u=t.indexOf("//");u>=0&&(l=t.substring(0,u-1),t=t.substring(u+2));let h=t.indexOf("/");h===-1&&(h=t.length);let f=t.indexOf("?");f===-1&&(f=t.length),e=t.substring(0,Math.min(h,f)),h<f&&(s=AN(t.substring(h,f)));const d=ON(t.substring(Math.min(t.length,f)));u=e.indexOf(":"),u>=0?(a=l==="https"||l==="wss",c=parseInt(e.substring(u+1),10)):u=e.length;const x=e.slice(0,u);if(x.toLowerCase()==="localhost")n="localhost";else if(x.split(".").length<=2)n=x;else{const w=e.indexOf(".");r=e.substring(0,w).toLowerCase(),n=e.substring(w+1),i=r}"ns"in d&&(i=d.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:a,scheme:l,pathString:s,namespace:i}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tm="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",LN=function(){let t=0;const e=[];return function(n){const r=n===t;t=n;let s;const i=new Array(8);for(s=7;s>=0;s--)i[s]=Tm.charAt(n%64),n=Math.floor(n/64);T(n===0,"Cannot push at time == 0");let a=i.join("");if(r){for(s=11;s>=0&&e[s]===63;s--)e[s]=0;e[s]++}else for(s=0;s<12;s++)e[s]=Math.floor(Math.random()*64);for(s=0;s<12;s++)a+=Tm.charAt(e[s]);return T(a.length===20,"nextPushId: Length should be 20."),a}}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MN{constructor(e,n,r,s){this.eventType=e,this.eventRegistration=n,this.snapshot=r,this.prevName=s}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+ke(this.snapshot.exportVal())}}class FN{constructor(e,n,r){this.eventRegistration=e,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UN{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return T(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qh{constructor(e,n,r,s){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=s}get key(){return G(this._path)?null:xh(this._path)}get ref(){return new Sn(this._repo,this._path)}get _queryIdentifier(){const e=mm(this._queryParams),n=mh(e);return n==="{}"?"default":n}get _queryObject(){return mm(this._queryParams)}isEqual(e){if(e=we(e),!(e instanceof qh))return!1;const n=this._repo===e._repo,r=Ux(this._path,e._path),s=this._queryIdentifier===e._queryIdentifier;return n&&r&&s}toJSON(){return this.toString()}toString(){return this._repo.toString()+jj(this._path)}}class Sn extends qh{constructor(e,n){super(e,n,new Ch,!1)}get parent(){const e=Fx(this._path);return e===null?null:new Sn(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class to{constructor(e,n,r){this._node=e,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new Z(e),r=no(this.ref,e);return new to(this._node.getChild(n),r,ye)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,s)=>e(new to(s,no(this.ref,r),ye)))}hasChild(e){const n=new Z(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function M(t,e){return t=we(t),t._checkNotDeleted("ref"),e!==void 0?no(t._root,e):t._root}function no(t,e){return t=we(t),K(t._path)===null?gN("child","path",e):w_("child","path",e),new Sn(t._repo,ge(t._path,e))}function Kh(t,e){t=we(t),zh("push",t._path),__("push",e,t._path,!0);const n=S_(t._repo),r=LN(n),s=no(t,r),i=no(t,r);let a;return e!=null?a=De(i,e).then(()=>i):a=Promise.resolve(i),s.then=a.then.bind(a),s.catch=a.then.bind(a,void 0),s}function Fl(t){return zh("remove",t._path),De(t,null)}function De(t,e){t=we(t),zh("set",t._path),__("set",e,t._path,!1);const n=new lo;return jN(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}function zs(t,e){mN("update",e,t._path);const n=new lo;return IN(t._repo,t._path,e,n.wrapCallback(()=>{})),n.promise}function oe(t){t=we(t);const e=new UN(()=>{}),n=new Yh(e);return bN(t._repo,t,n).then(r=>new to(r,new Sn(t._repo,t._path),t._queryParams.getIndex()))}class Yh{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const r=n._queryParams.getIndex();return new MN("value",this,new to(e.snapshotNode,new Sn(n._repo,n._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new FN(this,e,n):null}matches(e){return e instanceof Yh?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}UI(Sn);VI(Sn);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BN="FIREBASE_DATABASE_EMULATOR_HOST",Xu={};let zN=!1;function WN(t,e,n,r){const s=e.lastIndexOf(":"),i=e.substring(0,s),a=Dr(i);t.repoInfo_=new Nx(e,a,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0,n),r&&(t.authTokenProvider_=r)}function $N(t,e,n,r,s){let i=r||t.options.databaseURL;i===void 0&&(t.options.projectId||vn("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Ae("Using default host for project ",t.options.projectId),i=`${t.options.projectId}-default-rtdb.firebaseio.com`);let a=Nm(i,s),l=a.repoInfo,c;typeof process<"u"&&Jp&&(c=Jp[BN]),c?(i=`http://${c}?ns=${l.namespace}`,a=Nm(i,s),l=a.repoInfo):a.repoInfo.secure;const u=new tj(t.name,t.options,e);yN("Invalid Firebase Database URL",a),G(a.path)||vn("Database URL must point to the root of a Firebase Database (not including a child path).");const h=HN(l,t,u,new ej(t,n));return new GN(h,t)}function VN(t,e){const n=Xu[e];(!n||n[t.key]!==t)&&vn(`Database ${e}(${t.repoInfo_}) has already been deleted.`),TN(t),delete n[t.key]}function HN(t,e,n,r){let s=Xu[e.name];s||(s={},Xu[e.name]=s);let i=s[t.toURLString()];return i&&vn("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new CN(t,zN,n,r),s[t.toURLString()]=i,i}class GN{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(EN(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Sn(this._repo,Q())),this._rootInternal}_delete(){return this._rootInternal!==null&&(VN(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&vn("Cannot call "+e+" on a deleted database.")}}function qN(t=kl(),e){const n=ir(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const r=wv("database");r&&KN(n,...r)}return n}function KN(t,e,n,r={}){t=we(t),t._checkNotDeleted("useEmulator");const s=`${e}:${n}`,i=t._repoInternal;if(t._instanceStarted){if(s===t._repoInternal.repoInfo_.host&&Jn(r,i.repoInfo_.emulatorOptions))return;vn("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let a;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&vn('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new sa(sa.OWNER);else if(r.mockUserToken){const l=typeof r.mockUserToken=="string"?r.mockUserToken:Ev(r.mockUserToken,t.app.options.projectId);a=new sa(l)}Dr(e)&&(eh(e),th("Database",!0)),WN(i,s,r,a)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YN(t){Fb(Mr),Ft(new wt("database",(e,{instanceIdentifier:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return $N(r,s,i,n)},"PUBLIC").setMultipleInstances(!0)),rt(Xp,Zp,t),rt(Xp,Zp,"esm2020")}un.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};un.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};YN();var QN="firebase",JN="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */rt(QN,JN,"app");const j_="@firebase/installations",Qh="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I_=1e4,N_=`w:${Qh}`,T_="FIS_v2",XN="https://firebaseinstallations.googleapis.com/v1",ZN=60*60*1e3,eT="installations",tT="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nT={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Rr=new Lr(eT,tT,nT);function R_(t){return t instanceof Ut&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P_({projectId:t}){return`${XN}/projects/${t}/installations`}function A_(t){return{token:t.token,requestStatus:2,expiresIn:sT(t.expiresIn),creationTime:Date.now()}}async function O_(t,e){const r=(await e.json()).error;return Rr.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function D_({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function rT(t,{refreshToken:e}){const n=D_(t);return n.append("Authorization",iT(e)),n}async function L_(t){const e=await t();return e.status>=500&&e.status<600?t():e}function sT(t){return Number(t.replace("s","000"))}function iT(t){return`${T_} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oT({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=P_(t),s=D_(t),i=e.getImmediate({optional:!0});if(i){const u=await i.getHeartbeatsHeader();u&&s.append("x-firebase-client",u)}const a={fid:n,authVersion:T_,appId:t.appId,sdkVersion:N_},l={method:"POST",headers:s,body:JSON.stringify(a)},c=await L_(()=>fetch(r,l));if(c.ok){const u=await c.json();return{fid:u.fid||n,registrationStatus:2,refreshToken:u.refreshToken,authToken:A_(u.authToken)}}else throw await O_("Create Installation",c)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M_(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aT(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lT=/^[cdef][\w-]{21}$/,Zu="";function cT(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=uT(t);return lT.test(n)?n:Zu}catch{return Zu}}function uT(t){return aT(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ul(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F_=new Map;function U_(t,e){const n=Ul(t);B_(n,e),dT(n,e)}function B_(t,e){const n=F_.get(t);if(n)for(const r of n)r(e)}function dT(t,e){const n=hT();n&&n.postMessage({key:t,fid:e}),fT()}let vr=null;function hT(){return!vr&&"BroadcastChannel"in self&&(vr=new BroadcastChannel("[Firebase] FID Change"),vr.onmessage=t=>{B_(t.data.key,t.data.fid)}),vr}function fT(){F_.size===0&&vr&&(vr.close(),vr=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pT="firebase-installations-database",mT=1,Pr="firebase-installations-store";let Nc=null;function Jh(){return Nc||(Nc=Pv(pT,mT,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Pr)}}})),Nc}async function Za(t,e){const n=Ul(t),s=(await Jh()).transaction(Pr,"readwrite"),i=s.objectStore(Pr),a=await i.get(n);return await i.put(e,n),await s.done,(!a||a.fid!==e.fid)&&U_(t,e.fid),e}async function z_(t){const e=Ul(t),r=(await Jh()).transaction(Pr,"readwrite");await r.objectStore(Pr).delete(e),await r.done}async function Bl(t,e){const n=Ul(t),s=(await Jh()).transaction(Pr,"readwrite"),i=s.objectStore(Pr),a=await i.get(n),l=e(a);return l===void 0?await i.delete(n):await i.put(l,n),await s.done,l&&(!a||a.fid!==l.fid)&&U_(t,l.fid),l}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xh(t){let e;const n=await Bl(t.appConfig,r=>{const s=gT(r),i=yT(t,s);return e=i.registrationPromise,i.installationEntry});return n.fid===Zu?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function gT(t){const e=t||{fid:cT(),registrationStatus:0};return W_(e)}function yT(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(Rr.create("app-offline"));return{installationEntry:e,registrationPromise:s}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=vT(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:xT(t)}:{installationEntry:e}}async function vT(t,e){try{const n=await oT(t,e);return Za(t.appConfig,n)}catch(n){throw R_(n)&&n.customData.serverCode===409?await z_(t.appConfig):await Za(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function xT(t){let e=await Rm(t.appConfig);for(;e.registrationStatus===1;)await M_(100),e=await Rm(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await Xh(t);return r||n}return e}function Rm(t){return Bl(t,e=>{if(!e)throw Rr.create("installation-not-found");return W_(e)})}function W_(t){return _T(t)?{fid:t.fid,registrationStatus:0}:t}function _T(t){return t.registrationStatus===1&&t.registrationTime+I_<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wT({appConfig:t,heartbeatServiceProvider:e},n){const r=ST(t,n),s=rT(t,n),i=e.getImmediate({optional:!0});if(i){const u=await i.getHeartbeatsHeader();u&&s.append("x-firebase-client",u)}const a={installation:{sdkVersion:N_,appId:t.appId}},l={method:"POST",headers:s,body:JSON.stringify(a)},c=await L_(()=>fetch(r,l));if(c.ok){const u=await c.json();return A_(u)}else throw await O_("Generate Auth Token",c)}function ST(t,{fid:e}){return`${P_(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zh(t,e=!1){let n;const r=await Bl(t.appConfig,i=>{if(!$_(i))throw Rr.create("not-registered");const a=i.authToken;if(!e&&kT(a))return i;if(a.requestStatus===1)return n=CT(t,e),i;{if(!navigator.onLine)throw Rr.create("app-offline");const l=jT(i);return n=ET(t,l),l}});return n?await n:r.authToken}async function CT(t,e){let n=await Pm(t.appConfig);for(;n.authToken.requestStatus===1;)await M_(100),n=await Pm(t.appConfig);const r=n.authToken;return r.requestStatus===0?Zh(t,e):r}function Pm(t){return Bl(t,e=>{if(!$_(e))throw Rr.create("not-registered");const n=e.authToken;return IT(n)?{...e,authToken:{requestStatus:0}}:e})}async function ET(t,e){try{const n=await wT(t,e),r={...e,authToken:n};return await Za(t.appConfig,r),n}catch(n){if(R_(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await z_(t.appConfig);else{const r={...e,authToken:{requestStatus:0}};await Za(t.appConfig,r)}throw n}}function $_(t){return t!==void 0&&t.registrationStatus===2}function kT(t){return t.requestStatus===2&&!bT(t)}function bT(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+ZN}function jT(t){const e={requestStatus:1,requestTime:Date.now()};return{...t,authToken:e}}function IT(t){return t.requestStatus===1&&t.requestTime+I_<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NT(t){const e=t,{installationEntry:n,registrationPromise:r}=await Xh(e);return r?r.catch(console.error):Zh(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TT(t,e=!1){const n=t;return await RT(n),(await Zh(n,e)).token}async function RT(t){const{registrationPromise:e}=await Xh(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PT(t){if(!t||!t.options)throw Tc("App Configuration");if(!t.name)throw Tc("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw Tc(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function Tc(t){return Rr.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V_="installations",AT="installations-internal",OT=t=>{const e=t.getProvider("app").getImmediate(),n=PT(e),r=ir(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},DT=t=>{const e=t.getProvider("app").getImmediate(),n=ir(e,V_).getImmediate();return{getId:()=>NT(n),getToken:s=>TT(n,s)}};function LT(){Ft(new wt(V_,OT,"PUBLIC")),Ft(new wt(AT,DT,"PRIVATE"))}LT();rt(j_,Qh);rt(j_,Qh,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const el="analytics",MT="firebase_id",FT="origin",UT=60*1e3,BT="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",ef="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ge=new El("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zT={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},ct=new Lr("analytics","Analytics",zT);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WT(t){if(!t.startsWith(ef)){const e=ct.create("invalid-gtag-resource",{gtagURL:t});return Ge.warn(e.message),""}return t}function H_(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function $T(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function VT(t,e){const n=$T("firebase-js-sdk-policy",{createScriptURL:WT}),r=document.createElement("script"),s=`${ef}?l=${t}&id=${e}`;r.src=n?n==null?void 0:n.createScriptURL(s):s,r.async=!0,document.head.appendChild(r)}function HT(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function GT(t,e,n,r,s,i){const a=r[s];try{if(a)await e[a];else{const c=(await H_(n)).find(u=>u.measurementId===s);c&&await e[c.appId]}}catch(l){Ge.error(l)}t("config",s,i)}async function qT(t,e,n,r,s){try{let i=[];if(s&&s.send_to){let a=s.send_to;Array.isArray(a)||(a=[a]);const l=await H_(n);for(const c of a){const u=l.find(f=>f.measurementId===c),h=u&&e[u.appId];if(h)i.push(h);else{i=[];break}}}i.length===0&&(i=Object.values(e)),await Promise.all(i),t("event",r,s||{})}catch(i){Ge.error(i)}}function KT(t,e,n,r){async function s(i,...a){try{if(i==="event"){const[l,c]=a;await qT(t,e,n,l,c)}else if(i==="config"){const[l,c]=a;await GT(t,e,n,r,l,c)}else if(i==="consent"){const[l,c]=a;t("consent",l,c)}else if(i==="get"){const[l,c,u]=a;t("get",l,c,u)}else if(i==="set"){const[l]=a;t("set",l)}else t(i,...a)}catch(l){Ge.error(l)}}return s}function YT(t,e,n,r,s){let i=function(...a){window[r].push(arguments)};return window[s]&&typeof window[s]=="function"&&(i=window[s]),window[s]=KT(i,t,e,n),{gtagCore:i,wrappedGtag:window[s]}}function QT(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(ef)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JT=30,XT=1e3;class ZT{constructor(e={},n=XT){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const G_=new ZT;function eR(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function tR(t){var a;const{appId:e,apiKey:n}=t,r={method:"GET",headers:eR(n)},s=BT.replace("{app-id}",e),i=await fetch(s,r);if(i.status!==200&&i.status!==304){let l="";try{const c=await i.json();(a=c.error)!=null&&a.message&&(l=c.error.message)}catch{}throw ct.create("config-fetch-failed",{httpStatus:i.status,responseMessage:l})}return i.json()}async function nR(t,e=G_,n){const{appId:r,apiKey:s,measurementId:i}=t.options;if(!r)throw ct.create("no-app-id");if(!s){if(i)return{measurementId:i,appId:r};throw ct.create("no-api-key")}const a=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},l=new iR;return setTimeout(async()=>{l.abort()},UT),q_({appId:r,apiKey:s,measurementId:i},a,l,e)}async function q_(t,{throttleEndTimeMillis:e,backoffCount:n},r,s=G_){var l;const{appId:i,measurementId:a}=t;try{await rR(r,e)}catch(c){if(a)return Ge.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${c==null?void 0:c.message}]`),{appId:i,measurementId:a};throw c}try{const c=await tR(t);return s.deleteThrottleMetadata(i),c}catch(c){const u=c;if(!sR(u)){if(s.deleteThrottleMetadata(i),a)return Ge.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${u==null?void 0:u.message}]`),{appId:i,measurementId:a};throw c}const h=Number((l=u==null?void 0:u.customData)==null?void 0:l.httpStatus)===503?Cp(n,s.intervalMillis,JT):Cp(n,s.intervalMillis),f={throttleEndTimeMillis:Date.now()+h,backoffCount:n+1};return s.setThrottleMetadata(i,f),Ge.debug(`Calling attemptFetch again in ${h} millis`),q_(t,f,r,s)}}function rR(t,e){return new Promise((n,r)=>{const s=Math.max(e-Date.now(),0),i=setTimeout(n,s);t.addEventListener(()=>{clearTimeout(i),r(ct.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function sR(t){if(!(t instanceof Ut)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class iR{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function oR(t,e,n,r,s){if(s&&s.global){t("event",n,r);return}else{const i=await e,a={...r,send_to:i};t("event",n,a)}}async function aR(t,e,n,r){if(r&&r.global){const s={};for(const i of Object.keys(n))s[`user_properties.${i}`]=n[i];return t("set",s),Promise.resolve()}else{const s=await e;t("config",s,{update:!0,user_properties:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lR(){if(jv())try{await Iv()}catch(t){return Ge.warn(ct.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return Ge.warn(ct.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function cR(t,e,n,r,s,i,a){const l=nR(t);l.then(d=>{n[d.measurementId]=d.appId,t.options.measurementId&&d.measurementId!==t.options.measurementId&&Ge.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${d.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(d=>Ge.error(d)),e.push(l);const c=lR().then(d=>{if(d)return r.getId()}),[u,h]=await Promise.all([l,c]);QT(i)||VT(i,u.measurementId),s("js",new Date);const f=(a==null?void 0:a.config)??{};return f[FT]="firebase",f.update=!0,h!=null&&(f[MT]=h),s("config",u.measurementId,f),u.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uR{constructor(e){this.app=e}_delete(){return delete ms[this.app.options.appId],Promise.resolve()}}let ms={},Am=[];const Om={};let Rc="dataLayer",dR="gtag",Dm,tf,Lm=!1;function hR(){const t=[];if(kv()&&t.push("This is a browser extension environment."),eC()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,s)=>`(${s+1}) ${r}`).join(" "),n=ct.create("invalid-analytics-context",{errorInfo:e});Ge.warn(n.message)}}function fR(t,e,n){hR();const r=t.options.appId;if(!r)throw ct.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)Ge.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw ct.create("no-api-key");if(ms[r]!=null)throw ct.create("already-exists",{id:r});if(!Lm){HT(Rc);const{wrappedGtag:i,gtagCore:a}=YT(ms,Am,Om,Rc,dR);tf=i,Dm=a,Lm=!0}return ms[r]=cR(t,Am,Om,e,Dm,Rc,n),new uR(t)}function pR(t=kl()){t=we(t);const e=ir(t,el);return e.isInitialized()?e.getImmediate():mR(t)}function mR(t,e={}){const n=ir(t,el);if(n.isInitialized()){const s=n.getImmediate();if(Jn(e,n.getOptions()))return s;throw ct.create("already-initialized")}return n.initialize({options:e})}function gR(t,e,n){t=we(t),aR(tf,ms[t.app.options.appId],e,n).catch(r=>Ge.error(r))}function yR(t,e,n,r){t=we(t),oR(tf,ms[t.app.options.appId],e,n,r).catch(s=>Ge.error(s))}const Mm="@firebase/analytics",Fm="0.10.19";function vR(){Ft(new wt(el,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("installations-internal").getImmediate();return fR(r,s,n)},"PUBLIC")),Ft(new wt("analytics-internal",t,"PRIVATE")),rt(Mm,Fm),rt(Mm,Fm,"esm2020");function t(e){try{const n=e.getProvider(el).getImmediate();return{logEvent:(r,s,i)=>yR(n,r,s,i),setUserProperties:(r,s)=>gR(n,r,s)}}catch(n){throw ct.create("interop-component-reg-failed",{reason:n})}}}vR();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K_="firebasestorage.googleapis.com",xR="storageBucket",_R=2*60*1e3,wR=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt extends Ut{constructor(e,n,r=0){super(Pc(e),`Firebase Storage: ${n} (${Pc(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Qt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Pc(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var qt;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(qt||(qt={}));function Pc(t){return"storage/"+t}function SR(){const t="An unknown error occurred, please check the error payload for server response.";return new Qt(qt.UNKNOWN,t)}function CR(){return new Qt(qt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function ER(){return new Qt(qt.CANCELED,"User canceled the upload/download.")}function kR(t){return new Qt(qt.INVALID_URL,"Invalid URL '"+t+"'.")}function bR(t){return new Qt(qt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function Um(t){return new Qt(qt.INVALID_ARGUMENT,t)}function Y_(){return new Qt(qt.APP_DELETED,"The Firebase app was deleted.")}function jR(t){return new Qt(qt.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pt{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Pt.makeFromUrl(e,n)}catch{return new Pt(e,"")}if(r.path==="")return r;throw bR(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(v){v.path.charAt(v.path.length-1)==="/"&&(v.path_=v.path_.slice(0,-1))}const a="(/(.*))?$",l=new RegExp("^gs://"+s+a,"i"),c={bucket:1,path:3};function u(v){v.path_=decodeURIComponent(v.path)}const h="v[A-Za-z0-9_]+",f=n.replace(/[.]/g,"\\."),d="(/([^?#]*).*)?$",x=new RegExp(`^https?://${f}/${h}/b/${s}/o${d}`,"i"),w={bucket:1,path:3},p=n===K_?"(?:storage.googleapis.com|storage.cloud.google.com)":n,_="([^?#]*)",m=new RegExp(`^https?://${p}/${s}/${_}`,"i"),y=[{regex:l,indices:c,postModify:i},{regex:x,indices:w,postModify:u},{regex:m,indices:{bucket:1,path:2},postModify:u}];for(let v=0;v<y.length;v++){const C=y[v],E=C.regex.exec(e);if(E){const b=E[C.indices.bucket];let I=E[C.indices.path];I||(I=""),r=new Pt(b,I),C.postModify(r);break}}if(r==null)throw kR(e);return r}}class IR{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NR(t,e,n){let r=1,s=null,i=null,a=!1,l=0;function c(){return l===2}let u=!1;function h(..._){u||(u=!0,e.apply(null,_))}function f(_){s=setTimeout(()=>{s=null,t(x,c())},_)}function d(){i&&clearTimeout(i)}function x(_,...m){if(u){d();return}if(_){d(),h.call(null,_,...m);return}if(c()||a){d(),h.call(null,_,...m);return}r<64&&(r*=2);let y;l===1?(l=2,y=0):y=(r+Math.random())*1e3,f(y)}let w=!1;function p(_){w||(w=!0,d(),!u&&(s!==null?(_||(l=2),clearTimeout(s),f(0)):_||(l=1)))}return f(0),i=setTimeout(()=>{a=!0,p(!0)},n),p}function TR(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RR(t){return t!==void 0}function Bm(t,e,n,r){if(r<e)throw Um(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw Um(`Invalid value for '${t}'. Expected ${n} or less.`)}function PR(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var tl;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(tl||(tl={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AR(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OR{constructor(e,n,r,s,i,a,l,c,u,h,f,d=!0,x=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=a,this.callback_=l,this.errorCallback_=c,this.timeout_=u,this.progressCallback_=h,this.connectionFactory_=f,this.retry=d,this.isUsingEmulator=x,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((w,p)=>{this.resolve_=w,this.reject_=p,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new zo(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const a=l=>{const c=l.loaded,u=l.lengthComputable?l.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,u)};this.progressCallback_!==null&&i.addUploadProgressListener(a),i.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(a),this.pendingConnection_=null;const l=i.getErrorCode()===tl.NO_ERROR,c=i.getStatus();if(!l||AR(c,this.additionalRetryCodes_)&&this.retry){const h=i.getErrorCode()===tl.ABORT;r(!1,new zo(!1,null,h));return}const u=this.successCodes_.indexOf(c)!==-1;r(!0,new zo(u,i))})},n=(r,s)=>{const i=this.resolve_,a=this.reject_,l=s.connection;if(s.wasSuccessCode)try{const c=this.callback_(l,l.getResponse());RR(c)?i(c):i()}catch(c){a(c)}else if(l!==null){const c=SR();c.serverResponse=l.getErrorText(),this.errorCallback_?a(this.errorCallback_(l,c)):a(c)}else if(s.canceled){const c=this.appDelete_?Y_():ER();a(c)}else{const c=CR();a(c)}};this.canceled_?n(!1,new zo(!1,null,!0)):this.backoffId_=NR(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&TR(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class zo{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function DR(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function LR(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function MR(t,e){e&&(t["X-Firebase-GMPID"]=e)}function FR(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function UR(t,e,n,r,s,i,a=!0,l=!1){const c=PR(t.urlParams),u=t.url+c,h=Object.assign({},t.headers);return MR(h,e),DR(h,n),LR(h,i),FR(h,r),new OR(u,t.method,h,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,a,l)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BR(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function zR(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nl{constructor(e,n){this._service=e,n instanceof Pt?this._location=n:this._location=Pt.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new nl(e,n)}get root(){const e=new Pt(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return zR(this._location.path)}get storage(){return this._service}get parent(){const e=BR(this._location.path);if(e===null)return null;const n=new Pt(this._location.bucket,e);return new nl(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw jR(e)}}function zm(t,e){const n=e==null?void 0:e[xR];return n==null?null:Pt.makeFromBucketSpec(n,t)}function WR(t,e,n,r={}){t.host=`${e}:${n}`;const s=Dr(e);s&&(eh(`https://${t.host}/b`),th("Storage",!0)),t._isUsingEmulator=!0,t._protocol=s?"https":"http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:Ev(i,t.app.options.projectId))}class $R{constructor(e,n,r,s,i,a=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._isUsingEmulator=a,this._bucket=null,this._host=K_,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=_R,this._maxUploadRetryTime=wR,this._requests=new Set,s!=null?this._bucket=Pt.makeFromBucketSpec(s,this._host):this._bucket=zm(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Pt.makeFromBucketSpec(this._url,e):this._bucket=zm(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Bm("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Bm("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(Je(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new nl(this,e)}_makeRequest(e,n,r,s,i=!0){if(this._deleted)return new IR(Y_());{const a=UR(e,this._appId,r,s,n,this._firebaseVersion,i,this._isUsingEmulator);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const Wm="@firebase/storage",$m="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q_="storage";function VR(t=kl(),e){t=we(t);const r=ir(t,Q_).getImmediate({identifier:e}),s=wv("storage");return s&&HR(r,...s),r}function HR(t,e,n,r={}){WR(t,e,n,r)}function GR(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new $R(n,r,s,e,Mr)}function qR(){Ft(new wt(Q_,GR,"PUBLIC").setMultipleInstances(!0)),rt(Wm,$m,""),rt(Wm,$m,"esm2020")}qR();const KR={apiKey:"AIzaSyBlqNGn_Q2A-9vSM95O7pmtQgw-tBMudB8",authDomain:"driftenterprises-official.firebaseapp.com",databaseURL:"https://driftenterprises-official-default-rtdb.firebaseio.com",projectId:"driftenterprises-official",storageBucket:"driftenterprises-official.firebasestorage.app",messagingSenderId:"103758286150",appId:"1:103758286150:web:957bdd5eba9f20198ca947",measurementId:"G-4PT26S55P3"},zl=Av(KR);pR(zl);const ti=Lb(zl),F=qN(zl);VR(zl);const J_=S.createContext();function YR({children:t}){const[e,n]=S.useState(null),[r,s]=S.useState(!0),[i,a]=S.useState(null);S.useEffect(()=>{let p=null;const _=Ek(ti,async m=>{if(p&&(clearTimeout(p),p=null),m){if(i!==m.uid)try{const g=M(F,`users/${m.uid}`),y=await oe(g);if(y.exists()){const v=y.val();n({uid:m.uid,email:m.email,username:v.username||m.email.split("@")[0],fullName:v.fullName||m.displayName||"User",role:v.role||"customer"})}else{const v={email:m.email,username:m.email.split("@")[0],fullName:m.displayName||"User",role:"customer",createdAt:Date.now()};await De(g,v),n({uid:m.uid,email:m.email,username:v.username,fullName:v.fullName,role:v.role})}a(m.uid)}catch(g){console.error("Error fetching user data:",g),n(null),a(null)}s(!1)}else p=setTimeout(()=>{n(null),a(null),s(!1)},300)});return()=>{_(),p&&clearTimeout(p)}},[i]);const w={user:e,loading:r,login:async(p,_)=>{s(!0);try{await wk(ti,p,_)}catch(m){throw s(!1),m}},register:async(p,_,m)=>{s(!0);try{const y=(await _k(ti,p,_)).user,v=M(F,`users/${y.uid}`);await De(v,{email:p,username:p.split("@")[0],fullName:m||"User",role:"customer",createdAt:Date.now()})}catch(g){throw s(!1),g}},loginWithGoogle:async()=>{s(!0);try{const p=new tn,m=(await Hk(ti,p)).user,g=M(F,`users/${m.uid}`);(await oe(g)).exists()||await De(g,{email:m.email,username:m.email.split("@")[0],fullName:m.displayName||"User",role:"customer",createdAt:Date.now()})}catch(p){throw s(!1),p}},logout:async()=>{try{await kk(ti),n(null),a(null)}catch(p){throw console.error("Logout error:",p),p}},isAuthenticated:()=>e!==null,isAdmin:()=>e&&e.role==="admin",hasRole:p=>e&&e.role===p};return o.jsx(J_.Provider,{value:w,children:t})}function st(){const t=S.useContext(J_);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t}const X_=S.createContext(),Vm="drift_enterprises_cart",Hm="drift_enterprises_orders";function Gm(t,e){if(typeof window>"u")return e;try{const n=window.localStorage.getItem(t);return n?JSON.parse(n):e}catch{return e}}function QR({children:t}){const[e,n]=S.useState(()=>Gm(Vm,[])),[r,s]=S.useState(()=>Gm(Hm,[]));S.useEffect(()=>{typeof window>"u"||window.localStorage.setItem(Vm,JSON.stringify(e))},[e]),S.useEffect(()=>{typeof window>"u"||window.localStorage.setItem(Hm,JSON.stringify(r))},[r]);const i=p=>{n(_=>_.find(g=>g.id===p.id)?_.map(g=>g.id===p.id?{...g,quantity:g.quantity+1}:g):[..._,{id:p.id,title:p.title,price:p.price,image:p.image,quantity:1}])},a=p=>n(_=>_.filter(m=>m.id!==p)),l=(p,_)=>{if(_<=0){a(p);return}n(m=>m.map(g=>g.id===p?{...g,quantity:_}:g))},c=()=>n([]),u=()=>{if(e.length===0)return;const p=e.reduce((y,v)=>y+v.price*v.quantity,0),_=p*.18,m=p+_,g={id:`ORD-${Date.now()}`,createdAt:new Date().toISOString(),total:m,subtotal:p,tax:_,items:e,status:"pending",shippingAddress:null};return s(y=>[g,...y]),n([]),g},{totalItems:h,subtotal:f,tax:d,total:x}=S.useMemo(()=>{const p=e.reduce((y,v)=>y+v.quantity,0),_=e.reduce((y,v)=>y+v.price*v.quantity,0),m=_*.18,g=_+m;return{totalItems:p,subtotal:_,tax:m,total:g}},[e]),w={items:e,orders:r,addItem:i,removeItem:a,updateQuantity:l,clearCart:c,placeOrder:u,totalItems:h,subtotal:f,tax:d,total:x};return o.jsx(X_.Provider,{value:w,children:t})}function _o(){const t=S.useContext(X_);if(!t)throw new Error("useCart must be used within a CartProvider");return t}const JR=t=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t),XR=t=>/^[0-9]{10}$/.test(t.replace(/[\D]/g,"")),ZR=t=>/^[0-9]{6}$/.test(t.replace(/[\D]/g,"")),eP=(t,e)=>{for(const n of e)if(!t[n]||t[n].toString().trim()==="")return{valid:!1,error:`${n} is required`};return{valid:!0,error:null}};function Ac({children:t,requireAdmin:e=!1}){const{user:n,isAdmin:r,isAuthenticated:s,loading:i}=st(),a=wn();return i?o.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"60vh",flexDirection:"column",gap:"1rem"},children:[o.jsx("div",{style:{fontSize:"3rem",animation:"spin 1s linear infinite"},children:""}),o.jsx("p",{style:{color:"#666"},children:"Loading..."})]}):s()?e&&!r()?o.jsx("div",{className:"page-shell",style:{maxWidth:"800px",textAlign:"center",margin:"0 auto"},children:o.jsxs("div",{style:{padding:"4rem 2rem"},children:[o.jsx("div",{style:{fontSize:"6rem",marginBottom:"1rem"},children:""}),o.jsx("h1",{style:{fontSize:"2.5rem",marginBottom:"1rem",color:"#1a1a1a"},children:"Access Denied"}),o.jsxs("p",{style:{fontSize:"1.2rem",color:"#666",marginBottom:"2rem",lineHeight:"1.6"},children:["You don't have permission to access this page.",o.jsx("br",{}),"This area is restricted to administrators only."]}),o.jsxs("div",{style:{background:"linear-gradient(135deg, #f9f9f9 0%, #ffffff 100%)",padding:"2rem",borderRadius:"20px",marginBottom:"2rem",border:"1px solid #e8e8e8"},children:[o.jsxs("p",{style:{color:"#666",marginBottom:"1rem"},children:["Logged in as: ",o.jsx("strong",{children:(n==null?void 0:n.fullName)||(n==null?void 0:n.username)})]}),o.jsxs("p",{style:{color:"#666"},children:["Role: ",o.jsx("span",{style:{background:"#e71d36",color:"white",padding:"0.25rem 0.75rem",borderRadius:"12px",fontSize:"0.85rem",fontWeight:"700"},children:n==null?void 0:n.role})]})]}),o.jsx(R,{to:"/",style:{display:"inline-block",padding:"0.75rem 2rem",background:"#e71d36",color:"white",textDecoration:"none",borderRadius:"8px",fontWeight:"600"},children:" Back to Home"})]})}):t:o.jsx(_S,{to:"/login",state:{from:a},replace:!0})}const tP=({isOpen:t,isMobileOpen:e,onClose:n})=>{const{user:r,logout:s}=st(),i=sr(),a=async()=>{try{await s(),i("/login")}catch(u){console.error("Logout error:",u)}},l=[{id:"dashboard",title:"Dashboard",icon:"",path:"/admin",color:"#e71d36"},{id:"homepage",title:"Homepage Manager",icon:"",path:"/admin/homepage",color:"#e71d36"},{id:"products",title:"Product Management",icon:"",path:"/admin/products",color:"#e71d36"},{id:"stock",title:"Stock Management",icon:"",path:"/admin/stock",color:"#e71d36"},{id:"analytics",title:"Analytics",icon:"",path:"/admin/analytics",color:"#e71d36"},{id:"orders",title:"Order Management",icon:"",path:"/admin/orders",color:"#e71d36"},{id:"customers",title:"Customer Management",icon:"",path:"/admin/customers",color:"#e71d36"},{id:"reviews",title:"Reviews Management",icon:"",path:"/admin/reviews",color:"#e71d36"},{id:"revenue",title:"Revenue Management",icon:"",path:"/admin/revenue",color:"#e71d36"},{id:"activity",title:"Activity Logs",icon:"",path:"/admin/activity",color:"#e71d36"},{id:"settings",title:"Settings",icon:"",path:"/admin/settings",color:"#e71d36"}],c=()=>{window.innerWidth<=1024&&n()};return o.jsxs("aside",{className:`admin-sidebar ${t?"open":"closed"} ${e?"mobile-open":""}`,children:[o.jsx("div",{className:"sidebar-header",children:o.jsxs("div",{className:"admin-profile",children:[o.jsx("div",{className:"profile-avatar",children:o.jsx("span",{children:((r==null?void 0:r.fullName)||(r==null?void 0:r.email)||"A")[0].toUpperCase()})}),o.jsxs("div",{className:"profile-info",children:[o.jsx("h3",{children:(r==null?void 0:r.fullName)||"Admin"}),o.jsx("p",{children:(r==null?void 0:r.email)||"admin@drift.com"})]})]})}),o.jsx("nav",{className:"sidebar-nav",children:o.jsx("ul",{children:l.map(u=>o.jsx("li",{children:o.jsxs(DS,{to:u.path,end:u.path==="/admin",className:({isActive:h})=>h?"nav-item active":"nav-item",onClick:c,children:[o.jsx("span",{className:"nav-icon",children:u.icon}),o.jsx("span",{className:"nav-text",children:u.title})]})},u.id))})}),o.jsx("div",{className:"sidebar-footer",children:o.jsxs("button",{className:"logout-button",onClick:a,children:[o.jsx("span",{className:"nav-icon",children:""}),o.jsx("span",{className:"nav-text",children:"Logout"})]})})]})},nP=()=>{const[t,e]=S.useState(!0),[n,r]=S.useState(!1),s=()=>{r(!n)};return o.jsxs("div",{className:"admin-layout",children:[o.jsxs("div",{className:"admin-mobile-header",children:[o.jsxs("button",{className:"mobile-menu-toggle",onClick:s,children:[o.jsx("span",{}),o.jsx("span",{}),o.jsx("span",{})]}),o.jsx("h1",{children:"Admin Panel"})]}),o.jsx(tP,{isOpen:t,isMobileOpen:n,onClose:()=>r(!1)}),n&&o.jsx("div",{className:"mobile-overlay",onClick:()=>r(!1)}),o.jsx("div",{className:`admin-content ${t?"sidebar-open":"sidebar-closed"}`,children:o.jsx(wS,{})})]})};class rP extends sd.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,n){console.error("Error caught by boundary:",e,n)}render(){var e;return this.state.hasError?o.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"60vh",flexDirection:"column",padding:"2rem",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"3rem",marginBottom:"1rem"},children:""}),o.jsx("h1",{style:{fontSize:"2rem",marginBottom:"1rem"},children:"Oops! Something went wrong"}),o.jsx("p",{style:{color:"#666",marginBottom:"2rem",fontSize:"1rem"},children:((e=this.state.error)==null?void 0:e.message)||"An unexpected error occurred"}),o.jsx("button",{onClick:()=>window.location.reload(),style:{padding:"0.75rem 2rem",background:"#e71d36",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:"600",fontSize:"1rem"},children:" Reload Page"})]}):this.props.children}}function sP(){const{totalItems:t}=_o(),{user:e,isAuthenticated:n,logout:r,isAdmin:s}=st(),[i,a]=S.useState(null),l=sr(),c=S.useMemo(()=>n(),[e]),u=S.useMemo(()=>s(),[e]),h=()=>{r(),l("/")};return o.jsxs("header",{className:"amazon-header",children:[o.jsxs("div",{className:"amazon-header-top",children:[o.jsx(R,{to:"/",className:"amazon-logo",children:o.jsxs("div",{className:"logo-content",children:[o.jsx("img",{src:"/assets/logo.png",alt:"DRIFT ENTERPRISES Logo",style:{height:"45px"}}),o.jsxs("div",{className:"logo-text",children:[o.jsx("div",{className:"logo-main",children:"DRIFT"}),o.jsx("div",{className:"logo-sub",children:"ENTERPRISES"})]})]})}),o.jsxs("form",{className:"amazon-search",onSubmit:f=>f.preventDefault(),children:[o.jsxs("select",{className:"amazon-search-category",defaultValue:"all",children:[o.jsx("option",{value:"all",children:"All"}),o.jsx("option",{value:"electronics",children:"Electronics"}),o.jsx("option",{value:"mobiles",children:"Mobiles"}),o.jsx("option",{value:"appliances",children:"Appliances"}),o.jsx("option",{value:"tv",children:"TV"})]}),o.jsx("input",{className:"amazon-search-input",placeholder:"Search for products, brands and more..."}),o.jsx("button",{type:"submit",className:"amazon-search-button",children:""})]}),o.jsxs("nav",{className:"amazon-header-links",children:[u&&o.jsxs(R,{to:"/admin/products",className:"amazon-header-link admin-link",children:[o.jsx("span",{className:"icon",children:""}),o.jsx("span",{className:"text",children:"Admin"})]}),c?o.jsxs(o.Fragment,{children:[o.jsxs(R,{to:"/account",className:"amazon-header-link",children:[o.jsx("span",{className:"icon",children:""}),o.jsx("span",{className:"text",children:(e==null?void 0:e.username)||"Account"})]}),o.jsxs("button",{onClick:h,className:"amazon-header-link logout-btn",style:{background:"none",border:"none",cursor:"pointer",color:"inherit",font:"inherit",padding:"0"},children:[o.jsx("span",{className:"icon",children:""}),o.jsx("span",{className:"text",children:"Logout"})]})]}):o.jsxs(R,{to:"/login",className:"amazon-header-link",children:[o.jsx("span",{className:"icon",children:""}),o.jsx("span",{className:"text",children:"Sign In"})]}),u?o.jsxs(R,{to:"/admin/orders",className:"amazon-header-link",children:[o.jsx("span",{className:"icon",children:""}),o.jsx("span",{className:"text",children:"Orders"})]}):o.jsxs(R,{to:"/orders",className:"amazon-header-link",children:[o.jsx("span",{className:"icon",children:""}),o.jsx("span",{className:"text",children:"Orders"})]}),o.jsxs(R,{to:"/cart",className:"amazon-header-cart",children:[o.jsx("span",{className:"cart-icon",children:""}),o.jsx("span",{className:"cart-count",children:t})]})]})]}),o.jsx("div",{className:"amazon-header-bottom",children:o.jsxs("nav",{className:"amazon-categories",children:[o.jsxs("div",{className:"category-group",onMouseEnter:()=>a("appliances"),onMouseLeave:()=>a(null),children:[o.jsx("div",{className:"category-header",children:"Appliances"}),o.jsxs("div",{className:`category-items ${i==="appliances"?"active":""}`,children:[o.jsx(R,{to:"/products?category=appliances&sub=refrigerator",className:"category-link",children:"Refrigerator"}),o.jsx(R,{to:"/products?category=appliances&sub=air-conditioner",className:"category-link",children:"Air Conditioner"})]})]}),o.jsxs("div",{className:"category-group",onMouseEnter:()=>a("mobiles"),onMouseLeave:()=>a(null),children:[o.jsx("div",{className:"category-header",children:"Mobiles"}),o.jsxs("div",{className:`category-items ${i==="mobiles"?"active":""}`,children:[o.jsx(R,{to:"/products?category=mobiles&sub=apple",className:"category-link",children:"Apple"}),o.jsx(R,{to:"/products?category=mobiles&sub=poco",className:"category-link",children:"Poco"}),o.jsx(R,{to:"/products?category=mobiles&sub=vivo",className:"category-link",children:"Vivo"}),o.jsx(R,{to:"/products?category=mobiles&sub=oppo",className:"category-link",children:"Oppo"}),o.jsx(R,{to:"/products?category=mobiles&sub=realme",className:"category-link",children:"Realme"}),o.jsx(R,{to:"/products?category=mobiles&sub=oneplus",className:"category-link",children:"OnePlus"}),o.jsx(R,{to:"/products?category=mobiles&sub=motorola",className:"category-link",children:"Motorola"})]})]}),o.jsxs("div",{className:"category-group",onMouseEnter:()=>a("electronics"),onMouseLeave:()=>a(null),children:[o.jsx("div",{className:"category-header",children:"Electronics"}),o.jsxs("div",{className:`category-items ${i==="electronics"?"active":""}`,children:[o.jsx(R,{to:"/products?category=electronics&sub=home-theater",className:"category-link",children:"Home Theater"}),o.jsx(R,{to:"/products?category=electronics&sub=sound-bar",className:"category-link",children:"Sound Bar"})]})]}),o.jsxs("div",{className:"category-group",onMouseEnter:()=>a("tv"),onMouseLeave:()=>a(null),children:[o.jsx("div",{className:"category-header",children:"TV"}),o.jsxs("div",{className:`category-items ${i==="tv"?"active":""}`,children:[o.jsx(R,{to:"/products?category=tv&sub=toshiba",className:"category-link",children:"Toshiba"}),o.jsx(R,{to:"/products?category=tv&sub=mi",className:"category-link",children:"Mi"}),o.jsx(R,{to:"/products?category=tv&sub=realme",className:"category-link",children:"Realme"}),o.jsx(R,{to:"/products?category=tv&sub=samsung",className:"category-link",children:"Samsung"}),o.jsx(R,{to:"/products?category=tv&sub=lg",className:"category-link",children:"LG"}),o.jsx(R,{to:"/products?category=tv&sub=assembled-tv",className:"category-link",children:"Assembled TV"}),o.jsx(R,{to:"/products?category=tv&sub=tcl",className:"category-link",children:"TCL"})]})]}),o.jsxs("div",{className:"category-group",onMouseEnter:()=>a("trending"),onMouseLeave:()=>a(null),children:[o.jsx("div",{className:"category-header",children:"Trending"}),o.jsxs("div",{className:`category-items ${i==="trending"?"active":""}`,children:[o.jsx(R,{to:"/products?category=trending&sub=best-sellers",className:"category-link",children:"Best Sellers"}),o.jsx(R,{to:"/products?category=trending&sub=new-arrivals",className:"category-link",children:"New Arrivals"})]})]})]})})]})}const iP=t=>new Promise((e,n)=>{const r=new FileReader;r.readAsDataURL(t),r.onload=()=>e(r.result),r.onerror=s=>n(s)}),dn={async createProduct(t,e){try{const n=await this.processProductImages(e),r={...t,images:n,createdAt:Date.now(),updatedAt:Date.now()},s=M(F,"products"),i=Kh(s);return await De(i,r),{id:i.key,...r}}catch(n){throw console.error("Error creating product:",n),n}},async getAllProducts(){try{const t=M(F,"products"),e=await oe(t);if(e.exists()){const n=[],r=e.val();return Object.keys(r).forEach(s=>{n.push({id:s,...r[s]})}),n.sort((s,i)=>(i.createdAt||0)-(s.createdAt||0)),n}return[]}catch(t){throw console.error("Error fetching products:",t),t}},async getProductById(t){try{const e=M(F,`products/${t}`),n=await oe(e);if(n.exists())return{id:t,...n.val()};throw new Error("Product not found")}catch(e){throw console.error("Error fetching product:",e),e}},async getProductsByCategory(t){try{return(await this.getAllProducts()).filter(n=>n.category===t)}catch(e){throw console.error("Error fetching products by category:",e),e}},async getProductsBySubcategory(t,e){try{return(await this.getAllProducts()).filter(r=>r.category===t&&r.subcategory===e)}catch(n){throw console.error("Error fetching products by subcategory:",n),n}},async updateProduct(t,e){try{const n=M(F,`products/${t}`);return await zs(n,{...e,updatedAt:Date.now()}),{id:t,...e}}catch(n){throw console.error("Error updating product:",n),n}},async deleteProduct(t){try{const e=M(F,`products/${t}`);return await Fl(e),{success:!0}}catch(e){throw console.error("Error deleting product:",e),e}},async processProductImages(t){try{const e=t.map(async n=>await iP(n));return await Promise.all(e)}catch(e){throw console.error("Error processing images:",e),e}}},ni={async getAllCategories(){try{const t=M(F,"categories"),e=await oe(t);return e.exists()?e.val():{appliances:["refrigerator","air-conditioner"],mobiles:["apple","vivo","oppo","realme","oneplus","motorola"],electronics:["home-theater","sound-bar"],tv:["toshiba","mi","realme","samsung","lg","assembled-tv","tcl"],trending:["best-sellers","new-arrivals"]}}catch(t){return console.error("Error fetching categories:",t),{appliances:["refrigerator","air-conditioner"],mobiles:["apple","vivo","oppo","realme","oneplus","motorola"],electronics:["home-theater","sound-bar"],tv:["toshiba","mi","realme","samsung","lg","assembled-tv","tcl"],trending:["best-sellers","new-arrivals"]}}},async saveCategory(t,e){try{const n=t.toLowerCase().replace(/\s+/g,"-"),r=M(F,`categories/${n}`);return await De(r,e),{success:!0}}catch(n){throw console.error("Error saving category:",n),n}},async deleteCategory(t){try{const e=t.toLowerCase().replace(/\s+/g,"-"),n=M(F,`categories/${e}`);return await Fl(n),{success:!0}}catch(e){throw console.error("Error deleting category:",e),e}}},oP=(t,e=1920,n=.8)=>new Promise((r,s)=>{const i=new FileReader;i.readAsDataURL(t),i.onload=a=>{const l=new Image;l.src=a.target.result,l.onload=()=>{const c=document.createElement("canvas");let u=l.width,h=l.height;u>e&&(h=h*e/u,u=e),c.width=u,c.height=h,c.getContext("2d").drawImage(l,0,0,u,h);const d=c.toDataURL("image/jpeg",n);r(d)},l.onerror=s},i.onerror=s}),Nt={async createBanner(t,e){try{const n=await oP(e,1920,.7),r={...t,imageUrl:n,createdAt:Date.now(),updatedAt:Date.now()},s=M(F,"banners"),i=Kh(s);return await De(i,r),{id:i.key,...r}}catch(n){throw console.error("Error creating banner:",n),n}},async getAllBanners(){try{const t=M(F,"banners"),e=await oe(t);if(e.exists()){const n=[],r=e.val();return Object.keys(r).forEach(s=>{n.push({id:s,...r[s]})}),n.sort((s,i)=>(s.order||0)-(i.order||0)),n}return[]}catch(t){throw console.error("Error fetching banners:",t),t}},async getActiveBanners(){try{return(await this.getAllBanners()).filter(e=>e.isActive)}catch(t){throw console.error("Error fetching active banners:",t),t}},async updateBanner(t,e){try{const n=M(F,`banners/${t}`),r={...e,updatedAt:Date.now()};return await zs(n,r),{id:t,...r}}catch(n){throw console.error("Error updating banner:",n),n}},async deleteBanner(t){try{const e=M(F,`banners/${t}`);return await Fl(e),{success:!0}}catch(e){throw console.error("Error deleting banner:",e),e}}};function aP(){const[t,e]=S.useState([]),[n,r]=S.useState([]),[s,i]=S.useState(!0),[a,l]=S.useState(0);return S.useEffect(()=>{(async()=>{try{const[u,h]=await Promise.all([dn.getAllProducts(),Nt.getActiveBanners()]);e(u),r(h)}catch(u){console.error("Error loading data:",u)}finally{i(!1)}})()},[]),S.useEffect(()=>{if(n.length>0){const c=setInterval(()=>{l(u=>(u+1)%n.length)},4e3);return()=>clearInterval(c)}},[n]),o.jsxs("div",{className:"amazon-grid-section",children:[o.jsx("div",{className:"amazon-hero",children:o.jsx("div",{className:"amazon-hero-banner",children:o.jsxs("div",{className:"amazon-hero-text",children:[o.jsx("h1",{children:"Discover Premium Electronics at DRIFT ENTERPRISES"}),o.jsx("p",{children:"Fast delivery, curated products, and unbeatable deals on the latest tech."}),o.jsx(R,{to:"/products",className:"amazon-hero-button",children:" Shop Now"})]})})}),n.length>0&&o.jsx("div",{className:"full-screen-slideshow",children:n.map((c,u)=>o.jsx("img",{src:c.imageUrl,alt:c.title,style:{display:u===a||u===(a+1)%n.length?"block":"none",opacity:u===a?1:.5}},c.id))}),o.jsxs("section",{style:{marginTop:"3rem",marginBottom:"3rem"},children:[o.jsx("h2",{style:{marginBottom:"1.5rem",fontSize:"2rem",fontWeight:"900",color:"#1a1a1a",letterSpacing:"-0.5px"},children:" Featured Products"}),o.jsx("div",{className:"amazon-product-grid",children:t.filter(c=>c.isFeatured).slice(0,6).length>0?t.filter(c=>c.isFeatured).slice(0,6).map(c=>{var u;return o.jsxs("div",{className:"amazon-product-card",children:[o.jsxs("div",{className:"amazon-product-image-wrapper",children:[o.jsx("img",{src:((u=c.images)==null?void 0:u[0])||c.image,alt:c.title}),o.jsx("span",{className:"featured-badge",children:" Featured"})]}),o.jsxs("div",{className:"amazon-product-info",children:[o.jsx("div",{className:"amazon-product-category",children:c.category}),o.jsx("div",{className:"amazon-product-title",children:o.jsx(R,{to:`/products/${c.id}`,children:c.title})}),o.jsxs("div",{className:"amazon-product-rating",children:["".repeat(Math.round(c.rating))," ",o.jsx("span",{className:"rating-number",children:c.rating.toFixed(1)})]}),o.jsxs("div",{className:"amazon-product-price",children:[o.jsx("span",{className:"currency",children:""}),c.price.toFixed(2)]}),o.jsx(R,{className:"primary-button",to:`/products/${c.id}`,children:"View Details"})]})]},c.id)}):t.slice(0,6).map(c=>{var u;return o.jsxs("div",{className:"amazon-product-card",children:[o.jsx("div",{className:"amazon-product-image-wrapper",children:o.jsx("img",{src:((u=c.images)==null?void 0:u[0])||c.image,alt:c.title})}),o.jsxs("div",{className:"amazon-product-info",children:[o.jsx("div",{className:"amazon-product-category",children:c.category}),o.jsx("div",{className:"amazon-product-title",children:o.jsx(R,{to:`/products/${c.id}`,children:c.title})}),o.jsxs("div",{className:"amazon-product-rating",children:["".repeat(Math.round(c.rating))," ",o.jsx("span",{className:"rating-number",children:c.rating.toFixed(1)})]}),o.jsxs("div",{className:"amazon-product-price",children:[o.jsx("span",{className:"currency",children:""}),c.price.toFixed(2)]}),o.jsx(R,{className:"primary-button",to:`/products/${c.id}`,children:"View Details"})]})]},c.id)})})]}),t.filter(c=>c.isTrending).length>0&&o.jsxs("section",{style:{marginTop:"3rem",marginBottom:"3rem"},children:[o.jsx("h2",{style:{marginBottom:"1rem",fontSize:"2rem",fontWeight:"900",color:"#1a1a1a",letterSpacing:"-0.5px"},children:" Trending Products"}),o.jsx("p",{style:{marginBottom:"1.5rem",fontSize:"1.1rem",color:"#666"},children:"Most popular items right now"}),o.jsx("div",{className:"amazon-product-grid",children:t.filter(c=>c.isTrending).slice(0,6).map(c=>{var u;return o.jsxs("div",{className:"amazon-product-card",children:[o.jsxs("div",{className:"amazon-product-image-wrapper",children:[o.jsx("img",{src:((u=c.images)==null?void 0:u[0])||c.image,alt:c.title}),o.jsx("span",{className:"trending-badge",children:" Trending"})]}),o.jsxs("div",{className:"amazon-product-info",children:[o.jsx("div",{className:"amazon-product-category",children:c.category}),o.jsx("div",{className:"amazon-product-title",children:o.jsx(R,{to:`/products/${c.id}`,children:c.title})}),o.jsxs("div",{className:"amazon-product-rating",children:["".repeat(Math.round(c.rating))," ",o.jsx("span",{className:"rating-number",children:c.rating.toFixed(1)})]}),o.jsxs("div",{className:"amazon-product-price",children:[o.jsx("span",{className:"currency",children:""}),c.price.toFixed(2)]}),o.jsx(R,{className:"primary-button",to:`/products/${c.id}`,children:"View Details"})]})]},c.id)})})]})]})}function lP(){const[t,e]=S.useState([]),[n,r]=S.useState(!0),[s,i]=S.useState(""),[a]=FS();S.useEffect(()=>{(async()=>{try{const p=(await dn.getAllProducts()).map(_=>{var m;return{..._,image:((m=_.images)==null?void 0:m[0])||_.image||"https://via.placeholder.com/300"}});e(p)}catch(w){console.error("Error loading products:",w),e([])}finally{r(!1)}})()},[]);const l=a.get("category"),c=a.get("sub"),u=x=>{x.preventDefault(),setSearchParams({search:s,...l&&{category:l},...c&&{sub:c}})};let h=t;l&&(h=h.filter(x=>x.category.toLowerCase()===l.toLowerCase())),c&&(h=h.filter(x=>x.subcategory&&x.subcategory.toLowerCase()===c.toLowerCase()||x.brand&&x.brand.toLowerCase()===c.toLowerCase())),s&&(h=h.filter(x=>{var w,p;return x.title.toLowerCase().includes(s.toLowerCase())||((w=x.description)==null?void 0:w.toLowerCase().includes(s.toLowerCase()))||((p=x.brand)==null?void 0:p.toLowerCase().includes(s.toLowerCase()))}));const f=x=>x.charAt(0).toUpperCase()+x.slice(1).replace(/-/g," "),d=s?`Search: ${s}`:l?c?`${f(c)} - ${f(l)}`:f(l):"All Products";return n?o.jsx("div",{className:"amazon-grid-section",children:o.jsx("div",{style:{textAlign:"center",padding:"4rem 2rem"},children:o.jsx("p",{style:{fontSize:"2rem",color:"#e71d36",fontWeight:"700"},children:" Loading products..."})})}):o.jsxs("div",{className:"amazon-grid-section",children:[o.jsx("div",{style:{marginBottom:"2rem"},children:o.jsxs("form",{onSubmit:u,style:{display:"flex",gap:"0.5rem"},children:[o.jsx("input",{type:"text",value:s,onChange:x=>i(x.target.value),placeholder:" Search products by name, brand...",style:{flex:1,padding:"0.75rem",borderRadius:"8px",border:"1px solid #ddd",fontSize:"1rem"}}),o.jsx("button",{type:"submit",style:{padding:"0.75rem 1.5rem",background:"#e71d36",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:"600"},children:"Search"})]})}),o.jsx("h1",{style:{padding:"0 0.5rem",fontSize:"2.5rem",fontWeight:"900",color:"#1a1a1a",letterSpacing:"-1px",marginBottom:"2rem"},children:d}),h.length===0?o.jsxs("div",{className:"empty-state",children:[o.jsx("p",{style:{fontSize:"1.5rem",marginBottom:"1rem"},children:"No products found"}),o.jsx("p",{style:{fontSize:"1rem",color:"#666",marginBottom:"2rem"},children:"Try searching with different keywords or browse categories"}),o.jsx(R,{to:"/products",className:"primary-button",style:{display:"inline-block",padding:"1rem 2rem"},children:"View All Products"})]}):o.jsx("div",{className:"amazon-product-grid",children:h.map(x=>{var w,p;return o.jsxs("div",{className:"amazon-product-card",children:[o.jsx("div",{className:"amazon-product-image-wrapper",children:o.jsx("img",{src:x.image,alt:x.title})}),o.jsxs("div",{className:"amazon-product-info",children:[o.jsx("div",{className:"amazon-product-category",children:x.category}),o.jsx("div",{className:"amazon-product-title",children:o.jsx(R,{to:`/products/${x.id}`,children:x.title})}),o.jsxs("div",{className:"amazon-product-rating",children:["".repeat(Math.round(x.rating))," ",o.jsx("span",{className:"rating-number",children:(p=(w=x.rating)==null?void 0:w.toFixed)==null?void 0:p.call(w,1)})]}),o.jsxs("div",{className:"amazon-product-price",children:[o.jsx("span",{className:"currency",children:""}),Number(x.price).toFixed(2)]}),o.jsx(R,{className:"primary-button",to:`/products/${x.id}`,children:"View Details"})]})]},x.id)})})]})}function cP(){const{id:t}=iS(),e=sr(),{user:n}=st(),[r,s]=S.useState(null),[i,a]=S.useState(!0),[l,c]=S.useState(0),[u,h]=S.useState([]),[f,d]=S.useState(!1),[x,w]=S.useState(!1),[p,_]=S.useState({rating:5,comment:""}),[m,g]=S.useState(!1),{addItem:y}=_o();S.useEffect(()=>{(async()=>{var ee;try{const Se=await dn.getProductById(t),ft={...Se,image:((ee=Se.images)==null?void 0:ee[0])||Se.image||"https://via.placeholder.com/400"};s(ft)}catch(Se){console.error("Error loading product:",Se),s(null)}finally{a(!1)}})(),v()},[t]);const v=async()=>{d(!0);try{const V=M(F,"reviews"),ee=await oe(V);if(ee.exists()){const Se=ee.val(),ft=Object.entries(Se).filter(([Bt,it])=>it.productId===t&&it.status==="approved").map(([Bt,it])=>({id:Bt,...it})).sort((Bt,it)=>new Date(it.createdAt)-new Date(Bt.createdAt));h(ft)}}catch(V){console.error("Error loading reviews:",V)}finally{d(!1)}},C=async V=>{if(V.preventDefault(),!n){alert("Please login to post a review");return}if(!p.comment.trim()){alert("Please write a comment");return}g(!0);try{const ee=M(F,"reviews");await Kh(ee,{productId:t,userId:n.uid,userName:n.displayName||"Anonymous",rating:parseInt(p.rating),comment:p.comment,status:"pending",createdAt:new Date().toISOString()}),alert(" Review submitted! It will appear after admin approval."),_({rating:5,comment:""}),w(!1)}catch(ee){console.error("Error submitting review:",ee),alert(" Failed to submit review")}finally{g(!1)}};if(i)return o.jsx("div",{className:"page-shell",style:{maxWidth:"1200px",textAlign:"center",padding:"4rem 2rem"},children:o.jsx("p",{style:{fontSize:"2rem",color:"#e71d36",fontWeight:"700"},children:" Loading product..."})});if(!r)return o.jsxs("div",{className:"page-shell",style:{maxWidth:"1200px",textAlign:"center"},children:[o.jsx("h1",{children:"Product not found"}),o.jsx("p",{children:"The product you're looking for doesn't exist."}),o.jsx(R,{to:"/products",style:{color:"#e50914",fontWeight:"bold"},children:"Back to products"})]});const E=()=>{y(r),alert(" Added to cart successfully!")},b=()=>{y(r),e("/checkout")},I=r.images||[r.image],U=I[l],j=()=>{c(V=>(V+1)%I.length)},$=()=>{c(V=>(V-1+I.length)%I.length)};return o.jsxs("div",{className:"page-shell product-detail",style:{maxWidth:"1200px"},children:[o.jsxs("div",{className:"product-detail-layout",children:[o.jsxs("div",{className:"product-detail-image",children:[I.length>1&&o.jsxs("div",{style:{position:"relative"},children:[o.jsx("button",{onClick:$,style:{position:"absolute",left:"10px",top:"50%",transform:"translateY(-50%)",background:"rgba(0,0,0,0.5)",color:"white",border:"none",padding:"10px",cursor:"pointer"},children:"<"}),o.jsx("img",{src:U,alt:r.title,style:{width:"100%",height:"auto"}}),o.jsx("button",{onClick:j,style:{position:"absolute",right:"10px",top:"50%",transform:"translateY(-50%)",background:"rgba(0,0,0,0.5)",color:"white",border:"none",padding:"10px",cursor:"pointer"},children:">"}),o.jsx("div",{style:{position:"absolute",bottom:"10px",left:"50%",transform:"translateX(-50%)",display:"flex",gap:"5px"},children:I.map((V,ee)=>o.jsx("span",{onClick:()=>c(ee),style:{width:"10px",height:"10px",borderRadius:"50%",background:ee===l?"white":"rgba(255,255,255,0.5)",cursor:"pointer"}},ee))})]}),I.length===1&&o.jsx("img",{src:U,alt:r.title})]}),o.jsxs("div",{className:"product-detail-main",children:[o.jsx("h1",{children:r.title}),o.jsxs("p",{className:"amazon-product-rating",children:["".repeat(Math.round(r.rating))," ",o.jsx("span",{className:"rating-number",children:r.rating.toFixed(1)})]}),o.jsxs("p",{className:"product-detail-price",children:[r.mrp&&o.jsxs("span",{style:{textDecoration:"line-through",color:"#888",marginRight:"10px"},children:["MRP ",r.mrp.toFixed(2)]}),o.jsx("span",{className:"currency",children:""}),r.price.toFixed(2)]}),o.jsx("p",{className:"product-detail-description",children:r.description})]}),o.jsxs("aside",{className:"product-detail-buybox",children:[o.jsxs("p",{className:"product-detail-price",children:[r.mrp&&o.jsxs("span",{style:{textDecoration:"line-through",color:"#888",marginRight:"10px"},children:["MRP ",r.mrp.toFixed(2)]}),o.jsx("span",{className:"currency",children:""}),r.price.toFixed(2)]}),o.jsx("p",{className:"text-muted",children:"FREE delivery with DRIFT ENTERPRISES Prime. This is a demo experience."}),o.jsx("button",{className:"primary-button wide",onClick:E,style:{width:"100%"},children:" Add to Cart"}),o.jsx("button",{className:"primary-button wide",onClick:b,style:{marginTop:".75rem",width:"100%",background:"linear-gradient(135deg, #1a1a1a 0%, #000000 100%)"},children:" Buy Now"})]})]}),o.jsx("p",{style:{marginTop:".75rem",fontSize:".85rem"},children:o.jsx(R,{to:"/products",className:"amazon-link",children:"Back to all products"})}),o.jsxs("div",{style:{marginTop:"3rem",borderTop:"2px solid #e8e8e8",paddingTop:"2rem"},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"2rem"},children:[o.jsxs("h2",{style:{fontSize:"1.5rem"},children:[" Reviews (",u.length,")"]}),o.jsx("button",{onClick:()=>w(!x),style:{padding:"0.75rem 1.5rem",background:"#e71d36",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:"600"},children:x?" Cancel":" Write Review"})]}),x&&o.jsxs("form",{onSubmit:C,style:{background:"#f9f9f9",padding:"2rem",borderRadius:"12px",marginBottom:"2rem",border:"1px solid #e8e8e8"},children:[o.jsxs("div",{style:{marginBottom:"1.5rem"},children:[o.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600"},children:"Rating:"}),o.jsxs("select",{value:p.rating,onChange:V=>_({...p,rating:V.target.value}),style:{width:"100%",padding:"0.75rem",borderRadius:"8px",border:"1px solid #ddd",fontSize:"1rem"},children:[o.jsx("option",{value:"5",children:" Excellent"}),o.jsx("option",{value:"4",children:" Very Good"}),o.jsx("option",{value:"3",children:" Good"}),o.jsx("option",{value:"2",children:" Fair"}),o.jsx("option",{value:"1",children:" Poor"})]})]}),o.jsxs("div",{style:{marginBottom:"1.5rem"},children:[o.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600"},children:"Your Review:"}),o.jsx("textarea",{value:p.comment,onChange:V=>_({...p,comment:V.target.value}),placeholder:"Share your experience with this product...",style:{width:"100%",padding:"0.75rem",borderRadius:"8px",border:"1px solid #ddd",fontSize:"1rem",minHeight:"120px",fontFamily:"inherit"}})]}),o.jsx("button",{type:"submit",disabled:m,style:{padding:"0.75rem 2rem",background:"#e71d36",color:"white",border:"none",borderRadius:"8px",cursor:m?"not-allowed":"pointer",fontWeight:"600",opacity:m?.6:1},children:m?" Submitting...":" Submit Review"})]}),f?o.jsx("p",{style:{textAlign:"center",color:"#666"},children:" Loading reviews..."}):u.length===0?o.jsx("p",{style:{textAlign:"center",color:"#999",padding:"2rem"},children:"No reviews yet. Be the first to review!"}):o.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1.5rem"},children:u.map(V=>o.jsxs("div",{style:{background:"#ffffff",padding:"1.5rem",borderRadius:"12px",border:"1px solid #e8e8e8"},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"0.75rem"},children:[o.jsxs("div",{children:[o.jsx("p",{style:{fontWeight:"600",marginBottom:"0.25rem"},children:V.userName}),o.jsx("p",{style:{color:"#999",fontSize:"0.85rem"},children:new Date(V.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})})]}),o.jsx("p",{style:{fontSize:"1.1rem"},children:"".repeat(V.rating)})]}),o.jsx("p",{style:{color:"#333",lineHeight:"1.6"},children:V.comment})]},V.id))})]})]})}function uP(){const{items:t,updateQuantity:e,removeItem:n,subtotal:r}=_o();return o.jsxs("div",{className:"page-shell",style:{maxWidth:"1200px"},children:[o.jsx("h1",{children:" Your Shopping Cart"}),t.length===0?o.jsxs("div",{className:"empty-state",children:[o.jsx("p",{style:{fontSize:"1.5rem",marginBottom:"1.5rem"},children:"Your cart is empty"}),o.jsx("p",{style:{fontSize:"1rem",color:"#666",marginBottom:"2rem"},children:"Looks like you haven't added anything yet."}),o.jsx(R,{to:"/products",className:"primary-button",style:{display:"inline-block",padding:"1rem 3rem"},children:" Start Shopping"})]}):o.jsxs("div",{className:"cart-layout",children:[o.jsx("div",{className:"cart-items",children:t.map(s=>o.jsxs("div",{className:"cart-item",children:[o.jsx("div",{className:"cart-item-image",children:o.jsx("img",{src:s.image,alt:s.title,style:{maxWidth:"100%",maxHeight:"100%",objectFit:"contain"}})}),o.jsxs("div",{className:"cart-item-body",style:{flex:1},children:[o.jsx("h2",{children:s.title}),o.jsxs("div",{className:"cart-item-price",children:[o.jsx("span",{className:"currency",children:""}),s.price.toFixed(2)]}),o.jsxs("div",{className:"cart-item-each",children:["",(s.price*s.quantity).toFixed(2)," total"]}),o.jsxs("div",{className:"cart-item-actions",children:[o.jsxs("label",{children:["Qty:",o.jsx("input",{type:"number",value:s.quantity,min:1,onChange:i=>e(s.id,Number(i.target.value)),style:{width:60,padding:"0.25rem",marginLeft:"0.25rem"}})]}),o.jsx("button",{onClick:()=>n(s.id),children:" Remove"})]})]})]},s.id))}),o.jsxs("div",{className:"cart-summary",children:[o.jsx("h2",{style:{fontSize:"1.4rem",fontWeight:"800",marginBottom:"1.5rem",color:"#1a1a1a"},children:"Order Summary"}),o.jsxs("div",{style:{marginBottom:"1.5rem"},children:[o.jsxs("div",{style:{marginBottom:"0.75rem",display:"flex",justifyContent:"space-between",fontSize:"1rem"},children:[o.jsx("span",{children:"Subtotal:"})," ",o.jsxs("strong",{style:{color:"#1a1a1a"},children:["",r.toFixed(2)]})]}),o.jsxs("div",{style:{marginBottom:"0.75rem",display:"flex",justifyContent:"space-between",fontSize:"1rem"},children:[o.jsx("span",{children:"Shipping:"})," ",o.jsx("strong",{style:{color:"#4caf50"},children:"FREE"})]}),o.jsx("div",{style:{marginBottom:"1.5rem",fontSize:"0.85rem",color:"#666",fontStyle:"italic"},children:"Tax calculated at checkout"})]}),o.jsxs("div",{style:{paddingTop:"1.5rem",borderTop:"2px solid #e8e8e8"},children:[o.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"800",marginBottom:"1.5rem",color:"#e71d36",display:"flex",justifyContent:"space-between"},children:[o.jsx("span",{children:"Total:"})," ",o.jsxs("span",{children:["",r.toFixed(2)]})]}),o.jsx(R,{to:"/checkout",className:"primary-button wide",style:{display:"block",textAlign:"center",padding:"1rem",fontSize:"1rem"},children:" Proceed to Checkout"})]})]})]})]})}function dP(){const t=sr(),{user:e}=st(),{items:n,placeOrder:r,subtotal:s,tax:i,total:a}=_o(),[l,c]=S.useState([]),[u,h]=S.useState(""),[f,d]=S.useState(!1),[x,w]=S.useState("cod"),[p,_]=S.useState({firstName:"",lastName:"",email:(e==null?void 0:e.email)||"",phone:"",address:"",city:"",state:"",pincode:""});S.useEffect(()=>{e&&m()},[e]);const m=async()=>{try{const v=M(F,`users/${e.uid}`),C=await oe(v);if(C.exists()){const E=C.val();c(E.addresses||[])}}catch(v){console.error("Error loading addresses:",v)}},g=async()=>{try{for(const v of n){const C=M(F,`products/${v.id}`),E=await oe(C);if(E.exists()){const I=E.val().stock||0,U=Math.max(0,I-v.quantity);await zs(C,{stock:U})}}}catch(v){throw console.error("Error deducting stock:",v),v}},y=async v=>{if(v.preventDefault(),n.length===0){alert(" Your cart is empty!");return}let C=p;u&&(C=l.find(b=>b.id===parseInt(u)));const E=eP({...p,...C},["firstName","lastName","phone","address","city","state","pincode"]);if(!E.valid){alert(` ${E.error}`);return}if(!JR(p.email)){alert(" Please enter a valid email address");return}if(!XR(C.phone||p.phone)){alert(" Please enter a valid 10-digit phone number");return}if(!ZR(C.pincode||p.pincode)){alert(" Please enter a valid 6-digit pincode");return}d(!0);try{const b=r();if(b){const I=M(F,`orders/${b.id}`);await De(I,{...b,userId:e==null?void 0:e.uid,customerEmail:p.email,shippingAddress:C,paymentMethod:x,placedAt:new Date().toISOString()}),await g(),alert(` Order placed successfully!

Order ID: ${b.id}
Total: ${a.toFixed(2)}

Thank you for shopping!`),t("/orders")}}catch(b){console.error("Error placing order:",b),alert(" Failed to place order. Please try again.")}finally{d(!1)}};return o.jsxs("div",{className:"page-shell",style:{maxWidth:"1200px"},children:[o.jsx("h1",{className:"checkout-page",children:" Secure Checkout"}),n.length===0?o.jsx("div",{className:"empty-state",children:o.jsx("p",{style:{fontSize:"1.2rem"},children:"Your cart is empty. Add items to proceed with checkout."})}):o.jsxs("div",{className:"checkout-layout",children:[o.jsxs("form",{className:"checkout-form",onSubmit:y,children:[o.jsxs("section",{children:[o.jsx("h2",{children:" Shipping Address"}),l.length>0&&o.jsxs("div",{style:{marginBottom:"1.5rem"},children:[o.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600"},children:"Use Saved Address:"}),o.jsxs("select",{value:u,onChange:v=>h(v.target.value),style:{width:"100%",padding:"0.75rem",borderRadius:"8px",border:"1px solid #ddd"},children:[o.jsx("option",{value:"",children:"Or enter new address below"}),l.map(v=>o.jsxs("option",{value:v.id,children:[v.name," - ",v.address,", ",v.city]},v.id))]})]}),!u&&o.jsxs("div",{className:"form-grid",children:[o.jsxs("label",{children:["First Name ",o.jsx("input",{type:"text",value:p.firstName,onChange:v=>_({...p,firstName:v.target.value}),placeholder:"Enter first name",required:!0})]}),o.jsxs("label",{children:["Last Name ",o.jsx("input",{type:"text",value:p.lastName,onChange:v=>_({...p,lastName:v.target.value}),placeholder:"Enter last name",required:!0})]}),o.jsxs("label",{children:["Email ",o.jsx("input",{type:"email",value:p.email,onChange:v=>_({...p,email:v.target.value}),placeholder:"Enter email",required:!0})]}),o.jsxs("label",{children:["Phone ",o.jsx("input",{type:"tel",value:p.phone,onChange:v=>_({...p,phone:v.target.value}),placeholder:"10-digit phone",required:!0})]}),o.jsxs("label",{style:{gridColumn:"1 / -1"},children:["Address ",o.jsx("input",{type:"text",value:p.address,onChange:v=>_({...p,address:v.target.value}),placeholder:"Street address, P.O. box",required:!0})]}),o.jsxs("label",{children:["City ",o.jsx("input",{type:"text",value:p.city,onChange:v=>_({...p,city:v.target.value}),placeholder:"City",required:!0})]}),o.jsxs("label",{children:["State ",o.jsx("input",{type:"text",value:p.state,onChange:v=>_({...p,state:v.target.value}),placeholder:"State/Province",required:!0})]}),o.jsxs("label",{children:["PIN Code ",o.jsx("input",{type:"text",value:p.pincode,onChange:v=>_({...p,pincode:v.target.value}),placeholder:"6-digit PIN",required:!0})]})]})]}),o.jsxs("section",{children:[o.jsx("h2",{children:" Payment Method"}),o.jsxs("div",{style:{display:"flex",gap:"1rem",marginBottom:"1rem"},children:[o.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer"},children:[o.jsx("input",{type:"radio",name:"payment",value:"cod",checked:x==="cod",onChange:v=>w(v.target.value)}),o.jsx("span",{children:" Cash on Delivery"})]}),o.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer"},children:[o.jsx("input",{type:"radio",name:"payment",value:"razorpay",checked:x==="razorpay",onChange:v=>w(v.target.value)}),o.jsx("span",{children:" Razorpay (Coming Soon)"})]})]}),x==="cod"&&o.jsx("p",{style:{color:"#666",fontSize:"0.9rem"},children:" Pay securely when your order arrives"})]})]}),o.jsxs("div",{className:"checkout-summary",children:[o.jsx("h2",{children:" Order Summary"}),o.jsx("ul",{children:n.map(v=>o.jsxs("li",{children:[o.jsxs("span",{children:[v.title,"  ",v.quantity]}),o.jsxs("strong",{children:["",(v.price*v.quantity).toFixed(2)]})]},v.id))}),o.jsxs("div",{className:"checkout-totals",children:[o.jsxs("div",{children:[o.jsx("span",{children:"Subtotal"})," ",o.jsxs("span",{children:["",s.toFixed(2)]})]}),o.jsxs("div",{children:[o.jsx("span",{children:"Tax (18% GST)"})," ",o.jsxs("span",{children:["",i.toFixed(2)]})]}),o.jsxs("div",{children:[o.jsx("span",{children:"Shipping"})," ",o.jsx("span",{style:{color:"#4caf50",fontWeight:"700"},children:"FREE"})]}),o.jsxs("div",{className:"checkout-total-row",children:[o.jsx("span",{children:"Order Total"}),o.jsxs("span",{children:["",a.toFixed(2)]})]})]}),o.jsx("button",{type:"submit",onClick:y,disabled:f,className:"primary-button",style:{width:"100%",marginTop:"1.5rem",padding:"1rem",fontSize:"1.05rem"},children:f?" Placing Order...":" Place Order"}),o.jsx("p",{style:{marginTop:"1rem",fontSize:"0.85rem",color:"#666",textAlign:"center",lineHeight:"1.6"},children:"By placing your order, you agree to our terms and conditions. Your payment information is secure and encrypted."})]})]})]})}const hP={appliances:["refrigerator","air-conditioner","washing-machine","microwave"],mobiles:["apple","vivo","oppo","realme","oneplus","motorola","poco","samsung"],electronics:["home-theater","sound-bar","speakers","headphones"],tv:["toshiba","mi","realme","samsung","lg","assembled-tv","tcl"],trending:["best-sellers","new-arrivals","hot-deals"]};async function fP(){try{const t=M(F,"categories");return await De(t,hP),console.log(" Categories initialized successfully!"),{success:!0}}catch(t){throw console.error(" Error initializing categories:",t),t}}function pP(){const{user:t}=st(),[e,n]=S.useState("products"),[r,s]=S.useState("appliances"),[i,a]=S.useState("refrigerator"),[l,c]=S.useState({title:"",price:"",rating:"",description:"",brand:"",specifications:"",isTrending:!1,isFeatured:!1,priority:0}),[u,h]=S.useState([]),[f,d]=S.useState([]),[x,w]=S.useState({category:"appliances",name:""}),[p,_]=S.useState({name:"",description:""}),[m,g]=S.useState({}),[y,v]=S.useState([]),[C,E]=S.useState([]),[b,I]=S.useState(!1),[U,j]=S.useState({type:"",message:""}),[$,V]=S.useState("newest"),[ee,Se]=S.useState("all"),[ft,Bt]=S.useState("");S.useEffect(()=>{it(),W()},[]);const it=async()=>{try{const k=await ni.getAllCategories();g(k);const A=Object.keys(k)[0];A&&(s(A),a(k[A][0]||""),w({category:A,name:""}))}catch(k){console.error("Error loading categories:",k)}},P=async()=>{try{await fP(),alert(" Categories initialized! Reloading..."),await it()}catch{alert(" Failed to initialize categories")}},W=async()=>{try{const k=await dn.getAllProducts();v(k),E(k)}catch(k){console.error("Error loading products:",k)}};S.useEffect(()=>{let k=[...y];switch(ee!=="all"&&(k=k.filter(A=>A.category===ee)),ft.trim()&&(k=k.filter(A=>{var z,Re,Wr;return((z=A.title)==null?void 0:z.toLowerCase().includes(ft.toLowerCase()))||((Re=A.description)==null?void 0:Re.toLowerCase().includes(ft.toLowerCase()))||((Wr=A.brand)==null?void 0:Wr.toLowerCase().includes(ft.toLowerCase()))})),$){case"name-asc":k.sort((A,z)=>{var Re;return(Re=A.title)==null?void 0:Re.localeCompare(z.title)});break;case"name-desc":k.sort((A,z)=>{var Re;return(Re=z.title)==null?void 0:Re.localeCompare(A.title)});break;case"price-asc":k.sort((A,z)=>A.price-z.price);break;case"price-desc":k.sort((A,z)=>z.price-A.price);break;case"priority":k.sort((A,z)=>(z.priority||0)-(A.priority||0));break;case"newest":default:k.sort((A,z)=>(z.createdAt||0)-(A.createdAt||0));break}E(k)},[y,$,ee,ft]);const B=k=>{const{name:A,value:z}=k.target;c(Re=>({...Re,[A]:z}))},ue=k=>{var z;const A=k.target.value;s(A),a(((z=m[A])==null?void 0:z[0])||"")},xe=k=>{const A=Array.from(k.target.files);h(A);const z=[];A.forEach(Re=>{const Wr=new FileReader;Wr.onloadend=()=>{z.push(Wr.result),z.length===A.length&&d(z)},Wr.readAsDataURL(Re)})},Br=async k=>{if(k.preventDefault(),j({type:"",message:""}),!l.title||!l.price||u.length===0){j({type:"error",message:"Please fill all required fields and upload at least one image"});return}I(!0);try{const A={category:r,subcategory:i,title:l.title,price:parseFloat(l.price),rating:parseFloat(l.rating)||0,description:l.description,brand:l.brand||i,specifications:l.specifications,isTrending:l.isTrending,isFeatured:l.isFeatured,priority:parseInt(l.priority)||0,addedBy:t.uid,addedByName:t.fullName};await dn.createProduct(A,u),j({type:"success",message:" Product added successfully!"}),c({title:"",price:"",rating:"",description:"",brand:"",specifications:"",isTrending:!1,isFeatured:!1,priority:0}),h([]),d([]),W(),setTimeout(()=>j({type:"",message:""}),3e3)}catch(A){console.error("Error adding product:",A),j({type:"error",message:"Failed to add product. Please try again."})}finally{I(!1)}},Jt=async k=>{if(k.preventDefault(),!x.name.trim()){alert("Please enter a subsection name");return}const A=x.name.toLowerCase().replace(/\s+/g,"-"),z={...m};if(z[x.category]||(z[x.category]=[]),z[x.category].includes(A)){alert("This subsection already exists");return}z[x.category].push(A);try{await ni.saveCategory(x.category,z[x.category]),g(z),alert(`Subsection "${A}" added to ${x.category}!`),w({category:x.category,name:""})}catch{alert("Failed to add subsection. Please try again.")}},Ws=async(k,A)=>{if(window.confirm(`Remove "${A}" from ${k}?`)){const z={...m};z[k]=z[k].filter(Re=>Re!==A);try{await ni.saveCategory(k,z[k]),g(z),alert(`Subsection "${A}" removed!`)}catch{alert("Failed to remove subsection. Please try again.")}}},Xt=async k=>{if(k.preventDefault(),!p.name.trim()){alert("Please enter a category name");return}const A=p.name.toLowerCase().replace(/\s+/g,"-"),z={...m};if(z[A]){alert("This category already exists");return}z[A]=[];try{await ni.saveCategory(A,[]),g(z),alert(`Category "${A}" added successfully!`),_({name:"",description:""})}catch{alert("Failed to add category. Please try again.")}},zr=async k=>{if(window.confirm(`Remove category "${k}" and all its subsections?`))try{await ni.deleteCategory(k);const A={...m};delete A[k],g(A),alert(`Category "${k}" removed!`)}catch{alert("Failed to remove category. Please try again.")}},Z_=async k=>{if(window.confirm("Are you sure you want to delete this product?"))try{await dn.deleteProduct(k),W(),alert("Product deleted successfully!")}catch{alert("Failed to delete product. Please try again.")}};return o.jsxs("div",{className:"page-shell",children:[o.jsxs("div",{style:{background:"linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%)",padding:"2rem",borderRadius:"12px",marginBottom:"2rem",boxShadow:"0 4px 6px rgba(0,0,0,0.1)",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[o.jsxs("div",{children:[o.jsx("h1",{style:{margin:0,color:"#fff",fontSize:"2.5rem",fontWeight:"800"},children:" Admin Dashboard"}),o.jsxs("p",{style:{margin:"0.5rem 0 0 0",color:"#e71d36",fontSize:"1.1rem",fontWeight:"600"},children:["Welcome back, ",t==null?void 0:t.fullName]}),o.jsx("p",{style:{margin:"0.3rem 0 0 0",color:"#aaa",fontSize:"0.95rem"},children:"Manage products, categories, and inventory"})]}),Object.keys(m).length===0&&o.jsx("button",{onClick:P,style:{padding:"1rem 1.5rem",backgroundColor:"#e71d36",color:"#fff",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:"700",fontSize:"1rem",boxShadow:"0 2px 8px rgba(231, 29, 54, 0.3)"},children:" Initialize Categories"})]}),o.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"2rem",borderBottom:"3px solid #1a1a1a",flexWrap:"wrap"},children:[o.jsx("button",{onClick:()=>n("products"),style:{padding:"1rem 2rem",backgroundColor:e==="products"?"#e71d36":"transparent",color:e==="products"?"#fff":"#1a1a1a",border:"none",cursor:"pointer",fontWeight:"700",fontSize:"1rem",borderRadius:"8px 8px 0 0",transition:"all 0.3s ease",transform:e==="products"?"translateY(3px)":"none"},children:" Add Products"}),o.jsx("button",{onClick:()=>n("list"),style:{padding:"1rem 2rem",backgroundColor:e==="list"?"#e71d36":"transparent",color:e==="list"?"#fff":"#1a1a1a",border:"none",cursor:"pointer",fontWeight:"700",fontSize:"1rem",borderRadius:"8px 8px 0 0",transition:"all 0.3s ease",transform:e==="list"?"translateY(3px)":"none"},children:" Product List"}),o.jsx("button",{onClick:()=>n("subsections"),style:{padding:"1rem 2rem",backgroundColor:e==="subsections"?"#e71d36":"transparent",color:e==="subsections"?"#fff":"#1a1a1a",border:"none",cursor:"pointer",fontWeight:"700",fontSize:"1rem",borderRadius:"8px 8px 0 0",transition:"all 0.3s ease",transform:e==="subsections"?"translateY(3px)":"none"},children:" Manage Subsections"}),o.jsx("button",{onClick:()=>n("categories"),style:{padding:"1rem 2rem",backgroundColor:e==="categories"?"#e71d36":"transparent",color:e==="categories"?"#fff":"#1a1a1a",border:"none",cursor:"pointer",fontWeight:"700",fontSize:"1rem",borderRadius:"8px 8px 0 0",transition:"all 0.3s ease",transform:e==="categories"?"translateY(3px)":"none"},children:" Manage Categories"})]}),e==="products"&&o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"2rem"},children:[o.jsx("div",{children:o.jsxs("form",{onSubmit:Br,style:{backgroundColor:"#fff",padding:"2rem",borderRadius:"12px",border:"2px solid #1a1a1a",boxShadow:"0 4px 12px rgba(0,0,0,0.1)"},children:[o.jsx("h2",{style:{marginTop:0,color:"#1a1a1a",fontSize:"1.8rem",fontWeight:"800"},children:" Add New Product"}),U.message&&o.jsx("div",{style:{padding:"1rem",borderRadius:"8px",marginBottom:"1rem",backgroundColor:U.type==="success"?"#d4edda":"#f8d7da",color:U.type==="success"?"#155724":"#721c24",border:`1px solid ${U.type==="success"?"#c3e6cb":"#f5c6cb"}`,fontWeight:"600"},children:U.message}),o.jsxs("div",{style:{marginBottom:"1.2rem"},children:[o.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"700",color:"#1a1a1a"},children:"Category *"}),o.jsx("select",{value:r,onChange:ue,style:{width:"100%",padding:"0.75rem",border:"2px solid #1a1a1a",borderRadius:"8px",fontSize:"1rem",fontWeight:"600",backgroundColor:"#fff"},children:Object.keys(m).map(k=>o.jsx("option",{value:k,children:k.charAt(0).toUpperCase()+k.slice(1)},k))})]}),o.jsxs("div",{style:{marginBottom:"1.2rem"},children:[o.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"700",color:"#1a1a1a"},children:"Subcategory *"}),o.jsx("select",{value:i,onChange:k=>a(k.target.value),style:{width:"100%",padding:"0.75rem",border:"2px solid #1a1a1a",borderRadius:"8px",fontSize:"1rem",fontWeight:"600",backgroundColor:"#fff"},children:(m[r]||[]).map(k=>o.jsx("option",{value:k,children:k.charAt(0).toUpperCase()+k.slice(1).replace(/-/g," ")},k))})]}),o.jsxs("div",{style:{marginBottom:"1.2rem"},children:[o.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"700",color:"#1a1a1a"},children:"Product Title *"}),o.jsx("input",{type:"text",name:"title",value:l.title,onChange:B,placeholder:"Enter product name",style:{width:"100%",padding:"0.75rem",border:"2px solid #1a1a1a",borderRadius:"8px",fontSize:"1rem",fontWeight:"600"}})]}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"1.2rem"},children:[o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"700",color:"#1a1a1a"},children:"Price () *"}),o.jsx("input",{type:"number",name:"price",value:l.price,onChange:B,placeholder:"0.00",step:"0.01",style:{width:"100%",padding:"0.75rem",border:"2px solid #1a1a1a",borderRadius:"8px",fontSize:"1rem",fontWeight:"600"}})]}),o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"700",color:"#1a1a1a"},children:"Rating (0-5)"}),o.jsx("input",{type:"number",name:"rating",value:l.rating,onChange:B,placeholder:"0.0",min:"0",max:"5",step:"0.1",style:{width:"100%",padding:"0.75rem",border:"2px solid #1a1a1a",borderRadius:"8px",fontSize:"1rem",fontWeight:"600"}})]})]}),o.jsxs("div",{style:{marginBottom:"1.2rem"},children:[o.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"700",color:"#1a1a1a"},children:"Brand"}),o.jsx("input",{type:"text",name:"brand",value:l.brand,onChange:B,placeholder:"Brand name (optional)",style:{width:"100%",padding:"0.75rem",border:"2px solid #1a1a1a",borderRadius:"8px",fontSize:"1rem",fontWeight:"600"}})]}),o.jsxs("div",{style:{marginBottom:"1.2rem"},children:[o.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"700",color:"#1a1a1a"},children:"Description"}),o.jsx("textarea",{name:"description",value:l.description,onChange:B,placeholder:"Enter product description",rows:"4",style:{width:"100%",padding:"0.75rem",border:"2px solid #1a1a1a",borderRadius:"8px",fontSize:"1rem",fontFamily:"inherit",fontWeight:"600"}})]}),o.jsxs("div",{style:{marginBottom:"1.2rem"},children:[o.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"700",color:"#1a1a1a"},children:"Specifications"}),o.jsx("textarea",{name:"specifications",value:l.specifications,onChange:B,placeholder:"Enter key specifications (one per line)",rows:"3",style:{width:"100%",padding:"0.75rem",border:"2px solid #1a1a1a",borderRadius:"8px",fontSize:"1rem",fontFamily:"inherit",fontWeight:"600"}})]}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"1rem",marginBottom:"1.2rem"},children:[o.jsxs("div",{style:{padding:"1rem",border:"2px solid #1a1a1a",borderRadius:"8px",display:"flex",alignItems:"center",gap:"0.75rem"},children:[o.jsx("input",{type:"checkbox",name:"isTrending",checked:l.isTrending,onChange:k=>c({...l,isTrending:k.target.checked}),style:{width:"20px",height:"20px",cursor:"pointer"}}),o.jsx("label",{style:{fontWeight:"700",color:"#1a1a1a",cursor:"pointer"},onClick:()=>c({...l,isTrending:!l.isTrending}),children:" Trending"})]}),o.jsxs("div",{style:{padding:"1rem",border:"2px solid #1a1a1a",borderRadius:"8px",display:"flex",alignItems:"center",gap:"0.75rem"},children:[o.jsx("input",{type:"checkbox",name:"isFeatured",checked:l.isFeatured,onChange:k=>c({...l,isFeatured:k.target.checked}),style:{width:"20px",height:"20px",cursor:"pointer"}}),o.jsx("label",{style:{fontWeight:"700",color:"#1a1a1a",cursor:"pointer"},onClick:()=>c({...l,isFeatured:!l.isFeatured}),children:" Featured"})]}),o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"700",color:"#1a1a1a",fontSize:"0.9rem"},children:"Priority Order"}),o.jsx("input",{type:"number",name:"priority",value:l.priority,onChange:B,placeholder:"0",min:"0",style:{width:"100%",padding:"0.75rem",border:"2px solid #1a1a1a",borderRadius:"8px",fontSize:"1rem",fontWeight:"600"}})]})]}),o.jsx("p",{style:{fontSize:"0.85rem",color:"#666",marginBottom:"1.2rem",fontWeight:"600"},children:" Higher priority number = shows first. Trending/Featured products appear in special sections."}),o.jsxs("div",{style:{marginBottom:"1.5rem"},children:[o.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"700",color:"#1a1a1a"},children:"Product Images *"}),o.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:xe,style:{width:"100%",padding:"0.75rem",border:"2px solid #1a1a1a",borderRadius:"8px",fontSize:"0.95rem",fontWeight:"600"}}),o.jsx("p",{style:{fontSize:"0.85rem",color:"#666",marginTop:"0.5rem",fontWeight:"600"},children:" Recommended: 400x400px, JPG or PNG. You can select multiple images."})]}),o.jsx("button",{type:"submit",disabled:b,style:{width:"100%",padding:"1rem",backgroundColor:b?"#999":"#e71d36",color:"#fff",border:"none",borderRadius:"8px",fontWeight:"800",cursor:b?"not-allowed":"pointer",fontSize:"1.1rem",boxShadow:"0 4px 6px rgba(0,0,0,0.1)",transition:"all 0.3s ease"},children:b?" Adding Product...":" Add Product"})]})}),o.jsxs("div",{children:[o.jsx("h2",{style:{color:"#1a1a1a",fontSize:"1.8rem",fontWeight:"800"},children:"Product Preview"}),o.jsxs("div",{style:{backgroundColor:"#fff",padding:"2rem",borderRadius:"12px",border:"2px solid #1a1a1a",boxShadow:"0 4px 12px rgba(0,0,0,0.1)"},children:[o.jsx("div",{style:{backgroundColor:"#f9f9f9",border:"2px solid #e0e0e0",borderRadius:"8px",overflow:"hidden",textAlign:"center",marginBottom:"1rem"},children:f.length>0?o.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"0.5rem",padding:"1rem"},children:f.map((k,A)=>o.jsx("img",{src:k,alt:`Product preview ${A+1}`,style:{width:"100%",height:"150px",objectFit:"contain",border:"2px solid #e0e0e0",borderRadius:"8px",backgroundColor:"#fff"}},A))}):o.jsx("div",{style:{height:"300px",display:"flex",alignItems:"center",justifyContent:"center",color:"#999",fontSize:"1.2rem",fontWeight:"700"},children:" No images selected"})}),o.jsxs("div",{children:[o.jsx("h3",{style:{margin:"0.5rem 0",color:"#1a1a1a",fontSize:"1.5rem",fontWeight:"800"},children:l.title||"Product Name"}),o.jsxs("p",{style:{margin:"0.5rem 0",color:"#e71d36",fontSize:"1.8rem",fontWeight:"900"},children:["",l.price||"0.00"]}),o.jsxs("p",{style:{margin:"0.5rem 0",color:"#e71d36",fontSize:"1.1rem",fontWeight:"700"},children:["".repeat(Math.floor(l.rating||0)),"".repeat(5-Math.floor(l.rating||0)),l.rating?` (${l.rating})`:" (0)"]}),l.brand&&o.jsxs("p",{style:{margin:"0.5rem 0",color:"#666",fontSize:"1rem",fontWeight:"700"},children:["Brand: ",l.brand]}),o.jsx("p",{style:{margin:"1rem 0",color:"#555",fontSize:"0.95rem",lineHeight:"1.6",fontWeight:"600"},children:l.description||"Product description will appear here"}),l.specifications&&o.jsxs("div",{style:{marginTop:"1rem",padding:"0.75rem",backgroundColor:"#f0f0f0",borderRadius:"8px"},children:[o.jsx("p",{style:{fontWeight:"700",marginBottom:"0.5rem",color:"#1a1a1a"},children:"Specifications:"}),o.jsx("p",{style:{fontSize:"0.9rem",color:"#555",whiteSpace:"pre-line",fontWeight:"600"},children:l.specifications})]})]}),o.jsxs("div",{style:{marginTop:"1.5rem",padding:"1rem",backgroundColor:"#1a1a1a",borderRadius:"8px",fontSize:"0.9rem",color:"#fff"},children:[o.jsxs("p",{style:{marginBottom:"0.5rem",fontWeight:"700"},children:[o.jsx("strong",{children:" Category:"})," ",r]}),o.jsxs("p",{style:{margin:0,fontWeight:"700"},children:[o.jsx("strong",{children:" Subcategory:"})," ",i]})]})]})]})]}),e==="list"&&o.jsxs("div",{children:[o.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem",flexWrap:"wrap",gap:"1rem"},children:o.jsxs("h2",{style:{color:"#1a1a1a",fontSize:"1.8rem",fontWeight:"800",margin:0},children:[" All Products (",C.length," / ",y.length,")"]})}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"1rem",marginBottom:"1.5rem",padding:"1.5rem",backgroundColor:"#f9f9f9",borderRadius:"12px",border:"2px solid #e0e0e0"},children:[o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"700",color:"#1a1a1a",fontSize:"0.9rem"},children:" Search Products"}),o.jsx("input",{type:"text",placeholder:"Search by name, brand, description...",value:ft,onChange:k=>Bt(k.target.value),style:{width:"100%",padding:"0.75rem",border:"2px solid #1a1a1a",borderRadius:"8px",fontSize:"1rem",fontWeight:"600"}})]}),o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"700",color:"#1a1a1a",fontSize:"0.9rem"},children:" Filter by Category"}),o.jsxs("select",{value:ee,onChange:k=>Se(k.target.value),style:{width:"100%",padding:"0.75rem",border:"2px solid #1a1a1a",borderRadius:"8px",fontSize:"1rem",fontWeight:"600",cursor:"pointer"},children:[o.jsx("option",{value:"all",children:"All Categories"}),Object.keys(m).map(k=>o.jsx("option",{value:k,children:k},k))]})]}),o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"700",color:"#1a1a1a",fontSize:"0.9rem"},children:" Sort By"}),o.jsxs("select",{value:$,onChange:k=>V(k.target.value),style:{width:"100%",padding:"0.75rem",border:"2px solid #1a1a1a",borderRadius:"8px",fontSize:"1rem",fontWeight:"600",cursor:"pointer"},children:[o.jsx("option",{value:"newest",children:"Newest First"}),o.jsx("option",{value:"priority",children:"Highest Priority"}),o.jsx("option",{value:"name-asc",children:"Name (A-Z)"}),o.jsx("option",{value:"name-desc",children:"Name (Z-A)"}),o.jsx("option",{value:"price-asc",children:"Price (Low to High)"}),o.jsx("option",{value:"price-desc",children:"Price (High to Low)"})]})]})]}),o.jsx("div",{style:{display:"grid",gap:"1rem"},children:C.length===0?o.jsxs("div",{style:{textAlign:"center",padding:"4rem 2rem",backgroundColor:"#f9f9f9",borderRadius:"12px",border:"2px dashed #ccc"},children:[o.jsx("p",{style:{fontSize:"3rem",marginBottom:"1rem"},children:y.length===0?"":""}),o.jsx("p",{style:{fontSize:"1.3rem",fontWeight:"700",color:"#666"},children:y.length===0?"No products added yet":"No products match your filters"}),o.jsx("p",{style:{color:"#999",marginTop:"0.5rem"},children:y.length===0?"Add your first product to get started":"Try adjusting your search or filters"})]}):C.map(k=>{var A;return o.jsxs("div",{style:{backgroundColor:"#fff",padding:"1.5rem",borderRadius:"12px",border:"2px solid #1a1a1a",display:"grid",gridTemplateColumns:"120px 1fr auto",gap:"1.5rem",alignItems:"center",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[o.jsx("img",{src:((A=k.images)==null?void 0:A[0])||"https://via.placeholder.com/120",alt:k.title,style:{width:"120px",height:"120px",objectFit:"contain",border:"2px solid #e0e0e0",borderRadius:"8px",backgroundColor:"#f9f9f9"}}),o.jsxs("div",{children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"0.5rem"},children:[o.jsx("h3",{style:{margin:0,color:"#1a1a1a",fontSize:"1.3rem",fontWeight:"800"},children:k.title}),k.isFeatured&&o.jsx("span",{style:{padding:"0.25rem 0.75rem",backgroundColor:"#FFD700",color:"#000",borderRadius:"6px",fontSize:"0.75rem",fontWeight:"700"},children:" Featured"}),k.isTrending&&o.jsx("span",{style:{padding:"0.25rem 0.75rem",backgroundColor:"#FF6B6B",color:"#fff",borderRadius:"6px",fontSize:"0.75rem",fontWeight:"700"},children:" Trending"}),(k.priority||0)>0&&o.jsxs("span",{style:{padding:"0.25rem 0.75rem",backgroundColor:"#4A90E2",color:"#fff",borderRadius:"6px",fontSize:"0.75rem",fontWeight:"700"},children:[" Priority: ",k.priority]})]}),o.jsxs("p",{style:{margin:"0.3rem 0",color:"#e71d36",fontSize:"1.3rem",fontWeight:"900"},children:["",k.price]}),o.jsxs("p",{style:{margin:"0.3rem 0",fontSize:"0.9rem",color:"#666",fontWeight:"700"},children:[" ",k.category," /  ",k.subcategory]}),o.jsxs("p",{style:{margin:"0.3rem 0",fontSize:"0.85rem",color:"#999",fontWeight:"600"},children:["Added by: ",k.addedByName]})]}),o.jsx("button",{onClick:()=>Z_(k.id),style:{padding:"0.75rem 1.5rem",backgroundColor:"#e71d36",color:"#fff",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:"700",fontSize:"1rem",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:" Delete"})]},k.id)})})]}),e==="subsections"&&o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"2rem"},children:[o.jsx("div",{children:o.jsxs("form",{onSubmit:Jt,style:{backgroundColor:"#fff",padding:"2rem",borderRadius:"12px",border:"2px solid #1a1a1a",boxShadow:"0 4px 12px rgba(0,0,0,0.1)"},children:[o.jsx("h2",{style:{marginTop:0,color:"#1a1a1a",fontSize:"1.8rem",fontWeight:"800"},children:" Add New Subsection"}),o.jsxs("div",{style:{marginBottom:"1.2rem"},children:[o.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"700",color:"#1a1a1a"},children:"Select Category *"}),o.jsx("select",{value:x.category,onChange:k=>w({...x,category:k.target.value}),style:{width:"100%",padding:"0.75rem",border:"2px solid #1a1a1a",borderRadius:"8px",fontSize:"1rem",fontWeight:"600"},children:Object.keys(m).map(k=>o.jsx("option",{value:k,children:k.charAt(0).toUpperCase()+k.slice(1)},k))})]}),o.jsxs("div",{style:{marginBottom:"1.5rem"},children:[o.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"700",color:"#1a1a1a"},children:"Subsection Name *"}),o.jsx("input",{type:"text",value:x.name,onChange:k=>w({...x,name:k.target.value}),placeholder:"e.g., iPhone, iPad, Apple Watch",style:{width:"100%",padding:"0.75rem",border:"2px solid #1a1a1a",borderRadius:"8px",fontSize:"1rem",fontWeight:"600"}}),o.jsx("p",{style:{fontSize:"0.85rem",color:"#666",marginTop:"0.5rem",fontWeight:"600"},children:" Name will be converted to lowercase with hyphens"})]}),o.jsx("button",{type:"submit",style:{width:"100%",padding:"1rem",backgroundColor:"#e71d36",color:"#fff",border:"none",borderRadius:"8px",fontWeight:"800",cursor:"pointer",fontSize:"1.1rem",boxShadow:"0 4px 6px rgba(0,0,0,0.1)"},children:" Add Subsection"})]})}),o.jsxs("div",{children:[o.jsx("h2",{style:{color:"#1a1a1a",fontSize:"1.8rem",fontWeight:"800",marginBottom:"1rem"},children:" Existing Subsections"}),o.jsx("div",{style:{maxHeight:"600px",overflowY:"auto"},children:Object.entries(m).map(([k,A])=>o.jsxs("div",{style:{marginBottom:"1.5rem",backgroundColor:"#fff",padding:"1.5rem",borderRadius:"12px",border:"2px solid #1a1a1a",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[o.jsx("h3",{style:{margin:"0 0 1rem 0",color:"#e71d36",fontSize:"1.3rem",fontWeight:"800"},children:k.toUpperCase()}),o.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem"},children:A.map(z=>o.jsxs("div",{style:{backgroundColor:"#1a1a1a",color:"#fff",padding:"0.6rem 1rem",borderRadius:"8px",display:"flex",alignItems:"center",gap:"0.75rem",fontWeight:"700"},children:[o.jsx("span",{children:z}),o.jsx("button",{onClick:()=>Ws(k,z),style:{backgroundColor:"#e71d36",border:"none",color:"#fff",cursor:"pointer",padding:"0.3rem 0.6rem",borderRadius:"4px",fontSize:"0.85rem",fontWeight:"700"},children:""})]},z))})]},k))})]})]}),e==="categories"&&o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"2rem"},children:[o.jsx("div",{children:o.jsxs("form",{onSubmit:Xt,style:{backgroundColor:"#fff",padding:"2rem",borderRadius:"12px",border:"2px solid #1a1a1a",boxShadow:"0 4px 12px rgba(0,0,0,0.1)"},children:[o.jsx("h2",{style:{marginTop:0,color:"#1a1a1a",fontSize:"1.8rem",fontWeight:"800"},children:" Add New Category"}),o.jsxs("div",{style:{marginBottom:"1.2rem"},children:[o.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"700",color:"#1a1a1a"},children:"Category Name *"}),o.jsx("input",{type:"text",value:p.name,onChange:k=>_({...p,name:k.target.value}),placeholder:"e.g., Computers, Home & Kitchen",style:{width:"100%",padding:"0.75rem",border:"2px solid #1a1a1a",borderRadius:"8px",fontSize:"1rem",fontWeight:"600"}}),o.jsx("p",{style:{fontSize:"0.85rem",color:"#666",marginTop:"0.5rem",fontWeight:"600"},children:" Name will be converted to lowercase with hyphens"})]}),o.jsxs("div",{style:{marginBottom:"1.5rem"},children:[o.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"700",color:"#1a1a1a"},children:"Description"}),o.jsx("textarea",{value:p.description,onChange:k=>_({...p,description:k.target.value}),placeholder:"Optional: Brief description of the category",rows:"3",style:{width:"100%",padding:"0.75rem",border:"2px solid #1a1a1a",borderRadius:"8px",fontSize:"1rem",fontFamily:"inherit",fontWeight:"600"}})]}),o.jsx("button",{type:"submit",style:{width:"100%",padding:"1rem",backgroundColor:"#e71d36",color:"#fff",border:"none",borderRadius:"8px",fontWeight:"800",cursor:"pointer",fontSize:"1.1rem",boxShadow:"0 4px 6px rgba(0,0,0,0.1)"},children:" Add Category"})]})}),o.jsxs("div",{children:[o.jsxs("h2",{style:{color:"#1a1a1a",fontSize:"1.8rem",fontWeight:"800",marginBottom:"1rem"},children:[" Existing Categories (",Object.keys(m).length,")"]}),o.jsx("div",{style:{display:"grid",gap:"1rem",maxHeight:"600px",overflowY:"auto"},children:Object.entries(m).map(([k,A])=>o.jsx("div",{style:{backgroundColor:"#fff",padding:"1.5rem",borderRadius:"12px",border:"2px solid #1a1a1a",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"start"},children:[o.jsxs("div",{style:{flex:1},children:[o.jsx("h3",{style:{margin:"0 0 0.75rem 0",color:"#1a1a1a",fontSize:"1.4rem",fontWeight:"800"},children:k.charAt(0).toUpperCase()+k.slice(1)}),o.jsxs("p",{style:{margin:"0.5rem 0",color:"#666",fontSize:"1rem",fontWeight:"700"},children:[" ",A.length," subsections"]}),o.jsx("div",{style:{marginTop:"0.75rem",display:"flex",flexWrap:"wrap",gap:"0.4rem"},children:A.map(z=>o.jsx("span",{style:{backgroundColor:"#1a1a1a",color:"#fff",padding:"0.3rem 0.7rem",borderRadius:"6px",fontSize:"0.85rem",fontWeight:"700"},children:z},z))})]}),o.jsx("button",{onClick:()=>zr(k),style:{backgroundColor:"#e71d36",border:"none",color:"#fff",cursor:"pointer",padding:"0.75rem 1rem",borderRadius:"8px",fontSize:"1rem",fontWeight:"800",marginLeft:"1rem",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:" Delete"})]})},k))})]})]}),o.jsxs("div",{style:{marginTop:"3rem",background:"linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%)",padding:"2rem",borderRadius:"12px",display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1.5rem",boxShadow:"0 4px 12px rgba(0,0,0,0.1)"},children:[o.jsxs("div",{style:{padding:"1.5rem",backgroundColor:"#fff",borderRadius:"12px",border:"3px solid #e71d36",textAlign:"center",boxShadow:"0 4px 8px rgba(0,0,0,0.1)"},children:[o.jsx("p",{style:{margin:"0 0 0.5rem 0",color:"#666",fontSize:"1rem",fontWeight:"700"},children:" Total Products"}),o.jsx("h3",{style:{margin:0,color:"#e71d36",fontSize:"3rem",fontWeight:"900"},children:y.length})]}),o.jsxs("div",{style:{padding:"1.5rem",backgroundColor:"#fff",borderRadius:"12px",border:"3px solid #e71d36",textAlign:"center",boxShadow:"0 4px 8px rgba(0,0,0,0.1)"},children:[o.jsx("p",{style:{margin:"0 0 0.5rem 0",color:"#666",fontSize:"1rem",fontWeight:"700"},children:" Total Categories"}),o.jsx("h3",{style:{margin:0,color:"#e71d36",fontSize:"3rem",fontWeight:"900"},children:Object.keys(m).length})]}),o.jsxs("div",{style:{padding:"1.5rem",backgroundColor:"#fff",borderRadius:"12px",border:"3px solid #e71d36",textAlign:"center",boxShadow:"0 4px 8px rgba(0,0,0,0.1)"},children:[o.jsx("p",{style:{margin:"0 0 0.5rem 0",color:"#666",fontSize:"1rem",fontWeight:"700"},children:" Total Subsections"}),o.jsx("h3",{style:{margin:0,color:"#e71d36",fontSize:"3rem",fontWeight:"900"},children:Object.values(m).reduce((k,A)=>k+A.length,0)})]})]})]})}const mP=()=>{const[t,e]=S.useState(""),[n,r]=S.useState("admin@drift.com"),[s,i]=S.useState("Admin User"),[a,l]=S.useState("admin"),[c,u]=S.useState(""),[h,f]=S.useState(!1),{user:d}=st(),x=async p=>{p.preventDefault(),f(!0),u("");try{const _=t||(d?d.uid:"");if(!_){u(" Please provide a User UID or login first"),f(!1);return}const m=M(F,`users/${_}`);await De(m,{email:n,fullName:s,username:a,role:"admin",createdAt:Date.now()}),u(` Success! Admin user created for UID: ${_}`),console.log(" Admin user added to Realtime Database:",_),e("")}catch(_){console.error("Error setting up admin:",_),u(` Error: ${_.message}`)}finally{f(!1)}},w=()=>{d?(e(d.uid),r(d.email),u(`Using current logged-in user: ${d.email}`)):u(" No user is currently logged in")};return o.jsx("div",{style:ae.container,children:o.jsxs("div",{style:ae.card,children:[o.jsx("h1",{style:ae.title,children:" Admin Setup"}),o.jsx("p",{style:ae.subtitle,children:"Add admin role to a user in Realtime Database"}),d&&o.jsxs("div",{style:ae.infoBox,children:[o.jsx("p",{children:o.jsx("strong",{children:"Currently logged in as:"})}),o.jsx("p",{children:d.email}),o.jsxs("p",{children:[o.jsx("strong",{children:"UID:"})," ",d.uid]}),o.jsxs("p",{children:[o.jsx("strong",{children:"Role:"})," ",d.role]}),o.jsx("button",{type:"button",onClick:w,style:ae.secondaryButton,children:"Use Current User"})]}),o.jsxs("form",{onSubmit:x,style:ae.form,children:[o.jsxs("div",{style:ae.formGroup,children:[o.jsx("label",{style:ae.label,children:"User UID (from Firebase Auth Console)"}),o.jsx("input",{type:"text",value:t,onChange:p=>e(p.target.value),placeholder:"Paste User UID here",style:ae.input}),o.jsx("small",{style:ae.helpText,children:"Get this from Firebase Console  Authentication  Users"})]}),o.jsxs("div",{style:ae.formGroup,children:[o.jsx("label",{style:ae.label,children:"Email"}),o.jsx("input",{type:"email",value:n,onChange:p=>r(p.target.value),required:!0,style:ae.input})]}),o.jsxs("div",{style:ae.formGroup,children:[o.jsx("label",{style:ae.label,children:"Full Name"}),o.jsx("input",{type:"text",value:s,onChange:p=>i(p.target.value),required:!0,style:ae.input})]}),o.jsxs("div",{style:ae.formGroup,children:[o.jsx("label",{style:ae.label,children:"Username"}),o.jsx("input",{type:"text",value:a,onChange:p=>l(p.target.value),required:!0,style:ae.input})]}),o.jsx("button",{type:"submit",disabled:h,style:{...ae.button,opacity:h?.6:1},children:h?" Setting up...":" Create Admin User"})]}),c&&o.jsx("div",{style:{...ae.message,backgroundColor:c.includes("")?"#d4edda":"#f8d7da",color:c.includes("")?"#155724":"#721c24",borderColor:c.includes("")?"#c3e6cb":"#f5c6cb"},children:c}),o.jsxs("div",{style:ae.instructions,children:[o.jsx("h3",{children:" Instructions:"}),o.jsxs("ol",{children:[o.jsx("li",{children:"Create a user in Firebase Console  Authentication  Add User"}),o.jsx("li",{children:"Copy the User UID from the users list"}),o.jsx("li",{children:"Paste the UID above and fill in the details"}),o.jsx("li",{children:'Click "Create Admin User"'}),o.jsx("li",{children:"Login with the credentials"}),o.jsx("li",{children:"Access admin dashboard at /admin/products"})]})]}),o.jsxs("div",{style:ae.warning,children:[" ",o.jsx("strong",{children:"Security Note:"})," Remove this component after setting up your admin user!"]})]})})},ae={container:{minHeight:"100vh",background:"linear-gradient(135deg, #1a1a1a 0%, #000000 100%)",padding:"40px 20px",display:"flex",justifyContent:"center",alignItems:"center"},card:{backgroundColor:"#ffffff",borderRadius:"12px",padding:"40px",maxWidth:"600px",width:"100%",boxShadow:"0 10px 40px rgba(231, 29, 54, 0.3)"},title:{fontSize:"32px",fontWeight:"bold",color:"#e71d36",marginBottom:"10px",textAlign:"center"},subtitle:{color:"#666",textAlign:"center",marginBottom:"30px"},infoBox:{backgroundColor:"#f9f9f9",border:"2px solid #e71d36",borderRadius:"8px",padding:"15px",marginBottom:"20px"},form:{display:"flex",flexDirection:"column",gap:"20px"},formGroup:{display:"flex",flexDirection:"column",gap:"8px"},label:{fontWeight:"600",color:"#1a1a1a",fontSize:"14px"},input:{padding:"12px",border:"2px solid #e0e0e0",borderRadius:"6px",fontSize:"14px",transition:"border-color 0.3s",outline:"none"},helpText:{color:"#666",fontSize:"12px"},button:{backgroundColor:"#e71d36",color:"#ffffff",padding:"14px",border:"none",borderRadius:"6px",fontSize:"16px",fontWeight:"bold",cursor:"pointer",transition:"background-color 0.3s",marginTop:"10px"},secondaryButton:{backgroundColor:"#1a1a1a",color:"#ffffff",padding:"10px 20px",border:"none",borderRadius:"6px",fontSize:"14px",fontWeight:"bold",cursor:"pointer",marginTop:"10px"},message:{padding:"15px",borderRadius:"6px",marginTop:"20px",border:"1px solid",fontWeight:"500"},instructions:{backgroundColor:"#f9f9f9",padding:"20px",borderRadius:"8px",marginTop:"30px",borderLeft:"4px solid #e71d36"},warning:{backgroundColor:"#fff3cd",border:"1px solid #ffc107",color:"#856404",padding:"15px",borderRadius:"6px",marginTop:"20px",textAlign:"center"}},gP=()=>{const{user:t}=st(),[e,n]=S.useState({totalSales:0,productCount:0,customerCount:0,orderCount:0}),[r,s]=S.useState(!0);S.useEffect(()=>{i();const l=setInterval(()=>{i()},3e4);return()=>clearInterval(l)},[]);const i=async()=>{try{const l=M(F,"products"),c=await oe(l),u=c.exists()?Object.keys(c.val()).length:0,h=M(F,"orders"),f=await oe(h);let d=0,x=0;if(f.exists()){const m=f.val();x=Object.keys(m).length,Object.values(m).forEach(g=>{d+=g.total||0})}const w=M(F,"users"),p=await oe(w);let _=0;if(p.exists()){const m=p.val();_=Object.values(m).filter(g=>g.role!=="admin").length}n({totalSales:d.toFixed(2),productCount:u,customerCount:_,orderCount:x})}catch(l){console.error("Error loading dashboard stats:",l)}finally{s(!1)}},a=[{title:"Homepage Manager",description:" Upload banners and manage homepage content from your computer.",icon:"",link:"/admin/homepage",color:"#e71d36",highlight:!0},{title:"Product Management",description:"Add, edit, delete products. Mark trending/featured items.",icon:"",link:"/admin/products",color:"#e71d36"},{title:"Banner Management",description:"Manage homepage carousel banners and promotional images.",icon:"",link:"/admin/banners",color:"#e71d36"},{title:"Order Management",description:"View and manage all customer orders.",icon:"",link:"/admin/orders",color:"#e71d36"},{title:"Stock Management",description:"Track inventory, stock levels, and stock value.",icon:"",link:"/admin/stock",color:"#e71d36"},{title:"Customer Management",description:"Manage customers and admin users.",icon:"",link:"/admin/customers",color:"#e71d36"},{title:"Analytics",description:"View sales reports and website analytics.",icon:"",link:"/admin/analytics",color:"#e71d36"}];return o.jsxs("div",{className:"admin-dashboard",children:[o.jsxs("div",{className:"admin-dashboard-header",children:[o.jsxs("div",{className:"header-content",children:[o.jsx("h1",{children:"Admin Dashboard"}),o.jsxs("p",{children:["Welcome back, ",(t==null?void 0:t.fullName)||(t==null?void 0:t.email)||"Admin","!"]})]}),o.jsxs("div",{className:"header-stats",children:[o.jsxs("div",{className:"stat-card",children:[o.jsx("span",{className:"stat-icon",children:""}),o.jsxs("div",{className:"stat-info",children:[o.jsx("h3",{children:"Total Sales"}),o.jsxs("p",{className:"stat-value",children:["",r?"...":e.totalSales]})]})]}),o.jsxs("div",{className:"stat-card",children:[o.jsx("span",{className:"stat-icon",children:""}),o.jsxs("div",{className:"stat-info",children:[o.jsx("h3",{children:"Products"}),o.jsx("p",{className:"stat-value",children:r?"...":e.productCount})]})]}),o.jsxs("div",{className:"stat-card",children:[o.jsx("span",{className:"stat-icon",children:""}),o.jsxs("div",{className:"stat-info",children:[o.jsx("h3",{children:"Customers"}),o.jsx("p",{className:"stat-value",children:r?"...":e.customerCount})]})]}),o.jsxs("div",{className:"stat-card",children:[o.jsx("span",{className:"stat-icon",children:""}),o.jsxs("div",{className:"stat-info",children:[o.jsx("h3",{children:"Orders"}),o.jsx("p",{className:"stat-value",children:r?"...":e.orderCount})]})]})]})]}),o.jsx("div",{className:"dashboard-grid",children:a.map((l,c)=>o.jsxs(R,{to:l.link,className:`dashboard-card ${l.highlight?"highlight":""}`,style:{borderColor:l.color},children:[o.jsx("div",{className:"card-icon",style:{backgroundColor:`${l.color}20`},children:o.jsx("span",{style:{fontSize:"3rem"},children:l.icon})}),o.jsxs("div",{className:"card-content",children:[o.jsx("h3",{style:{color:l.color},children:l.title}),o.jsx("p",{children:l.description})]}),o.jsx("div",{className:"card-arrow",style:{color:l.color},children:""})]},c))}),o.jsxs("div",{className:"quick-actions",children:[o.jsx("h2",{children:"Quick Actions"}),o.jsxs("div",{className:"action-buttons",children:[o.jsxs(R,{to:"/admin/products",className:"action-btn add-product",children:[o.jsx("span",{children:""})," Add New Product"]}),o.jsxs(R,{to:"/admin/homepage",className:"action-btn add-banner",children:[o.jsx("span",{children:""})," Manage Homepage"]}),o.jsxs(R,{to:"/admin/orders",className:"action-btn view-orders",children:[o.jsx("span",{children:""})," View Orders"]})]})]})]})},yP=()=>{const{user:t}=st(),[e,n]=S.useState([]),[r,s]=S.useState(!1),[i,a]=S.useState(!1),[l,c]=S.useState({title:"",description:"",link:"",isActive:!0,order:0}),[u,h]=S.useState(null),[f,d]=S.useState("");S.useEffect(()=>{x()},[]);const x=async()=>{s(!0);try{const v=await Nt.getAllBanners();n(v)}catch(v){console.error("Error loading banners:",v),alert("Failed to load banners")}finally{s(!1)}},w=v=>{const C=v.target.files[0];if(C){h(C);const E=new FileReader;E.onloadend=()=>{d(E.result)},E.readAsDataURL(C)}},p=v=>{const{name:C,value:E,type:b,checked:I}=v.target;c({...l,[C]:b==="checkbox"?I:E})},_=async v=>{if(v.preventDefault(),!l.title||!u){alert("Please enter a title and upload an image");return}a(!0);try{await Nt.createBanner(l,u),alert(" Banner added successfully!"),c({title:"",description:"",link:"",isActive:!0,order:0}),h(null),d(""),x()}catch(C){console.error("Error adding banner:",C),alert("Failed to add banner. Please try again.")}finally{a(!1)}},m=async(v,C)=>{try{await Nt.updateBanner(v,{isActive:!C}),x()}catch(E){console.error("Error toggling banner status:",E),alert("Failed to update banner status")}},g=async v=>{if(window.confirm("Are you sure you want to delete this banner?"))try{await Nt.deleteBanner(v),alert("Banner deleted successfully!"),x()}catch(C){console.error("Error deleting banner:",C),alert("Failed to delete banner")}},y=async(v,C)=>{try{await Nt.updateBanner(v,{order:parseInt(C)}),x()}catch(E){console.error("Error updating banner order:",E),alert("Failed to update banner order")}};return o.jsxs("div",{className:"banner-management",children:[o.jsxs("div",{className:"page-header",children:[o.jsx("h1",{children:" Banner Management"}),o.jsx("p",{children:"Manage homepage carousel banners and promotional images"})]}),o.jsxs("div",{className:"banner-grid",children:[o.jsxs("div",{className:"banner-form-card",children:[o.jsx("h2",{children:" Add New Banner"}),o.jsxs("form",{onSubmit:_,children:[o.jsxs("div",{className:"form-group",children:[o.jsx("label",{children:"Banner Title *"}),o.jsx("input",{type:"text",name:"title",value:l.title,onChange:p,placeholder:"e.g., Summer Sale 2025",required:!0})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{children:"Description"}),o.jsx("textarea",{name:"description",value:l.description,onChange:p,placeholder:"Brief description of the banner",rows:"3"})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{children:"Link URL (optional)"}),o.jsx("input",{type:"text",name:"link",value:l.link,onChange:p,placeholder:"/products?category=electronics"})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{children:"Display Order"}),o.jsx("input",{type:"number",name:"order",value:l.order,onChange:p,placeholder:"0",min:"0"}),o.jsx("small",{children:"Lower numbers appear first"})]}),o.jsx("div",{className:"form-group checkbox-group",children:o.jsxs("label",{children:[o.jsx("input",{type:"checkbox",name:"isActive",checked:l.isActive,onChange:p}),o.jsx("span",{children:"Active (show on homepage)"})]})}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{children:"Banner Image *"}),o.jsx("input",{type:"file",accept:"image/*",onChange:w,required:!0}),o.jsx("small",{children:"Recommended: 1920x600px, JPG or PNG"})]}),f&&o.jsx("div",{className:"image-preview",children:o.jsx("img",{src:f,alt:"Banner preview"})}),o.jsx("button",{type:"submit",className:"submit-btn",disabled:i,children:i?" Uploading...":" Add Banner"})]})]}),o.jsxs("div",{className:"banner-list-card",children:[o.jsxs("h2",{children:[" Existing Banners (",e.length,")"]}),r?o.jsx("div",{className:"loading",children:"Loading banners..."}):e.length===0?o.jsx("div",{className:"empty-state",children:o.jsx("p",{children:"No banners yet. Add your first banner!"})}):o.jsx("div",{className:"banner-list",children:e.map(v=>o.jsxs("div",{className:`banner-item ${v.isActive?"":"inactive"}`,children:[o.jsxs("div",{className:"banner-preview",children:[o.jsx("img",{src:v.imageUrl,alt:v.title}),!v.isActive&&o.jsx("div",{className:"inactive-overlay",children:"Inactive"})]}),o.jsxs("div",{className:"banner-info",children:[o.jsx("h3",{children:v.title}),v.description&&o.jsx("p",{children:v.description}),v.link&&o.jsxs("div",{className:"banner-link",children:[o.jsx("span",{children:" Link: "}),o.jsx("a",{href:v.link,target:"_blank",rel:"noopener noreferrer",children:v.link})]}),o.jsxs("div",{className:"banner-meta",children:[o.jsxs("span",{className:"order-badge",children:["Order: ",v.order]}),o.jsx("span",{className:`status-badge ${v.isActive?"active":"inactive"}`,children:v.isActive?" Active":" Inactive"})]})]}),o.jsxs("div",{className:"banner-actions",children:[o.jsxs("div",{className:"order-control",children:[o.jsx("label",{children:"Order:"}),o.jsx("input",{type:"number",value:v.order,onChange:C=>y(v.id,C.target.value),min:"0"})]}),o.jsx("button",{className:"toggle-btn",onClick:()=>m(v.id,v.isActive),children:v.isActive?"Deactivate":"Activate"}),o.jsx("button",{className:"delete-btn",onClick:()=>g(v.id),children:" Delete"})]})]},v.id))})]})]})]})},vP=()=>{const{user:t}=st(),[e,n]=S.useState([]),[r,s]=S.useState(!1),[i,a]=S.useState(!1),[l,c]=S.useState("banners"),[u,h]=S.useState({title:"",subtitle:"",buttonText:"",buttonLink:"",order:0,isActive:!0}),[f,d]=S.useState(null),[x,w]=S.useState("");S.useEffect(()=>{p()},[]);const p=async()=>{s(!0);try{const C=await Nt.getAllBanners();n(C)}catch(C){console.error("Error loading banners:",C)}finally{s(!1)}},_=C=>{const E=C.target.files[0];if(E){if(E.size/1048576>5){alert(" Image size should be less than 5MB for better performance");return}d(E);const I=new FileReader;I.onloadend=()=>{w(I.result)},I.readAsDataURL(E)}},m=async C=>{if(C.preventDefault(),!u.title||!f){alert(" Please enter a title and upload an image");return}a(!0);try{await Nt.createBanner(u,f),alert(" Banner uploaded successfully!"),h({title:"",subtitle:"",buttonText:"",buttonLink:"",order:0,isActive:!0}),d(null),w(""),document.getElementById("banner-file-input").value="",p()}catch(E){console.error("Error uploading banner:",E),alert(" Failed to upload banner. Please try again.")}finally{a(!1)}},g=async C=>{if(window.confirm("Are you sure you want to delete this banner?"))try{await Nt.deleteBanner(C),alert(" Banner deleted successfully!"),p()}catch(E){console.error("Error deleting banner:",E),alert(" Failed to delete banner")}},y=async(C,E)=>{try{await Nt.updateBanner(C,{isActive:!E}),p()}catch(b){console.error("Error toggling banner:",b),alert(" Failed to update banner status")}},v=async(C,E)=>{try{await Nt.updateBanner(C,{order:parseInt(E)}),p()}catch(b){console.error("Error updating order:",b)}};return o.jsxs("div",{className:"homepage-manager",children:[o.jsxs("div",{className:"manager-header",children:[o.jsx("h1",{children:" Homepage Content Manager"}),o.jsx("p",{children:"Upload and manage homepage banners, images, and featured content"})]}),o.jsxs("div",{className:"section-tabs",children:[o.jsx("button",{className:l==="banners"?"active":"",onClick:()=>c("banners"),children:" Carousel Banners"}),o.jsx("button",{className:l==="hero"?"active":"",onClick:()=>c("hero"),children:" Hero Section"}),o.jsx("button",{className:l==="preview"?"active":"",onClick:()=>c("preview"),children:" Preview Homepage"})]}),l==="banners"&&o.jsxs("div",{className:"content-section",children:[o.jsx("div",{className:"upload-section",children:o.jsxs("div",{className:"upload-card",children:[o.jsx("h2",{children:" Upload New Banner"}),o.jsx("p",{className:"helper-text",children:"Recommended size: 1920x600px  Max size: 5MB  Format: JPG, PNG"}),o.jsxs("form",{onSubmit:m,children:[o.jsxs("div",{className:"form-grid",children:[o.jsxs("div",{className:"form-group full-width",children:[o.jsx("label",{children:" Banner Title *"}),o.jsx("input",{type:"text",placeholder:"e.g., Big Summer Sale 2025",value:u.title,onChange:C=>h({...u,title:C.target.value}),required:!0})]}),o.jsxs("div",{className:"form-group full-width",children:[o.jsx("label",{children:" Subtitle (Optional)"}),o.jsx("input",{type:"text",placeholder:"e.g., Up to 70% off on electronics",value:u.subtitle,onChange:C=>h({...u,subtitle:C.target.value})})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{children:" Button Text (Optional)"}),o.jsx("input",{type:"text",placeholder:"e.g., Shop Now",value:u.buttonText,onChange:C=>h({...u,buttonText:C.target.value})})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{children:" Button Link (Optional)"}),o.jsx("input",{type:"text",placeholder:"e.g., /products?category=electronics",value:u.buttonLink,onChange:C=>h({...u,buttonLink:C.target.value})})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{children:" Display Order"}),o.jsx("input",{type:"number",min:"0",value:u.order,onChange:C=>h({...u,order:C.target.value})}),o.jsx("small",{children:"Lower numbers appear first"})]}),o.jsx("div",{className:"form-group",children:o.jsxs("label",{className:"checkbox-label",children:[o.jsx("input",{type:"checkbox",checked:u.isActive,onChange:C=>h({...u,isActive:C.target.checked})}),o.jsx("span",{children:" Active (show on homepage)"})]})})]}),o.jsxs("div",{className:"image-upload-section",children:[o.jsxs("label",{className:"file-upload-label",children:[o.jsx("input",{id:"banner-file-input",type:"file",accept:"image/*",onChange:_,required:!0}),o.jsxs("div",{className:"upload-button",children:[o.jsx("span",{className:"upload-icon",children:""}),o.jsx("span",{children:"Choose Banner Image from Computer"})]})]}),x&&o.jsxs("div",{className:"image-preview-container",children:[o.jsx("img",{src:x,alt:"Banner preview"}),o.jsx("button",{type:"button",className:"remove-preview",onClick:()=>{d(null),w(""),document.getElementById("banner-file-input").value=""},children:" Remove"})]})]}),o.jsx("button",{type:"submit",className:"submit-button",disabled:i,children:i?" Uploading...":" Upload Banner"})]})]})}),o.jsxs("div",{className:"banners-list-section",children:[o.jsxs("h2",{children:[" Current Banners (",e.length,")"]}),r?o.jsx("div",{className:"loading-state",children:"Loading banners..."}):e.length===0?o.jsxs("div",{className:"empty-state",children:[o.jsx("p",{children:" No banners uploaded yet"}),o.jsx("p",{children:"Upload your first banner above to get started!"})]}):o.jsx("div",{className:"banners-grid",children:e.map(C=>o.jsxs("div",{className:`banner-card ${C.isActive?"":"inactive"}`,children:[o.jsxs("div",{className:"banner-image-container",children:[o.jsx("img",{src:C.imageUrl,alt:C.title}),!C.isActive&&o.jsx("div",{className:"inactive-badge",children:"Inactive"}),o.jsxs("div",{className:"status-badge",children:["Order: ",C.order]})]}),o.jsxs("div",{className:"banner-details",children:[o.jsx("h3",{children:C.title}),C.subtitle&&o.jsx("p",{className:"subtitle",children:C.subtitle}),C.buttonText&&o.jsxs("div",{className:"button-info",children:[o.jsx("span",{className:"button-preview",children:C.buttonText}),C.buttonLink&&o.jsxs("span",{className:"link-text",children:[" ",C.buttonLink]})]})]}),o.jsxs("div",{className:"banner-actions",children:[o.jsx("input",{type:"number",className:"order-input",value:C.order,onChange:E=>v(C.id,E.target.value),min:"0"}),o.jsx("button",{className:`toggle-button ${C.isActive?"active":"inactive"}`,onClick:()=>y(C.id,C.isActive),children:C.isActive?" Active":" Inactive"}),o.jsx("button",{className:"delete-button",onClick:()=>g(C.id),children:""})]})]},C.id))})]})]}),l==="hero"&&o.jsx("div",{className:"content-section",children:o.jsxs("div",{className:"hero-manager",children:[o.jsx("h2",{children:" Hero Section Manager"}),o.jsx("p",{style:{color:"#666",marginBottom:"2rem"},children:"Manage your homepage hero banner and main call-to-action."}),o.jsxs("div",{style:{background:"white",padding:"2rem",borderRadius:"12px",border:"1px solid #e8e8e8"},children:[o.jsx("h3",{style:{marginBottom:"1.5rem"},children:"Hero Content"}),o.jsxs("div",{style:{display:"grid",gap:"1.5rem"},children:[o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600"},children:"Main Heading"}),o.jsx("input",{type:"text",defaultValue:"Welcome to DRIFT ENTERPRISES",style:{width:"100%",padding:"0.75rem",borderRadius:"8px",border:"1px solid #ddd",fontSize:"1rem"},placeholder:"Enter main heading"})]}),o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600"},children:"Subheading"}),o.jsx("input",{type:"text",defaultValue:"Your One-Stop Shop for All Your Needs",style:{width:"100%",padding:"0.75rem",borderRadius:"8px",border:"1px solid #ddd",fontSize:"1rem"},placeholder:"Enter subheading"})]}),o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600"},children:"Call-to-Action Button Text"}),o.jsx("input",{type:"text",defaultValue:"Shop Now",style:{width:"100%",padding:"0.75rem",borderRadius:"8px",border:"1px solid #ddd",fontSize:"1rem"},placeholder:"Button text"})]}),o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600"},children:"Button Link"}),o.jsx("input",{type:"text",defaultValue:"/products",style:{width:"100%",padding:"0.75rem",borderRadius:"8px",border:"1px solid #ddd",fontSize:"1rem"},placeholder:"/products"})]}),o.jsx("button",{style:{padding:"0.75rem 2rem",background:"#e71d36",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:"600",fontSize:"1rem"},onClick:()=>alert(" Hero section settings updated! (Static demo - add Firebase integration if needed)"),children:" Save Hero Settings"}),o.jsx("p",{style:{color:"#666",fontSize:"0.9rem",fontStyle:"italic"},children:"Note: Hero banner is managed in the Banners section. This section controls the hero text overlay."})]})]})]})}),l==="preview"&&o.jsx("div",{className:"content-section",children:o.jsxs("div",{className:"preview-section",children:[o.jsx("h2",{children:" Homepage Preview"}),o.jsx("p",{children:"See how your homepage looks with current banners"}),o.jsx("a",{href:"/",target:"_blank",rel:"noopener noreferrer",className:"preview-button",children:" Open Homepage in New Tab"})]})})]})},xP=()=>{const[t,e]=S.useState([]),[n,r]=S.useState(!0),[s,i]=S.useState(""),[a,l]=S.useState("all"),[c,u]=S.useState("all"),h=["Main Warehouse","Store 1","Store 2","Online Warehouse"];S.useEffect(()=>{f()},[]);const f=async()=>{r(!0);try{const m=await dn.getAllProducts();e(m)}catch(m){console.error("Error loading products:",m)}finally{r(!1)}},d=async(m,g)=>{try{await dn.updateProduct(m,{stock:parseInt(g)}),f()}catch(y){console.error("Error updating stock:",y),alert("Failed to update stock")}},x=t.filter(m=>{const g=m.name||m.title||"",y=m.sku||m.id||"",v=m.brand||"",C=g.toLowerCase().includes(s.toLowerCase())||y.toLowerCase().includes(s.toLowerCase())||v.toLowerCase().includes(s.toLowerCase());let E=!0;const b=m.stock||0;return a==="low-stock"?E=b>0&&b<=10:a==="out-of-stock"&&(E=b===0),C&&E}),w=t.reduce((m,g)=>m+g.price*(g.stock||0),0),p=t.filter(m=>m.stock>0&&m.stock<=10).length,_=t.filter(m=>m.stock===0).length;return o.jsxs("div",{className:"stock-management",children:[o.jsx("div",{className:"page-header",children:o.jsxs("div",{children:[o.jsx("h1",{children:" Stock Management"}),o.jsx("p",{children:"Track inventory levels, stock valuation, and manage product locations"})]})}),o.jsxs("div",{className:"stats-grid",children:[o.jsxs("div",{className:"stat-card",children:[o.jsx("div",{className:"stat-icon",children:""}),o.jsxs("div",{className:"stat-info",children:[o.jsx("h3",{children:"Total Products"}),o.jsx("p",{className:"stat-value",children:t.length})]})]}),o.jsxs("div",{className:"stat-card alert",children:[o.jsx("div",{className:"stat-icon",children:""}),o.jsxs("div",{className:"stat-info",children:[o.jsx("h3",{children:"Low Stock"}),o.jsx("p",{className:"stat-value",children:p})]})]}),o.jsxs("div",{className:"stat-card danger",children:[o.jsx("div",{className:"stat-icon",children:""}),o.jsxs("div",{className:"stat-info",children:[o.jsx("h3",{children:"Out of Stock"}),o.jsx("p",{className:"stat-value",children:_})]})]}),o.jsxs("div",{className:"stat-card success",children:[o.jsx("div",{className:"stat-icon",children:""}),o.jsxs("div",{className:"stat-info",children:[o.jsx("h3",{children:"Total Stock Value"}),o.jsxs("p",{className:"stat-value",children:["",w.toLocaleString()]})]})]})]}),o.jsxs("div",{className:"filters-section",children:[o.jsx("div",{className:"search-box",children:o.jsx("input",{type:"text",placeholder:" Search by product name or SKU...",value:s,onChange:m=>i(m.target.value)})}),o.jsxs("div",{className:"filter-controls",children:[o.jsxs("select",{value:a,onChange:m=>l(m.target.value),children:[o.jsx("option",{value:"all",children:"All Products"}),o.jsx("option",{value:"low-stock",children:"Low Stock (10)"}),o.jsx("option",{value:"out-of-stock",children:"Out of Stock"})]}),o.jsxs("select",{value:c,onChange:m=>u(m.target.value),children:[o.jsx("option",{value:"all",children:"All Locations"}),h.map(m=>o.jsx("option",{value:m,children:m},m))]})]})]}),o.jsx("div",{className:"stock-table-container",children:n?o.jsx("div",{className:"loading-state",children:"Loading products..."}):x.length===0?o.jsx("div",{className:"empty-state",children:o.jsx("p",{children:" No products found"})}):o.jsxs("table",{className:"stock-table",children:[o.jsx("thead",{children:o.jsxs("tr",{children:[o.jsx("th",{children:"Image"}),o.jsx("th",{children:"Product Name"}),o.jsx("th",{children:"SKU"}),o.jsx("th",{children:"Current Stock"}),o.jsx("th",{children:"Price"}),o.jsx("th",{children:"Stock Value"}),o.jsx("th",{children:"Status"}),o.jsx("th",{children:"Actions"})]})}),o.jsx("tbody",{children:x.map(m=>{var E,b;const g=m.stock||0,y=g*m.price;let v="in-stock",C="In Stock";return g===0?(v="out-of-stock",C="Out of Stock"):g<=10&&(v="low-stock",C="Low Stock"),o.jsxs("tr",{children:[o.jsx("td",{children:o.jsx("img",{src:((E=m.images)==null?void 0:E[0])||m.image||"/placeholder.png",alt:m.name,className:"product-thumb"})}),o.jsx("td",{className:"product-name",children:m.name||m.title||"Unnamed Product"}),o.jsx("td",{children:m.sku||m.id||"N/A"}),o.jsx("td",{children:o.jsx("input",{type:"number",className:"stock-input",value:g,min:"0",onChange:I=>d(m.id,I.target.value)})}),o.jsxs("td",{children:["",(b=m.price)==null?void 0:b.toLocaleString()]}),o.jsxs("td",{className:"stock-value",children:["",y.toLocaleString()]}),o.jsx("td",{children:o.jsx("span",{className:`status-badge ${v}`,children:C})}),o.jsx("td",{children:o.jsxs("div",{className:"action-buttons",children:[o.jsx("button",{className:"btn-icon",title:"Stock History",children:""}),o.jsx("button",{className:"btn-icon",title:"Adjust Stock",children:""})]})})]},m.id)})})]})}),o.jsxs("div",{className:"quick-actions-section",children:[o.jsx("h3",{children:"Quick Actions"}),o.jsxs("div",{className:"action-cards",children:[o.jsxs("button",{className:"action-card",children:[o.jsx("span",{className:"action-icon",children:""}),o.jsx("span",{children:"Import Stock CSV"})]}),o.jsxs("button",{className:"action-card",children:[o.jsx("span",{className:"action-icon",children:""}),o.jsx("span",{children:"Export Stock Report"})]}),o.jsxs("button",{className:"action-card",children:[o.jsx("span",{className:"action-icon",children:""}),o.jsx("span",{children:"Set Low Stock Alerts"})]})]})]})]})},_P=()=>{const[t,e]=S.useState([]),[n,r]=S.useState([]),[s,i]=S.useState([]),[a,l]=S.useState("month"),[c,u]=S.useState(!0),[h,f]=S.useState(new Date),[d,x]=S.useState({totalRevenue:0,totalOrders:0,totalCustomers:0,avgOrderValue:0,categoryPerformance:{}});S.useEffect(()=>{w();const p=setInterval(()=>{w()},3e4);return()=>clearInterval(p)},[]);const w=async()=>{u(!0);try{f(new Date);const p=await dn.getAllProducts();e(p);const _=M(F,"orders"),m=await oe(_),g=m.exists()?Object.entries(m.val()).map(([$,V])=>({id:$,...V})):[];r(g);const y=M(F,"users"),v=await oe(y),C=v.exists()?Object.entries(v.val()).filter(([$,V])=>V.role!=="admin").map(([$,V])=>({uid:$,...V})):[];i(C);const E=g.reduce(($,V)=>$+(V.total||0),0),b=g.length,I=C.length,U=b>0?E/b:0,j={};g.forEach($=>{$.items&&$.items.forEach(V=>{const ee=p.find(Se=>Se.id===V.id);if(ee){const Se=ee.category||"Other";j[Se]||(j[Se]={sales:0,revenue:0}),j[Se].sales+=V.quantity,j[Se].revenue+=V.price*V.quantity}})}),x({totalRevenue:E,totalOrders:b,totalCustomers:I,avgOrderValue:U,categoryPerformance:j})}catch(p){console.error("Error loading data:",p)}finally{u(!1)}};return o.jsxs("div",{className:"analytics-page",children:[o.jsxs("div",{className:"page-header",children:[o.jsxs("div",{children:[o.jsx("h1",{children:" Analytics Dashboard"}),o.jsx("p",{children:"Comprehensive insights into sales, products, and customer behavior"}),o.jsxs("div",{style:{marginTop:"0.5rem",display:"flex",alignItems:"center",gap:"1rem"},children:[o.jsxs("span",{style:{fontSize:"0.85rem",color:"#666",display:"flex",alignItems:"center",gap:"0.5rem"},children:[" Auto-refreshes every 30s  Last updated: ",h.toLocaleTimeString()]}),o.jsx("button",{onClick:()=>w(),disabled:c,style:{padding:"0.4rem 1rem",background:c?"#ccc":"#e71d36",color:"white",border:"none",borderRadius:"6px",cursor:c?"not-allowed":"pointer",fontSize:"0.85rem",fontWeight:"500"},children:c?" Refreshing...":" Refresh Now"})]})]}),o.jsxs("select",{value:a,onChange:p=>l(p.target.value),className:"time-filter",children:[o.jsx("option",{value:"week",children:"Last 7 Days"}),o.jsx("option",{value:"month",children:"Last 30 Days"}),o.jsx("option",{value:"year",children:"Last Year"})]})]}),o.jsxs("div",{className:"kpi-grid",children:[o.jsxs("div",{className:"kpi-card revenue",children:[o.jsx("div",{className:"kpi-icon",children:""}),o.jsxs("div",{className:"kpi-info",children:[o.jsx("h3",{children:"Total Revenue"}),o.jsxs("p",{className:"kpi-value",children:["",c?"...":d.totalRevenue.toLocaleString("en-IN",{maximumFractionDigits:0})]}),o.jsx("span",{className:"kpi-trend positive",children:" Real-time data"})]})]}),o.jsxs("div",{className:"kpi-card orders",children:[o.jsx("div",{className:"kpi-icon",children:""}),o.jsxs("div",{className:"kpi-info",children:[o.jsx("h3",{children:"Total Orders"}),o.jsx("p",{className:"kpi-value",children:c?"...":d.totalOrders}),o.jsx("span",{className:"kpi-trend positive",children:" Real-time data"})]})]}),o.jsxs("div",{className:"kpi-card customers",children:[o.jsx("div",{className:"kpi-icon",children:""}),o.jsxs("div",{className:"kpi-info",children:[o.jsx("h3",{children:"Total Customers"}),o.jsx("p",{className:"kpi-value",children:c?"...":d.totalCustomers}),o.jsx("span",{className:"kpi-trend positive",children:" Real-time data"})]})]}),o.jsxs("div",{className:"kpi-card avg-order",children:[o.jsx("div",{className:"kpi-icon",children:""}),o.jsxs("div",{className:"kpi-info",children:[o.jsx("h3",{children:"Avg Order Value"}),o.jsxs("p",{className:"kpi-value",children:["",c?"...":Math.round(d.avgOrderValue).toLocaleString("en-IN")]}),o.jsx("span",{className:"kpi-trend neutral",children:" Real-time data"})]})]})]}),o.jsxs("div",{className:"charts-grid",children:[o.jsxs("div",{className:"chart-card",children:[o.jsx("h3",{children:" Sales Overview (Last 7 Days)"}),o.jsx("div",{style:{padding:"2rem"},children:o.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:(()=>{const p=new Date,_=[],m=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];for(let y=6;y>=0;y--){const v=new Date(p);v.setDate(p.getDate()-y);const C=m[v.getDay()],E=n.filter(b=>b.createdAt?new Date(b.createdAt).toDateString()===v.toDateString():!1).reduce((b,I)=>b+(I.total||0),0);_.push({day:C,value:E})}const g=Math.max(..._.map(y=>y.value),1e3);return _.map(({day:y,value:v})=>{const C=v/g*100;return o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[o.jsx("span",{style:{minWidth:"40px",fontWeight:"500"},children:y}),o.jsx("div",{style:{flex:1,background:"#f0f0f0",borderRadius:"8px",height:"32px",position:"relative",overflow:"hidden"},children:o.jsx("div",{style:{width:`${C}%`,height:"100%",background:`linear-gradient(90deg, #e71d36 0%, #ff6b6b ${C}%)`,borderRadius:"8px",display:"flex",alignItems:"center",justifyContent:"flex-end",paddingRight:"0.5rem",color:"white",fontWeight:"bold",fontSize:"0.85rem",transition:"width 0.5s ease"},children:C>15&&v>0&&`${v>=1e3?(v/1e3).toFixed(1)+"k":v}`})}),o.jsxs("span",{style:{minWidth:"80px",fontSize:"0.9rem",color:"#666"},children:["",v.toLocaleString("en-IN")]})]},y)})})()})})]}),o.jsxs("div",{className:"chart-card",children:[o.jsx("h3",{children:" Category Performance"}),o.jsx("div",{style:{padding:"2rem"},children:Object.entries(d.categoryPerformance).length===0?o.jsx("p",{style:{color:"#999",textAlign:"center",padding:"2rem"},children:"No sales data yet"}):Object.entries(d.categoryPerformance).map(([p,_])=>{const m=Math.max(...Object.values(d.categoryPerformance).map(v=>v.revenue),2e5),g=_.revenue/m*100,y={Mobiles:"#e71d36",Electronics:"#ff6b6b",Appliances:"#ffa500","Home & Kitchen":"#28a745","Beauty & Personal Care":"#ff69b4","Books & Audible":"#4169e1",TV:"#9370db"};return o.jsxs("div",{style:{marginBottom:"1.5rem"},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.5rem"},children:[o.jsx("span",{style:{fontWeight:"600"},children:p}),o.jsxs("span",{style:{color:"#666"},children:[_.sales," sales  ",(_.revenue/1e3).toFixed(0),"k"]})]}),o.jsx("div",{style:{background:"#f0f0f0",borderRadius:"8px",height:"12px",overflow:"hidden"},children:o.jsx("div",{style:{width:`${g}%`,height:"100%",background:y[p]||"#e71d36",borderRadius:"8px",transition:"width 0.5s ease"}})})]},p)})})]})]}),o.jsxs("div",{className:"top-products-section",children:[o.jsx("h3",{children:" Top Selling Products"}),o.jsx("div",{className:"products-grid",children:c?o.jsx("p",{style:{gridColumn:"1/-1",textAlign:"center",color:"#999"},children:"Loading products..."}):t.length===0?o.jsx("p",{style:{gridColumn:"1/-1",textAlign:"center",color:"#999"},children:"No products yet"}):t.slice(0,5).map((p,_)=>{var m;return o.jsxs("div",{className:"product-card",children:[o.jsxs("div",{className:"rank-badge",children:["#",_+1]}),o.jsx("img",{src:((m=p.images)==null?void 0:m[0])||p.image||"https://via.placeholder.com/200",alt:p.title||p.name}),o.jsx("h4",{children:p.title||p.name}),o.jsxs("p",{className:"price",children:["",(p.price||0).toLocaleString("en-IN")]}),o.jsxs("div",{className:"product-stats",children:[o.jsxs("span",{children:["Price: ",(p.price||0).toLocaleString("en-IN")]}),o.jsxs("span",{children:["Stock: ",p.stock||0]})]})]},p.id)})})]}),o.jsxs("div",{className:"insights-section",children:[o.jsx("h3",{children:" Customer Insights"}),o.jsxs("div",{className:"insights-grid",children:[o.jsxs("div",{className:"insight-card",children:[o.jsx("h4",{children:"Customer Lifetime Value"}),o.jsxs("p",{className:"insight-value",children:["",d.totalCustomers>0?Math.round(d.totalRevenue/d.totalCustomers).toLocaleString("en-IN"):"0"]})]}),o.jsxs("div",{className:"insight-card",children:[o.jsx("h4",{children:"Total Customers"}),o.jsx("p",{className:"insight-value",children:d.totalCustomers})]}),o.jsxs("div",{className:"insight-card",children:[o.jsx("h4",{children:"Average Order Value"}),o.jsxs("p",{className:"insight-value",children:["",Math.round(d.avgOrderValue).toLocaleString("en-IN")]})]}),o.jsxs("div",{className:"insight-card",children:[o.jsx("h4",{children:"Total Orders"}),o.jsx("p",{className:"insight-value",children:d.totalOrders})]})]})]})]})},wP=()=>{const[t,e]=S.useState([]),[n,r]=S.useState(!0),[s,i]=S.useState("all");S.useEffect(()=>{a()},[]);const a=async()=>{r(!0);try{const u=M(F,"orders"),h=await oe(u);if(h.exists()){const f=h.val(),d=Object.entries(f).map(([x,w])=>{var p,_;return{id:x,...w,customer:((p=w.shippingAddress)==null?void 0:p.name)||"N/A",email:w.customerEmail||"N/A",date:w.placedAt?new Date(w.placedAt).toLocaleDateString():"N/A",items:((_=w.items)==null?void 0:_.length)||0}});e(d.sort((x,w)=>new Date(w.placedAt)-new Date(x.placedAt)))}else e([])}catch(u){console.error("Error loading orders:",u),e([])}finally{r(!1)}},l=async(u,h)=>{var x;const f=t.find(w=>w.id===u);if(!((x={pending:["shipped","cancelled"],shipped:["delivered","cancelled"],delivered:[],cancelled:[]}[f.status])!=null&&x.includes(h))){alert(` Cannot change from ${f.status} to ${h}`);return}try{const w=M(F,`orders/${u}`);await zs(w,{status:h,updatedAt:new Date().toISOString()}),alert(` Order status updated to ${h}!`),a()}catch(w){console.error("Error updating order:",w),alert(" Failed to update order status")}},c=s==="all"?t:t.filter(u=>u.status===s);return n?o.jsx("div",{style:{textAlign:"center",padding:"4rem 2rem"},children:o.jsx("p",{style:{fontSize:"1.5rem",color:"#e71d36"},children:" Loading orders..."})}):o.jsxs("div",{className:"order-management",children:[o.jsx("div",{className:"page-header",children:o.jsxs("div",{children:[o.jsx("h1",{children:" Order Management"}),o.jsx("p",{children:"View and manage all customer orders"})]})}),o.jsxs("div",{className:"stats-grid",children:[o.jsxs("div",{className:"stat-card",children:[o.jsx("div",{className:"stat-icon",children:""}),o.jsxs("div",{children:[o.jsx("h3",{children:"Total Orders"}),o.jsx("p",{className:"stat-value",children:t.length})]})]}),o.jsxs("div",{className:"stat-card",children:[o.jsx("div",{className:"stat-icon",children:""}),o.jsxs("div",{children:[o.jsx("h3",{children:"Pending"}),o.jsx("p",{className:"stat-value",children:t.filter(u=>u.status==="pending").length})]})]}),o.jsxs("div",{className:"stat-card",children:[o.jsx("div",{className:"stat-icon",children:""}),o.jsxs("div",{children:[o.jsx("h3",{children:"Shipped"}),o.jsx("p",{className:"stat-value",children:t.filter(u=>u.status==="shipped").length})]})]}),o.jsxs("div",{className:"stat-card",children:[o.jsx("div",{className:"stat-icon",children:""}),o.jsxs("div",{children:[o.jsx("h3",{children:"Delivered"}),o.jsx("p",{className:"stat-value",children:t.filter(u=>u.status==="delivered").length})]})]})]}),o.jsx("div",{className:"filters-section",children:o.jsxs("select",{value:s,onChange:u=>i(u.target.value),style:{padding:"0.75rem",borderRadius:"8px",border:"1px solid #ddd",minWidth:"200px"},children:[o.jsx("option",{value:"all",children:"All Orders"}),o.jsx("option",{value:"pending",children:"Pending"}),o.jsx("option",{value:"shipped",children:"Shipped"}),o.jsx("option",{value:"delivered",children:"Delivered"}),o.jsx("option",{value:"cancelled",children:"Cancelled"})]})}),o.jsx("div",{className:"orders-table-container",children:c.length===0?o.jsx("p",{style:{textAlign:"center",padding:"3rem",color:"#999"},children:"No orders found"}):o.jsxs("table",{className:"orders-table",children:[o.jsx("thead",{children:o.jsxs("tr",{children:[o.jsx("th",{children:"Order ID"}),o.jsx("th",{children:"Customer"}),o.jsx("th",{children:"Email"}),o.jsx("th",{children:"Date"}),o.jsx("th",{children:"Items"}),o.jsx("th",{children:"Total"}),o.jsx("th",{children:"Status"}),o.jsx("th",{children:"Actions"})]})}),o.jsx("tbody",{children:c.map(u=>{var h;return o.jsxs("tr",{children:[o.jsxs("td",{className:"order-id",children:["#",u.id.substring(0,8)]}),o.jsx("td",{children:u.customer}),o.jsx("td",{children:u.email}),o.jsx("td",{children:u.date}),o.jsx("td",{children:u.items}),o.jsxs("td",{className:"total",children:["",(h=u.total)==null?void 0:h.toLocaleString()]}),o.jsx("td",{children:o.jsxs("select",{value:u.status||"pending",onChange:f=>l(u.id,f.target.value),style:{padding:"0.5rem",borderRadius:"6px",border:"1px solid #ddd",background:"white",cursor:"pointer"},children:[o.jsx("option",{value:"pending",children:"Pending"}),o.jsx("option",{value:"shipped",children:"Shipped"}),o.jsx("option",{value:"delivered",children:"Delivered"}),o.jsx("option",{value:"cancelled",children:"Cancelled"})]})}),o.jsx("td",{children:o.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[o.jsx("button",{title:"View Details",style:{padding:"0.5rem 1rem",background:"#e71d36",color:"white",border:"none",borderRadius:"6px",cursor:"pointer"},children:""}),o.jsx("button",{title:"Print Invoice",style:{padding:"0.5rem 1rem",background:"#6c757d",color:"white",border:"none",borderRadius:"6px",cursor:"pointer"},children:""})]})})]},u.id)})})]})})]})},SP=()=>{const[t,e]=S.useState([]),[n,r]=S.useState(!0),[s,i]=S.useState(""),[a,l]=S.useState("all");S.useEffect(()=>{c();const d=setInterval(()=>{c()},3e4);return()=>clearInterval(d)},[]);const c=async()=>{r(!0);try{const d=M(F,"users"),x=await oe(d);if(x.exists()){const w=x.val(),p=Object.entries(w).map(([_,m])=>({uid:_,...m,createdAt:m.createdAt||Date.now()}));e(p)}}catch(d){console.error("Error loading customers:",d),alert("Failed to load customers")}finally{r(!1)}},u=async(d,x)=>{if(window.confirm(`Change user role to ${x}?`))try{const w=M(F,`users/${d}`);await zs(w,{role:x}),alert(" Role updated successfully!"),c()}catch(w){console.error("Error updating role:",w),alert(" Failed to update role")}},h=t.filter(d=>{var p,_,m;const x=((p=d.email)==null?void 0:p.toLowerCase().includes(s.toLowerCase()))||((_=d.username)==null?void 0:_.toLowerCase().includes(s.toLowerCase()))||((m=d.fullName)==null?void 0:m.toLowerCase().includes(s.toLowerCase())),w=a==="all"||d.role===a;return x&&w}),f={total:t.length,admins:t.filter(d=>d.role==="admin").length,customers:t.filter(d=>d.role==="customer"||!d.role).length};return n?o.jsx("div",{className:"page-loading",children:"Loading customers..."}):o.jsxs("div",{className:"order-management",children:[o.jsx("div",{className:"page-header",children:o.jsxs("div",{children:[o.jsx("h1",{children:" Customer Management"}),o.jsx("p",{children:"Manage users, roles, and customer information"})]})}),o.jsxs("div",{className:"stats-grid",style:{gridTemplateColumns:"repeat(3, 1fr)",marginBottom:"2rem"},children:[o.jsxs("div",{className:"stat-card",children:[o.jsx("span",{className:"stat-icon",children:""}),o.jsxs("div",{className:"stat-info",children:[o.jsx("h3",{children:"Total Users"}),o.jsx("p",{className:"stat-value",children:f.total})]})]}),o.jsxs("div",{className:"stat-card",children:[o.jsx("span",{className:"stat-icon",children:""}),o.jsxs("div",{className:"stat-info",children:[o.jsx("h3",{children:"Admins"}),o.jsx("p",{className:"stat-value",children:f.admins})]})]}),o.jsxs("div",{className:"stat-card",children:[o.jsx("span",{className:"stat-icon",children:""}),o.jsxs("div",{className:"stat-info",children:[o.jsx("h3",{children:"Customers"}),o.jsx("p",{className:"stat-value",children:f.customers})]})]})]}),o.jsxs("div",{className:"filters-section",children:[o.jsx("input",{type:"text",placeholder:" Search by name, email, or username...",value:s,onChange:d=>i(d.target.value),className:"search-input"}),o.jsxs("select",{value:a,onChange:d=>l(d.target.value),className:"filter-select",children:[o.jsx("option",{value:"all",children:"All Roles"}),o.jsx("option",{value:"admin",children:"Admins Only"}),o.jsx("option",{value:"customer",children:"Customers Only"})]})]}),o.jsx("div",{className:"orders-table-container",children:o.jsxs("table",{className:"orders-table",children:[o.jsx("thead",{children:o.jsxs("tr",{children:[o.jsx("th",{children:"User"}),o.jsx("th",{children:"Email"}),o.jsx("th",{children:"Username"}),o.jsx("th",{children:"Role"}),o.jsx("th",{children:"Joined"}),o.jsx("th",{children:"Actions"})]})}),o.jsx("tbody",{children:h.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:"6",style:{textAlign:"center",padding:"3rem",color:"#999"},children:"No customers found"})}):h.map(d=>o.jsxs("tr",{children:[o.jsx("td",{children:o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[o.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"50%",background:"linear-gradient(135deg, #e71d36, #ff6b6b)",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontWeight:"bold",fontSize:"1.2rem"},children:(d.fullName||d.username||"U")[0].toUpperCase()}),o.jsx("strong",{children:d.fullName||d.username||"Unknown"})]})}),o.jsx("td",{children:d.email}),o.jsx("td",{children:d.username}),o.jsx("td",{children:o.jsx("span",{className:`status-badge ${d.role==="admin"?"delivered":"pending"}`,children:d.role==="admin"?" Admin":" Customer"})}),o.jsx("td",{children:new Date(d.createdAt).toLocaleDateString()}),o.jsx("td",{children:o.jsxs("select",{value:d.role||"customer",onChange:x=>u(d.uid,x.target.value),style:{padding:"0.5rem",borderRadius:"8px",border:"1px solid #ddd",background:"white",cursor:"pointer"},children:[o.jsx("option",{value:"customer",children:"Customer"}),o.jsx("option",{value:"admin",children:"Admin"})]})})]},d.uid))})]})})]})},CP=()=>{const[t,e]=S.useState([]),[n,r]=S.useState([]),[s,i]=S.useState(!0),[a,l]=S.useState("all"),[c,u]=S.useState("all"),[h,f]=S.useState({});S.useEffect(()=>{d();const y=setInterval(()=>{d()},3e4);return()=>clearInterval(y)},[]);const d=async()=>{i(!0);try{const y=M(F,"products"),v=await oe(y),C=v.exists()?Object.entries(v.val()).map(([U,j])=>({id:U,...j})):[];r(C);const E=M(F,"reviews"),b=await oe(E),I=b.exists()?Object.entries(b.val()).map(([U,j])=>({id:U,...j})):x(C);e(I)}catch(y){console.error("Error loading data:",y)}finally{i(!1)}},x=y=>{const v=[],C={5:["Excellent product! Highly recommended.","Amazing quality, worth every penny!","Best purchase ever!"],4:["Very good product, happy with the purchase.","Great quality, minor issues.","Good value for money."],3:["Average product, meets expectations.","Okay for the price.","Neither good nor bad."],2:["Not satisfied, expected better.","Below average quality.","Disappointed with this purchase."],1:["Terrible product, waste of money.","Very poor quality.","Would not recommend."]},E=["Rahul S.","Priya K.","Amit P.","Sneha M.","Vikram R.","Anjali T."];return y.slice(0,5).forEach((b,I)=>{const U=5-I%5;v.push({id:`review-${I+1}`,productId:b.id,productName:b.name,userName:E[I%E.length],rating:U,comment:C[U][Math.floor(Math.random()*C[U].length)],status:I%3===0?"pending":"approved",createdAt:Date.now()-I*864e5,adminReply:I%4===0?"Thank you for your feedback!":null})}),v},w=async(y,v)=>{try{const C=M(F,`reviews/${y}`);await De(C,{...t.find(E=>E.id===y),status:v}),alert(` Review ${v}!`),d()}catch(C){console.error("Error updating review:",C),alert(" Failed to update review")}},p=async y=>{const v=h[y];if(!v||!v.trim()){alert("Please enter a reply message");return}try{const C=t.find(b=>b.id===y),E=M(F,`reviews/${y}`);await De(E,{...C,adminReply:v}),alert(" Reply posted successfully!"),f({...h,[y]:""}),d()}catch(C){console.error("Error posting reply:",C),alert(" Failed to post reply")}},_=async y=>{if(window.confirm("Delete this review?"))try{const v=M(F,`reviews/${y}`);await Fl(v),alert(" Review deleted!"),d()}catch(v){console.error("Error deleting review:",v),alert(" Failed to delete review")}},m=t.filter(y=>{const v=a==="all"||y.rating===parseInt(a),C=c==="all"||y.status===c;return v&&C}),g={total:t.length,pending:t.filter(y=>y.status==="pending").length,approved:t.filter(y=>y.status==="approved").length,avgRating:t.length>0?(t.reduce((y,v)=>y+v.rating,0)/t.length).toFixed(1):0};return s?o.jsx("div",{className:"page-loading",children:"Loading reviews..."}):o.jsxs("div",{className:"order-management",children:[o.jsx("div",{className:"page-header",children:o.jsxs("div",{children:[o.jsx("h1",{children:" Reviews Management"}),o.jsx("p",{children:"Moderate, approve, and respond to customer reviews"})]})}),o.jsxs("div",{className:"stats-grid",style:{gridTemplateColumns:"repeat(4, 1fr)",marginBottom:"2rem"},children:[o.jsxs("div",{className:"stat-card",children:[o.jsx("span",{className:"stat-icon",children:""}),o.jsxs("div",{className:"stat-info",children:[o.jsx("h3",{children:"Total Reviews"}),o.jsx("p",{className:"stat-value",children:g.total})]})]}),o.jsxs("div",{className:"stat-card",children:[o.jsx("span",{className:"stat-icon",children:""}),o.jsxs("div",{className:"stat-info",children:[o.jsx("h3",{children:"Pending"}),o.jsx("p",{className:"stat-value",children:g.pending})]})]}),o.jsxs("div",{className:"stat-card",children:[o.jsx("span",{className:"stat-icon",children:""}),o.jsxs("div",{className:"stat-info",children:[o.jsx("h3",{children:"Approved"}),o.jsx("p",{className:"stat-value",children:g.approved})]})]}),o.jsxs("div",{className:"stat-card",children:[o.jsx("span",{className:"stat-icon",children:""}),o.jsxs("div",{className:"stat-info",children:[o.jsx("h3",{children:"Avg Rating"}),o.jsx("p",{className:"stat-value",children:g.avgRating})]})]})]}),o.jsxs("div",{className:"filters-section",children:[o.jsxs("select",{value:a,onChange:y=>l(y.target.value),className:"filter-select",children:[o.jsx("option",{value:"all",children:"All Ratings"}),o.jsx("option",{value:"5",children:" (5 Stars)"}),o.jsx("option",{value:"4",children:" (4 Stars)"}),o.jsx("option",{value:"3",children:" (3 Stars)"}),o.jsx("option",{value:"2",children:" (2 Stars)"}),o.jsx("option",{value:"1",children:" (1 Star)"})]}),o.jsxs("select",{value:c,onChange:y=>u(y.target.value),className:"filter-select",children:[o.jsx("option",{value:"all",children:"All Status"}),o.jsx("option",{value:"pending",children:"Pending"}),o.jsx("option",{value:"approved",children:"Approved"})]})]}),o.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1.5rem",marginTop:"2rem"},children:m.length===0?o.jsx("p",{style:{textAlign:"center",color:"#999",padding:"3rem"},children:"No reviews found"}):m.map(y=>o.jsxs("div",{style:{background:"white",padding:"1.5rem",borderRadius:"12px",border:"1px solid #e8e8e8"},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"1rem"},children:[o.jsxs("div",{children:[o.jsx("h4",{style:{marginBottom:"0.5rem"},children:y.productName}),o.jsxs("p",{style:{color:"#666",fontSize:"0.9rem"},children:["By ",y.userName,"  ",new Date(y.createdAt).toLocaleDateString()]})]}),o.jsx("span",{className:`status-badge ${y.status==="approved"?"delivered":"pending"}`,children:y.status})]}),o.jsxs("div",{style:{marginBottom:"1rem"},children:[o.jsxs("div",{style:{color:"#ffa500",marginBottom:"0.5rem"},children:["".repeat(y.rating),"".repeat(5-y.rating)]}),o.jsx("p",{style:{lineHeight:"1.6"},children:y.comment})]}),y.adminReply&&o.jsxs("div",{style:{background:"#f9f9f9",padding:"1rem",borderRadius:"8px",marginBottom:"1rem"},children:[o.jsx("strong",{style:{color:"#e71d36"},children:"Admin Reply:"}),o.jsx("p",{style:{marginTop:"0.5rem"},children:y.adminReply})]}),!y.adminReply&&o.jsx("div",{style:{marginBottom:"1rem"},children:o.jsx("textarea",{placeholder:"Write a reply to this review...",value:h[y.id]||"",onChange:v=>f({...h,[y.id]:v.target.value}),style:{width:"100%",padding:"0.75rem",borderRadius:"8px",border:"1px solid #ddd",minHeight:"80px"}})}),o.jsxs("div",{style:{display:"flex",gap:"0.75rem"},children:[y.status==="pending"&&o.jsxs(o.Fragment,{children:[o.jsx("button",{onClick:()=>w(y.id,"approved"),style:{padding:"0.5rem 1rem",background:"#28a745",color:"white",border:"none",borderRadius:"8px",cursor:"pointer"},children:" Approve"}),o.jsx("button",{onClick:()=>w(y.id,"rejected"),style:{padding:"0.5rem 1rem",background:"#dc3545",color:"white",border:"none",borderRadius:"8px",cursor:"pointer"},children:" Reject"})]}),!y.adminReply&&o.jsx("button",{onClick:()=>p(y.id),style:{padding:"0.5rem 1rem",background:"#e71d36",color:"white",border:"none",borderRadius:"8px",cursor:"pointer"},children:" Post Reply"}),o.jsx("button",{onClick:()=>_(y.id),style:{padding:"0.5rem 1rem",background:"#6c757d",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",marginLeft:"auto"},children:" Delete"})]})]},y.id))})]})},EP=()=>{const[t,e]=S.useState([]),[n,r]=S.useState("month"),[s,i]=S.useState(!0);S.useEffect(()=>{a();const _=setInterval(()=>{a()},3e4);return()=>clearInterval(_)},[]);const a=async()=>{i(!0);try{const _=M(F,"orders"),m=await oe(_);if(m.exists()){const g=m.val(),y=Object.entries(g).map(([v,C])=>({id:v,...C}));e(y)}}catch(_){console.error("Error loading orders:",_)}finally{i(!1)}},l=t.reduce((_,m)=>_+(m.total||0),0),c=t.length,u=c>0?l/c:0,h=l*.18,f=l-h,d=t.filter(_=>_.status==="delivered"),x=d.reduce((_,m)=>_+(m.total||0),0),w=l-x,p=t.reduce((_,m)=>{const g=new Date(m.createdAt).toLocaleDateString("en-US",{month:"short",year:"numeric"});return _[g]=(_[g]||0)+(m.total||0),_},{});return s?o.jsx("div",{className:"page-loading",children:"Loading revenue data..."}):o.jsxs("div",{className:"analytics-page",children:[o.jsxs("div",{className:"page-header",children:[o.jsxs("div",{children:[o.jsx("h1",{children:" Revenue Management"}),o.jsx("p",{children:"Track revenue, payments, and financial performance"})]}),o.jsxs("select",{value:n,onChange:_=>r(_.target.value),className:"time-filter",children:[o.jsx("option",{value:"week",children:"Last 7 Days"}),o.jsx("option",{value:"month",children:"Last 30 Days"}),o.jsx("option",{value:"year",children:"Last Year"}),o.jsx("option",{value:"all",children:"All Time"})]})]}),o.jsxs("div",{className:"kpi-grid",children:[o.jsxs("div",{className:"kpi-card revenue",children:[o.jsx("div",{className:"kpi-icon",children:""}),o.jsxs("div",{className:"kpi-info",children:[o.jsx("h3",{children:"Total Revenue"}),o.jsxs("p",{className:"kpi-value",children:["",l.toLocaleString()]}),o.jsx("span",{className:"kpi-trend positive",children:"Gross Revenue"})]})]}),o.jsxs("div",{className:"kpi-card orders",children:[o.jsx("div",{className:"kpi-icon",children:""}),o.jsxs("div",{className:"kpi-info",children:[o.jsx("h3",{children:"Completed Orders"}),o.jsxs("p",{className:"kpi-value",children:["",x.toLocaleString()]}),o.jsxs("span",{className:"kpi-trend positive",children:[d.length," orders"]})]})]}),o.jsxs("div",{className:"kpi-card customers",children:[o.jsx("div",{className:"kpi-icon",children:""}),o.jsxs("div",{className:"kpi-info",children:[o.jsx("h3",{children:"Pending Revenue"}),o.jsxs("p",{className:"kpi-value",children:["",w.toLocaleString()]}),o.jsxs("span",{className:"kpi-trend neutral",children:[c-d.length," orders"]})]})]}),o.jsxs("div",{className:"kpi-card avg-order",children:[o.jsx("div",{className:"kpi-icon",children:""}),o.jsxs("div",{className:"kpi-info",children:[o.jsx("h3",{children:"Avg Order Value"}),o.jsxs("p",{className:"kpi-value",children:["",Math.round(u).toLocaleString()]}),o.jsx("span",{className:"kpi-trend positive",children:"Per transaction"})]})]})]}),o.jsxs("div",{className:"charts-grid",style:{marginTop:"2rem"},children:[o.jsxs("div",{className:"chart-card",children:[o.jsx("h3",{children:" Financial Breakdown"}),o.jsxs("div",{style:{padding:"2rem"},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"1rem",padding:"1rem",background:"#f9f9f9",borderRadius:"8px"},children:[o.jsx("span",{children:o.jsx("strong",{children:"Gross Revenue:"})}),o.jsxs("span",{style:{color:"#28a745",fontWeight:"bold"},children:["",l.toLocaleString()]})]}),o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"1rem",padding:"1rem",background:"#f9f9f9",borderRadius:"8px"},children:[o.jsx("span",{children:o.jsx("strong",{children:"Tax (GST 18%):"})}),o.jsxs("span",{style:{color:"#dc3545",fontWeight:"bold"},children:["- ",Math.round(h).toLocaleString()]})]}),o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"1rem",background:"linear-gradient(135deg, #e71d36, #ff6b6b)",color:"white",borderRadius:"8px",fontSize:"1.2rem"},children:[o.jsx("span",{children:o.jsx("strong",{children:"Net Revenue:"})}),o.jsxs("span",{style:{fontWeight:"bold"},children:["",Math.round(f).toLocaleString()]})]})]})]}),o.jsxs("div",{className:"chart-card",children:[o.jsx("h3",{children:" Monthly Revenue"}),o.jsx("div",{style:{padding:"2rem"},children:Object.entries(p).length===0?o.jsx("p",{style:{textAlign:"center",color:"#999"},children:"No revenue data available"}):o.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:Object.entries(p).map(([_,m])=>o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"0.75rem",background:"#f9f9f9",borderRadius:"8px"},children:[o.jsx("span",{children:_}),o.jsxs("span",{style:{fontWeight:"bold",color:"#e71d36"},children:["",m.toLocaleString()]})]},_))})})]})]}),o.jsxs("div",{className:"top-products-section",style:{marginTop:"2rem"},children:[o.jsx("h3",{children:" Payment Gateway Settings"}),o.jsx("div",{style:{background:"white",padding:"2rem",borderRadius:"20px",border:"1px solid #e8e8e8"},children:o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"1.5rem"},children:[o.jsxs("div",{style:{padding:"1.5rem",border:"2px solid #e8e8e8",borderRadius:"12px",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"3rem",marginBottom:"1rem"},children:""}),o.jsx("h4",{style:{marginBottom:"0.5rem"},children:"Razorpay"}),o.jsx("p",{style:{color:"#666",fontSize:"0.9rem",marginBottom:"1rem"},children:"UPI, Cards, Netbanking"}),o.jsx("button",{style:{padding:"0.5rem 1.5rem",background:"#e71d36",color:"white",border:"none",borderRadius:"8px",cursor:"pointer"},children:"Configure"})]}),o.jsxs("div",{style:{padding:"1.5rem",border:"2px solid #e8e8e8",borderRadius:"12px",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"3rem",marginBottom:"1rem"},children:""}),o.jsx("h4",{style:{marginBottom:"0.5rem"},children:"Cash on Delivery"}),o.jsx("p",{style:{color:"#666",fontSize:"0.9rem",marginBottom:"1rem"},children:"Pay on delivery"}),o.jsx("button",{style:{padding:"0.5rem 1.5rem",background:"#28a745",color:"white",border:"none",borderRadius:"8px",cursor:"pointer"},children:"Enabled"})]}),o.jsxs("div",{style:{padding:"1.5rem",border:"2px solid #e8e8e8",borderRadius:"12px",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"3rem",marginBottom:"1rem"},children:""}),o.jsx("h4",{style:{marginBottom:"0.5rem"},children:"Bank Transfer"}),o.jsx("p",{style:{color:"#666",fontSize:"0.9rem",marginBottom:"1rem"},children:"Direct bank payments"}),o.jsx("button",{style:{padding:"0.5rem 1.5rem",background:"#6c757d",color:"white",border:"none",borderRadius:"8px",cursor:"pointer"},children:"Configure"})]})]})})]})]})},kP=()=>{const[t,e]=S.useState([]),[n,r]=S.useState(!0),[s,i]=S.useState("all"),[a,l]=S.useState("all"),[c,u]=S.useState("today");S.useEffect(()=>{h()},[]);const h=async()=>{r(!0);try{const _=M(F,"activityLogs"),m=await oe(_);let g;if(m.exists()){const y=m.val();g=Object.entries(y).map(([v,C])=>({id:v,...C}))}else g=f();g.sort((y,v)=>v.timestamp-y.timestamp),e(g)}catch(_){console.error("Error loading activity logs:",_),e(f())}finally{r(!1)}},f=()=>[{type:"login",action:"User logged in",icon:"",user:"admin@drift.com",role:"admin"},{type:"product",action:"Added new product: Poco M7",icon:"",user:"admin@drift.com",role:"admin"},{type:"order",action:"New order placed: #1234",icon:"",user:"customer@example.com",role:"customer"},{type:"product",action:"Updated product stock",icon:"",user:"admin@drift.com",role:"admin"},{type:"login",action:"User logged in",icon:"",user:"customer@example.com",role:"customer"},{type:"banner",action:"Updated homepage banner",icon:"",user:"admin@drift.com",role:"admin"},{type:"order",action:"Order status changed to delivered",icon:"",user:"admin@drift.com",role:"admin"},{type:"settings",action:"Changed site settings",icon:"",user:"admin@drift.com",role:"admin"},{type:"user",action:"New user registered",icon:"",user:"newuser@example.com",role:"customer"},{type:"product",action:"Deleted product",icon:"",user:"admin@drift.com",role:"admin"}].map((m,g)=>({id:`log-${g+1}`,...m,timestamp:Date.now()-g*36e5,ipAddress:`192.168.1.${Math.floor(Math.random()*255)}`,device:Math.random()>.5?"Desktop":"Mobile"})),x=(()=>{let _=t;s!=="all"&&(_=_.filter(y=>y.type===s)),a!=="all"&&(_=_.filter(y=>y.role===a));const m=Date.now(),g={today:864e5,week:6048e5,month:2592e6,all:1/0};return c!=="all"&&(_=_.filter(y=>m-y.timestamp<=g[c])),_})(),w={total:t.length,today:t.filter(_=>Date.now()-_.timestamp<=864e5).length,admins:t.filter(_=>_.role==="admin").length,customers:t.filter(_=>_.role==="customer").length},p=()=>{const _=[["Timestamp","Type","Action","User","Role","IP Address","Device"],...x.map(v=>[new Date(v.timestamp).toLocaleString(),v.type,v.action,v.user,v.role,v.ipAddress,v.device])].map(v=>v.join(",")).join(`
`),m=new Blob([_],{type:"text/csv"}),g=URL.createObjectURL(m),y=document.createElement("a");y.href=g,y.download=`activity-logs-${Date.now()}.csv`,y.click(),URL.revokeObjectURL(g)};return n?o.jsx("div",{className:"page-loading",children:"Loading activity logs..."}):o.jsxs("div",{className:"order-management",children:[o.jsxs("div",{className:"page-header",children:[o.jsxs("div",{children:[o.jsx("h1",{children:" Activity Logs"}),o.jsx("p",{children:"Complete audit trail of all system activities"})]}),o.jsx("button",{onClick:p,style:{padding:"0.75rem 1.5rem",background:"#28a745",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:"600"},children:" Export CSV"})]}),o.jsxs("div",{className:"stats-grid",style:{gridTemplateColumns:"repeat(4, 1fr)",marginBottom:"2rem"},children:[o.jsxs("div",{className:"stat-card",children:[o.jsx("span",{className:"stat-icon",children:""}),o.jsxs("div",{className:"stat-info",children:[o.jsx("h3",{children:"Total Activities"}),o.jsx("p",{className:"stat-value",children:w.total})]})]}),o.jsxs("div",{className:"stat-card",children:[o.jsx("span",{className:"stat-icon",children:""}),o.jsxs("div",{className:"stat-info",children:[o.jsx("h3",{children:"Today"}),o.jsx("p",{className:"stat-value",children:w.today})]})]}),o.jsxs("div",{className:"stat-card",children:[o.jsx("span",{className:"stat-icon",children:""}),o.jsxs("div",{className:"stat-info",children:[o.jsx("h3",{children:"Admin Actions"}),o.jsx("p",{className:"stat-value",children:w.admins})]})]}),o.jsxs("div",{className:"stat-card",children:[o.jsx("span",{className:"stat-icon",children:""}),o.jsxs("div",{className:"stat-info",children:[o.jsx("h3",{children:"Customer Actions"}),o.jsx("p",{className:"stat-value",children:w.customers})]})]})]}),o.jsxs("div",{className:"filters-section",children:[o.jsxs("select",{value:s,onChange:_=>i(_.target.value),className:"filter-select",children:[o.jsx("option",{value:"all",children:"All Activity Types"}),o.jsx("option",{value:"login",children:" Login"}),o.jsx("option",{value:"product",children:" Products"}),o.jsx("option",{value:"order",children:" Orders"}),o.jsx("option",{value:"banner",children:" Banners"}),o.jsx("option",{value:"user",children:" Users"}),o.jsx("option",{value:"settings",children:" Settings"})]}),o.jsxs("select",{value:a,onChange:_=>l(_.target.value),className:"filter-select",children:[o.jsx("option",{value:"all",children:"All Users"}),o.jsx("option",{value:"admin",children:"Admins Only"}),o.jsx("option",{value:"customer",children:"Customers Only"})]}),o.jsxs("select",{value:c,onChange:_=>u(_.target.value),className:"filter-select",children:[o.jsx("option",{value:"today",children:"Today"}),o.jsx("option",{value:"week",children:"Last 7 Days"}),o.jsx("option",{value:"month",children:"Last 30 Days"}),o.jsx("option",{value:"all",children:"All Time"})]})]}),o.jsx("div",{className:"orders-table-container",children:o.jsxs("table",{className:"orders-table",children:[o.jsx("thead",{children:o.jsxs("tr",{children:[o.jsx("th",{children:"Time"}),o.jsx("th",{children:"Activity"}),o.jsx("th",{children:"User"}),o.jsx("th",{children:"Role"}),o.jsx("th",{children:"IP Address"}),o.jsx("th",{children:"Device"})]})}),o.jsx("tbody",{children:x.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:"6",style:{textAlign:"center",padding:"3rem",color:"#999"},children:"No activity logs found"})}):x.map(_=>o.jsxs("tr",{children:[o.jsx("td",{children:o.jsxs("div",{style:{fontSize:"0.85rem"},children:[o.jsx("div",{children:new Date(_.timestamp).toLocaleDateString()}),o.jsx("div",{style:{color:"#999"},children:new Date(_.timestamp).toLocaleTimeString()})]})}),o.jsx("td",{children:o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx("span",{style:{fontSize:"1.5rem"},children:_.icon}),o.jsx("span",{children:_.action})]})}),o.jsx("td",{children:_.user}),o.jsx("td",{children:o.jsx("span",{className:`status-badge ${_.role==="admin"?"delivered":"pending"}`,children:_.role})}),o.jsx("td",{style:{fontFamily:"monospace",fontSize:"0.9rem"},children:_.ipAddress}),o.jsx("td",{children:_.device})]},_.id))})]})})]})},bP=()=>{const{user:t}=st(),[e,n]=S.useState("profile"),[r,s]=S.useState(!1),[i,a]=S.useState({fullName:"",email:"",phone:"",address:""}),[l,c]=S.useState({siteName:"DRIFT ENTERPRISES",tagline:"Your One-Stop Shop",email:"contact@drift.com",phone:"+91 1234567890",address:"Mumbai, Maharashtra, India",currency:"INR",taxRate:18}),[u,h]=S.useState({freeShippingThreshold:500,standardShipping:40,expressShipping:100,estimatedDays:"3-7 business days"});S.useEffect(()=>{f()},[]);const f=async()=>{try{if(t){const y=M(F,`users/${t.uid}`),v=await oe(y);if(v.exists()){const C=v.val();a({fullName:C.fullName||"",email:C.email||"",phone:C.phone||"",address:C.address||""})}}const p=M(F,"siteSettings"),_=await oe(p);_.exists()&&c({...l,..._.val()});const m=M(F,"shippingSettings"),g=await oe(m);g.exists()&&h({...u,...g.val()})}catch(p){console.error("Error loading settings:",p)}},d=async()=>{s(!0);try{const p=M(F,`users/${t.uid}`);await De(p,{...t,...i}),alert(" Profile updated successfully!")}catch(p){console.error("Error saving profile:",p),alert(" Failed to update profile")}finally{s(!1)}},x=async()=>{s(!0);try{const p=M(F,"siteSettings");await De(p,l),alert(" Site settings updated successfully!")}catch(p){console.error("Error saving site settings:",p),alert(" Failed to update site settings")}finally{s(!1)}},w=async()=>{s(!0);try{const p=M(F,"shippingSettings");await De(p,u),alert(" Shipping settings updated successfully!")}catch(p){console.error("Error saving shipping settings:",p),alert(" Failed to update shipping settings")}finally{s(!1)}};return o.jsxs("div",{className:"homepage-manager",children:[o.jsxs("div",{className:"manager-header",children:[o.jsx("h1",{children:" Settings"}),o.jsx("p",{children:"Manage your profile, site configuration, and system settings"})]}),o.jsxs("div",{className:"section-tabs",children:[o.jsx("button",{className:e==="profile"?"active":"",onClick:()=>n("profile"),children:" Admin Profile"}),o.jsx("button",{className:e==="site"?"active":"",onClick:()=>n("site"),children:" Site Settings"}),o.jsx("button",{className:e==="shipping"?"active":"",onClick:()=>n("shipping"),children:" Shipping & Delivery"}),o.jsx("button",{className:e==="payment"?"active":"",onClick:()=>n("payment"),children:" Payment Gateway"})]}),e==="profile"&&o.jsx("div",{className:"content-section",children:o.jsxs("div",{className:"upload-card",children:[o.jsx("h2",{children:" Admin Profile"}),o.jsx("p",{className:"helper-text",children:"Manage your personal information and credentials"}),o.jsxs("div",{className:"form-grid",children:[o.jsxs("div",{className:"form-group full-width",children:[o.jsx("label",{children:"Full Name"}),o.jsx("input",{type:"text",value:i.fullName,onChange:p=>a({...i,fullName:p.target.value}),placeholder:"Enter your full name"})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{children:"Email Address"}),o.jsx("input",{type:"email",value:i.email,disabled:!0,style:{background:"#f5f5f5",cursor:"not-allowed"}})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{children:"Phone Number"}),o.jsx("input",{type:"tel",value:i.phone,onChange:p=>a({...i,phone:p.target.value}),placeholder:"+91 1234567890"})]}),o.jsxs("div",{className:"form-group full-width",children:[o.jsx("label",{children:"Address"}),o.jsx("textarea",{value:i.address,onChange:p=>a({...i,address:p.target.value}),placeholder:"Enter your address",rows:"3",style:{width:"100%",padding:"0.75rem",borderRadius:"8px",border:"1px solid #ddd"}})]})]}),o.jsx("button",{onClick:d,disabled:r,className:"submit-btn",children:r?" Saving...":" Save Profile"})]})}),e==="site"&&o.jsx("div",{className:"content-section",children:o.jsxs("div",{className:"upload-card",children:[o.jsx("h2",{children:" Site Configuration"}),o.jsx("p",{className:"helper-text",children:"Configure your e-commerce site settings"}),o.jsxs("div",{className:"form-grid",children:[o.jsxs("div",{className:"form-group",children:[o.jsx("label",{children:"Site Name"}),o.jsx("input",{type:"text",value:l.siteName,onChange:p=>c({...l,siteName:p.target.value})})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{children:"Tagline"}),o.jsx("input",{type:"text",value:l.tagline,onChange:p=>c({...l,tagline:p.target.value})})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{children:"Contact Email"}),o.jsx("input",{type:"email",value:l.email,onChange:p=>c({...l,email:p.target.value})})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{children:"Contact Phone"}),o.jsx("input",{type:"tel",value:l.phone,onChange:p=>c({...l,phone:p.target.value})})]}),o.jsxs("div",{className:"form-group full-width",children:[o.jsx("label",{children:"Business Address"}),o.jsx("input",{type:"text",value:l.address,onChange:p=>c({...l,address:p.target.value})})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{children:"Currency"}),o.jsxs("select",{value:l.currency,onChange:p=>c({...l,currency:p.target.value}),style:{padding:"0.75rem",borderRadius:"8px",border:"1px solid #ddd"},children:[o.jsx("option",{value:"INR",children:"INR ()"}),o.jsx("option",{value:"USD",children:"USD ($)"}),o.jsx("option",{value:"EUR",children:"EUR ()"})]})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{children:"Tax Rate (%)"}),o.jsx("input",{type:"number",value:l.taxRate,onChange:p=>c({...l,taxRate:parseFloat(p.target.value)}),min:"0",max:"100",step:"0.1"})]})]}),o.jsx("button",{onClick:x,disabled:r,className:"submit-btn",children:r?" Saving...":" Save Settings"})]})}),e==="shipping"&&o.jsx("div",{className:"content-section",children:o.jsxs("div",{className:"upload-card",children:[o.jsx("h2",{children:" Shipping & Delivery"}),o.jsx("p",{className:"helper-text",children:"Configure shipping rates and delivery options"}),o.jsxs("div",{className:"form-grid",children:[o.jsxs("div",{className:"form-group",children:[o.jsx("label",{children:"Free Shipping Threshold ()"}),o.jsx("input",{type:"number",value:u.freeShippingThreshold,onChange:p=>h({...u,freeShippingThreshold:parseFloat(p.target.value)}),min:"0"})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{children:"Standard Shipping ()"}),o.jsx("input",{type:"number",value:u.standardShipping,onChange:p=>h({...u,standardShipping:parseFloat(p.target.value)}),min:"0"})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{children:"Express Shipping ()"}),o.jsx("input",{type:"number",value:u.expressShipping,onChange:p=>h({...u,expressShipping:parseFloat(p.target.value)}),min:"0"})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{children:"Estimated Delivery Time"}),o.jsx("input",{type:"text",value:u.estimatedDays,onChange:p=>h({...u,estimatedDays:p.target.value}),placeholder:"e.g., 3-7 business days"})]})]}),o.jsx("button",{onClick:w,disabled:r,className:"submit-btn",children:r?" Saving...":" Save Shipping Settings"})]})}),e==="payment"&&o.jsx("div",{className:"content-section",children:o.jsxs("div",{className:"upload-card",children:[o.jsx("h2",{children:" Payment Gateway Configuration"}),o.jsx("p",{className:"helper-text",children:"Configure payment methods and gateway settings"}),o.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1.5rem",marginTop:"2rem"},children:[o.jsxs("div",{style:{padding:"1.5rem",border:"2px solid #e8e8e8",borderRadius:"12px"},children:[o.jsx("h3",{style:{marginBottom:"1rem"},children:" Razorpay (Recommended for India)"}),o.jsx("p",{style:{color:"#666",marginBottom:"1rem"},children:"Accept UPI, Cards, Netbanking, and Wallets"}),o.jsxs("div",{className:"form-group",style:{marginBottom:"1rem"},children:[o.jsx("label",{children:"API Key"}),o.jsx("input",{type:"text",placeholder:"Enter Razorpay API Key"})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{children:"Secret Key"}),o.jsx("input",{type:"password",placeholder:"Enter Razorpay Secret Key"})]}),o.jsx("button",{style:{marginTop:"1rem",padding:"0.75rem 1.5rem",background:"#e71d36",color:"white",border:"none",borderRadius:"8px",cursor:"pointer"},children:"Save Razorpay Settings"})]}),o.jsxs("div",{style:{padding:"1.5rem",border:"2px solid #e8e8e8",borderRadius:"12px"},children:[o.jsx("h3",{style:{marginBottom:"1rem"},children:" Cash on Delivery"}),o.jsx("p",{style:{color:"#666",marginBottom:"1rem"},children:"Allow customers to pay on delivery"}),o.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer"},children:[o.jsx("input",{type:"checkbox",defaultChecked:!0}),o.jsx("span",{children:"Enable Cash on Delivery"})]})]}),o.jsxs("div",{style:{padding:"1.5rem",border:"2px solid #e8e8e8",borderRadius:"12px"},children:[o.jsx("h3",{style:{marginBottom:"1rem"},children:" Stripe (International)"}),o.jsx("p",{style:{color:"#666",marginBottom:"1rem"},children:"Accept international credit/debit cards"}),o.jsxs("div",{className:"form-group",style:{marginBottom:"1rem"},children:[o.jsx("label",{children:"Publishable Key"}),o.jsx("input",{type:"text",placeholder:"Enter Stripe Publishable Key"})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{children:"Secret Key"}),o.jsx("input",{type:"password",placeholder:"Enter Stripe Secret Key"})]}),o.jsx("button",{style:{marginTop:"1rem",padding:"0.75rem 1.5rem",background:"#6c757d",color:"white",border:"none",borderRadius:"8px",cursor:"pointer"},children:"Save Stripe Settings"})]})]})]})})]})};function jP(){const{user:t}=st(),[e,n]=S.useState("overview"),[r,s]=S.useState(!1),[i,a]=S.useState({fullName:"",phone:"",email:""}),[l,c]=S.useState([]),[u,h]=S.useState({name:"",address:"",city:"",state:"",pincode:"",phone:"",isDefault:!1});S.useEffect(()=>{t&&f()},[t]);const f=async()=>{try{const p=M(F,`users/${t.uid}`),_=await oe(p);if(_.exists()){const m=_.val();a({fullName:m.fullName||"",phone:m.phone||"",email:m.email||t.email}),c(m.addresses||[])}}catch(p){console.error("Error loading user data:",p)}},d=async()=>{s(!0);try{const p=M(F,`users/${t.uid}`);await De(p,{...t,...i,addresses:l}),alert(" Profile updated successfully!")}catch(p){console.error("Error saving profile:",p),alert(" Failed to update profile")}finally{s(!1)}},x=()=>{if(!u.name||!u.address||!u.city){alert("Please fill in all required fields");return}c([...l,{...u,id:Date.now()}]),h({name:"",address:"",city:"",state:"",pincode:"",phone:"",isDefault:!1}),alert(' Address added! Click "Save Changes" to save.')},w=p=>{c(l.filter(_=>_.id!==p))};return o.jsxs("div",{className:"page-shell",style:{maxWidth:"1200px"},children:[o.jsx("h1",{children:" My Account"}),o.jsxs("div",{style:{marginTop:"2rem"},children:[o.jsxs("div",{style:{background:"linear-gradient(135deg, #ffffff 0%, #f9f9f9 100%)",padding:"2rem",borderRadius:"20px",marginBottom:"2rem",border:"1px solid #e8e8e8"},children:[o.jsxs("h2",{style:{fontSize:"1.5rem",marginBottom:"1rem",color:"#1a1a1a"},children:[" Welcome, ",(t==null?void 0:t.fullName)||(t==null?void 0:t.username)]}),o.jsx("p",{style:{color:"#666",fontSize:"1rem",lineHeight:"1.6",marginBottom:"1.5rem"},children:"Manage your personal information, track orders, and update your preferences."})]}),o.jsxs("div",{style:{display:"flex",gap:"1rem",marginBottom:"2rem",flexWrap:"wrap"},children:[o.jsx("button",{onClick:()=>n("overview"),style:{padding:"0.75rem 1.5rem",background:e==="overview"?"#e71d36":"white",color:e==="overview"?"white":"#666",border:"1px solid #ddd",borderRadius:"8px",cursor:"pointer",fontWeight:"600"},children:" Overview"}),o.jsx("button",{onClick:()=>n("profile"),style:{padding:"0.75rem 1.5rem",background:e==="profile"?"#e71d36":"white",color:e==="profile"?"white":"#666",border:"1px solid #ddd",borderRadius:"8px",cursor:"pointer",fontWeight:"600"},children:" Profile"}),o.jsx("button",{onClick:()=>n("addresses"),style:{padding:"0.75rem 1.5rem",background:e==="addresses"?"#e71d36":"white",color:e==="addresses"?"white":"#666",border:"1px solid #ddd",borderRadius:"8px",cursor:"pointer",fontWeight:"600"},children:" Addresses"}),o.jsx(R,{to:"/orders",style:{padding:"0.75rem 1.5rem",background:"white",color:"#666",border:"1px solid #ddd",borderRadius:"8px",textDecoration:"none",fontWeight:"600"},children:" Orders"})]}),e==="overview"&&o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"1.5rem"},children:[o.jsxs("div",{style:{background:"linear-gradient(135deg, #ffffff 0%, #f9f9f9 100%)",padding:"2rem",borderRadius:"16px",border:"1px solid #e8e8e8",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"3rem",marginBottom:"1rem"},children:""}),o.jsx("h3",{style:{fontSize:"1.2rem",marginBottom:"0.5rem",color:"#1a1a1a"},children:"Your Orders"}),o.jsx("p",{style:{color:"#666",fontSize:"0.9rem",marginBottom:"1rem"},children:"Track, return, or buy things again"}),o.jsx(R,{to:"/orders",style:{display:"inline-block",padding:"0.5rem 1.5rem",background:"#e71d36",color:"white",textDecoration:"none",borderRadius:"8px"},children:"View Orders"})]}),o.jsxs("div",{onClick:()=>n("profile"),style:{background:"linear-gradient(135deg, #ffffff 0%, #f9f9f9 100%)",padding:"2rem",borderRadius:"16px",border:"1px solid #e8e8e8",textAlign:"center",cursor:"pointer"},children:[o.jsx("div",{style:{fontSize:"3rem",marginBottom:"1rem"},children:""}),o.jsx("h3",{style:{fontSize:"1.2rem",marginBottom:"0.5rem",color:"#1a1a1a"},children:"Profile Settings"}),o.jsx("p",{style:{color:"#666",fontSize:"0.9rem",marginBottom:"1rem"},children:"Edit your name and contact info"}),o.jsx("span",{style:{display:"inline-block",padding:"0.5rem 1.5rem",background:"#e71d36",color:"white",borderRadius:"8px"},children:"Manage"})]}),o.jsxs("div",{onClick:()=>n("addresses"),style:{background:"linear-gradient(135deg, #ffffff 0%, #f9f9f9 100%)",padding:"2rem",borderRadius:"16px",border:"1px solid #e8e8e8",textAlign:"center",cursor:"pointer"},children:[o.jsx("div",{style:{fontSize:"3rem",marginBottom:"1rem"},children:""}),o.jsx("h3",{style:{fontSize:"1.2rem",marginBottom:"0.5rem",color:"#1a1a1a"},children:"Addresses"}),o.jsx("p",{style:{color:"#666",fontSize:"0.9rem",marginBottom:"1rem"},children:"Edit addresses for orders and gifts"}),o.jsx("span",{style:{display:"inline-block",padding:"0.5rem 1.5rem",background:"#e71d36",color:"white",borderRadius:"8px"},children:"Manage"})]}),o.jsxs("div",{style:{background:"linear-gradient(135deg, #ffffff 0%, #f9f9f9 100%)",padding:"2rem",borderRadius:"16px",border:"1px solid #e8e8e8",textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"3rem",marginBottom:"1rem"},children:""}),o.jsx("h3",{style:{fontSize:"1.2rem",marginBottom:"0.5rem",color:"#1a1a1a"},children:"Payment Options"}),o.jsx("p",{style:{color:"#666",fontSize:"0.9rem",marginBottom:"1rem"},children:"Manage payment methods"}),o.jsx("span",{style:{display:"inline-block",padding:"0.5rem 1.5rem",background:"#6c757d",color:"white",borderRadius:"8px"},children:"Coming Soon"})]})]}),e==="profile"&&o.jsxs("div",{style:{background:"white",padding:"2rem",borderRadius:"16px",border:"1px solid #e8e8e8"},children:[o.jsx("h2",{style:{marginBottom:"1.5rem"},children:" Profile Information"}),o.jsxs("div",{style:{display:"grid",gap:"1.5rem",maxWidth:"600px"},children:[o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600"},children:"Full Name"}),o.jsx("input",{type:"text",value:i.fullName,onChange:p=>a({...i,fullName:p.target.value}),style:{width:"100%",padding:"0.75rem",borderRadius:"8px",border:"1px solid #ddd"}})]}),o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600"},children:"Email Address"}),o.jsx("input",{type:"email",value:i.email,disabled:!0,style:{width:"100%",padding:"0.75rem",borderRadius:"8px",border:"1px solid #ddd",background:"#f5f5f5",cursor:"not-allowed"}})]}),o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600"},children:"Phone Number"}),o.jsx("input",{type:"tel",value:i.phone,onChange:p=>a({...i,phone:p.target.value}),placeholder:"+91 1234567890",style:{width:"100%",padding:"0.75rem",borderRadius:"8px",border:"1px solid #ddd"}})]}),o.jsx("button",{onClick:d,disabled:r,style:{padding:"0.75rem 2rem",background:"#e71d36",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:"600",fontSize:"1rem"},children:r?" Saving...":" Save Changes"})]})]}),e==="addresses"&&o.jsxs("div",{children:[o.jsxs("div",{style:{background:"white",padding:"2rem",borderRadius:"16px",border:"1px solid #e8e8e8",marginBottom:"2rem"},children:[o.jsx("h2",{style:{marginBottom:"1.5rem"},children:" Add New Address"}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"1rem",marginBottom:"1rem"},children:[o.jsx("input",{type:"text",placeholder:"Full Name",value:u.name,onChange:p=>h({...u,name:p.target.value}),style:{padding:"0.75rem",borderRadius:"8px",border:"1px solid #ddd"}}),o.jsx("input",{type:"tel",placeholder:"Phone Number",value:u.phone,onChange:p=>h({...u,phone:p.target.value}),style:{padding:"0.75rem",borderRadius:"8px",border:"1px solid #ddd"}})]}),o.jsx("textarea",{placeholder:"Address (House No, Building, Street)",value:u.address,onChange:p=>h({...u,address:p.target.value}),style:{width:"100%",padding:"0.75rem",borderRadius:"8px",border:"1px solid #ddd",marginBottom:"1rem",minHeight:"80px"}}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem"},children:[o.jsx("input",{type:"text",placeholder:"City",value:u.city,onChange:p=>h({...u,city:p.target.value}),style:{padding:"0.75rem",borderRadius:"8px",border:"1px solid #ddd"}}),o.jsx("input",{type:"text",placeholder:"State",value:u.state,onChange:p=>h({...u,state:p.target.value}),style:{padding:"0.75rem",borderRadius:"8px",border:"1px solid #ddd"}}),o.jsx("input",{type:"text",placeholder:"PIN Code",value:u.pincode,onChange:p=>h({...u,pincode:p.target.value}),style:{padding:"0.75rem",borderRadius:"8px",border:"1px solid #ddd"}})]}),o.jsx("button",{onClick:x,style:{marginTop:"1rem",padding:"0.75rem 2rem",background:"#28a745",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:"600"},children:" Add Address"})]}),o.jsx("h2",{style:{marginBottom:"1.5rem"},children:" Saved Addresses"}),o.jsx("div",{style:{display:"grid",gap:"1rem"},children:l.length===0?o.jsx("p",{style:{textAlign:"center",color:"#999",padding:"2rem"},children:"No addresses saved yet"}):l.map(p=>o.jsxs("div",{style:{background:"white",padding:"1.5rem",borderRadius:"12px",border:"1px solid #e8e8e8",display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[o.jsxs("div",{children:[o.jsx("h4",{style:{marginBottom:"0.5rem"},children:p.name}),o.jsx("p",{style:{color:"#666",marginBottom:"0.25rem"},children:p.address}),o.jsxs("p",{style:{color:"#666"},children:[p.city,", ",p.state," - ",p.pincode]}),o.jsxs("p",{style:{color:"#666"},children:["Phone: ",p.phone]})]}),o.jsx("button",{onClick:()=>w(p.id),style:{padding:"0.5rem 1rem",background:"#dc3545",color:"white",border:"none",borderRadius:"8px",cursor:"pointer"},children:" Remove"})]},p.id))}),l.length>0&&o.jsx("button",{onClick:d,disabled:r,style:{marginTop:"1.5rem",padding:"0.75rem 2rem",background:"#e71d36",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:"600",fontSize:"1rem"},children:r?" Saving...":" Save All Changes"})]})]})]})}function IP(){const{user:t}=st(),{orders:e}=_o(),[n,r]=S.useState([]),[s,i]=S.useState(!0);S.useEffect(()=>{a()},[t]);const a=async()=>{i(!0);try{if(t){const c=M(F,"orders"),u=await oe(c);if(u.exists()){const h=u.val(),f=Object.entries(h).filter(([d,x])=>x.userId===t.uid).map(([d,x])=>({id:d,...x})).sort((d,x)=>new Date(x.placedAt)-new Date(d.placedAt));r(f)}else r(e||[])}else r(e||[])}catch(c){console.error("Error loading orders:",c),r(e||[])}finally{i(!1)}},l=async c=>{const u=n.find(h=>h.id===c);if((u==null?void 0:u.status)!=="pending"){alert(" Can only cancel pending orders");return}if(window.confirm("Are you sure you want to cancel this order?"))try{const h=M(F,`orders/${c}`);await zs(h,{status:"cancelled",cancelledAt:new Date().toISOString()}),alert(" Order cancelled successfully!"),a()}catch(h){console.error("Error cancelling order:",h),alert(" Failed to cancel order")}};return s?o.jsx("div",{style:{textAlign:"center",padding:"4rem 2rem"},children:o.jsx("p",{style:{fontSize:"1.5rem"},children:" Loading orders..."})}):o.jsxs("div",{className:"page-shell",style:{maxWidth:"1200px"},children:[o.jsx("h1",{children:" Your Orders"}),n.length===0?o.jsxs("div",{className:"empty-state",children:[o.jsx("p",{style:{fontSize:"1.5rem",marginBottom:"1rem"},children:"No orders yet"}),o.jsx("p",{style:{fontSize:"1rem",color:"#666",marginBottom:"2rem"},children:"Looks like you haven't placed any orders. Start shopping now!"}),o.jsx(R,{to:"/products",className:"primary-button",style:{display:"inline-block",padding:"1rem 3rem"},children:" Start Shopping"})]}):o.jsxs("div",{style:{marginTop:"2rem"},children:[o.jsxs("p",{style:{color:"#666",marginBottom:"2rem"},children:["You have ",n.length," order",n.length!==1?"s":""]}),o.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1.5rem"},children:n.map(c=>{var u,h,f;return o.jsxs("div",{style:{background:"linear-gradient(135deg, #ffffff 0%, #f9f9f9 100%)",border:"1px solid #e8e8e8",borderRadius:"20px",padding:"2rem",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.06)"},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"1.5rem",flexWrap:"wrap",gap:"1rem",alignItems:"flex-start"},children:[o.jsxs("div",{style:{flex:1},children:[o.jsxs("h3",{style:{fontSize:"1.2rem",color:"#1a1a1a",marginBottom:"0.5rem"},children:["Order #",c.id.substring(0,8)]}),o.jsxs("p",{style:{color:"#666",fontSize:"0.9rem",marginBottom:"0.5rem"},children:["Placed on ",new Date(c.createdAt||c.placedAt).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})]}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx("span",{style:{fontSize:"0.9rem",color:"#666"},children:"Status: "}),o.jsx("span",{style:{padding:"0.25rem 0.75rem",background:c.status==="delivered"?"#28a745":c.status==="cancelled"?"#dc3545":c.status==="shipped"?"#007bff":"#ffc107",color:"white",borderRadius:"12px",fontSize:"0.85rem",fontWeight:"600"},children:((u=c.status)==null?void 0:u.toUpperCase())||"PENDING"})]})]}),o.jsxs("div",{style:{textAlign:"right"},children:[o.jsx("p",{style:{fontSize:"0.9rem",color:"#666",marginBottom:"0.25rem"},children:"Order Total"}),o.jsxs("p",{style:{fontSize:"1.8rem",fontWeight:"800",color:"#e71d36",marginBottom:"1rem"},children:["",(c.total||((h=c.items)==null?void 0:h.reduce((d,x)=>d+x.price*x.quantity,0))||0).toFixed(2)]}),c.status==="pending"&&o.jsx("button",{onClick:()=>l(c.id),style:{padding:"0.5rem 1rem",background:"#dc3545",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:"600",fontSize:"0.9rem"},children:" Cancel Order"})]})]}),o.jsxs("div",{style:{borderTop:"1px solid #e8e8e8",paddingTop:"1.5rem"},children:[o.jsxs("h4",{style:{fontSize:"1rem",marginBottom:"1rem",color:"#1a1a1a"},children:["Items (",((f=c.items)==null?void 0:f.length)||0,"):"]}),o.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:(c.items||[]).map((d,x)=>o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0.75rem",background:"#ffffff",borderRadius:"12px",border:"1px solid #f0f0f0"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",flex:1},children:[d.image&&o.jsx("img",{src:d.image,alt:d.title,style:{width:"50px",height:"50px",objectFit:"cover",borderRadius:"8px"}}),o.jsxs("div",{children:[o.jsx("p",{style:{fontWeight:"600",marginBottom:"0.25rem"},children:d.title||"Product"}),o.jsxs("p",{style:{color:"#999",fontSize:"0.85rem"},children:["Qty: ",d.quantity]})]})]}),o.jsxs("p",{style:{fontWeight:"600",minWidth:"80px",textAlign:"right"},children:["",(d.price*d.quantity).toFixed(2)]})]},x))})]}),c.shippingAddress&&o.jsxs("div",{style:{marginTop:"1.5rem",padding:"1rem",background:"#f5f5f5",borderRadius:"12px"},children:[o.jsx("p",{style:{fontSize:"0.9rem",fontWeight:"600",marginBottom:"0.5rem"},children:" Shipping Address:"}),o.jsxs("p",{style:{color:"#666",fontSize:"0.9rem",lineHeight:"1.6"},children:[c.shippingAddress.name,o.jsx("br",{}),c.shippingAddress.address,o.jsx("br",{}),c.shippingAddress.city,", ",c.shippingAddress.state," - ",c.shippingAddress.pincode,o.jsx("br",{}),o.jsx("strong",{children:"Phone:"})," ",c.shippingAddress.phone]})]})]},c.id)})})]})]})}function NP(){var I,U;const[t,e]=S.useState(""),[n,r]=S.useState(""),[s,i]=S.useState(""),[a,l]=S.useState(""),[c,u]=S.useState(""),[h,f]=S.useState(!1),[d,x]=S.useState(!1),{login:w,register:p,loginWithGoogle:_}=st(),m=sr(),y=((U=(I=wn().state)==null?void 0:I.from)==null?void 0:U.pathname)||"/",v=j=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(j),C=async j=>{if(j.preventDefault(),u(""),!t||!n){u("Please fill in all required fields");return}if(!v(t)){u("Please enter a valid email address");return}if(n.length<6){u("Password must be at least 6 characters");return}if(d){if(n!==s){u("Passwords do not match");return}if(!a.trim()){u("Please enter your full name");return}}f(!0);try{d?(await p(t,n,a),alert("Account created successfully! Welcome to Drift Enterprises."),m(y,{replace:!0})):(await w(t,n),m(y,{replace:!0}))}catch($){console.error("Authentication error:",$),$.code==="auth/email-already-in-use"?u("This email is already registered. Please login instead."):$.code==="auth/invalid-email"?u("Invalid email address"):$.code==="auth/weak-password"?u("Password is too weak. Use at least 6 characters."):$.code==="auth/user-not-found"?u("No account found with this email"):$.code==="auth/wrong-password"?u("Incorrect password"):$.code==="auth/invalid-credential"?u("Invalid email or password"):u($.message||"Authentication failed. Please try again.")}finally{f(!1)}},E=()=>{x(!d),u(""),e(""),r(""),i(""),l("")},b=async j=>{j.preventDefault(),u(""),f(!0);try{await _(),m(y,{replace:!0})}catch($){console.error("Google sign-in error:",$),$.code==="auth/popup-closed-by-user"?u("Sign-in was cancelled."):$.code==="auth/popup-blocked"?u("Popup was blocked. Please check your browser settings."):u($.message||"Failed to sign in with Google. Please try again.")}finally{f(!1)}};return o.jsxs("div",{className:"page-shell",style:{maxWidth:"500px",margin:"4rem auto"},children:[o.jsxs("div",{style:{textAlign:"center",marginBottom:"2rem"},children:[o.jsx("div",{style:{fontSize:"4rem",marginBottom:"1rem"},children:d?"":""}),o.jsx("h1",{style:{fontSize:"2.5rem",marginBottom:"0.5rem"},children:d?"Create Account":"Welcome Back"}),o.jsx("p",{style:{color:"#666",fontSize:"1rem"},children:d?"Join Drift Enterprises today":"Sign in to your account"})]}),o.jsxs("form",{onSubmit:C,style:{background:"linear-gradient(135deg, #ffffff 0%, #f9f9f9 100%)",padding:"2.5rem",borderRadius:"20px",border:"1px solid #e8e8e8",boxShadow:"0 8px 30px rgba(0, 0, 0, 0.08)"},children:[c&&o.jsxs("div",{style:{background:"linear-gradient(135deg, #fee 0%, #fdd 100%)",color:"#c41530",padding:"1rem 1.5rem",borderRadius:"12px",marginBottom:"1.5rem",border:"1px solid #f5c6cb",fontSize:"0.9rem",fontWeight:"600"},children:[" ",c]}),d&&o.jsxs("div",{style:{marginBottom:"1.5rem"},children:[o.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"700",color:"#1a1a1a",fontSize:"0.95rem"},children:"Full Name *"}),o.jsx("input",{type:"text",value:a,onChange:j=>l(j.target.value),required:d,placeholder:"Enter your full name",disabled:h,style:{width:"100%",padding:"0.75rem 1rem",border:"2px solid #e8e8e8",borderRadius:"12px",fontSize:"1rem",transition:"all 0.3s ease",background:"#fafafa"},onFocus:j=>{j.target.style.borderColor="#e71d36",j.target.style.background="#ffffff"},onBlur:j=>{j.target.style.borderColor="#e8e8e8",j.target.style.background="#fafafa"}})]}),o.jsxs("div",{style:{marginBottom:"1.5rem"},children:[o.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"700",color:"#1a1a1a",fontSize:"0.95rem"},children:"Email *"}),o.jsx("input",{type:"email",value:t,onChange:j=>e(j.target.value),required:!0,placeholder:"Enter your email",disabled:h,style:{width:"100%",padding:"0.75rem 1rem",border:"2px solid #e8e8e8",borderRadius:"12px",fontSize:"1rem",transition:"all 0.3s ease",background:"#fafafa"},onFocus:j=>{j.target.style.borderColor="#e71d36",j.target.style.background="#ffffff"},onBlur:j=>{j.target.style.borderColor="#e8e8e8",j.target.style.background="#fafafa"}})]}),o.jsxs("div",{style:{marginBottom:d?"1.5rem":"2rem"},children:[o.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"700",color:"#1a1a1a",fontSize:"0.95rem"},children:"Password *"}),o.jsx("input",{type:"password",value:n,onChange:j=>r(j.target.value),required:!0,placeholder:"Enter your password",minLength:"6",disabled:h,style:{width:"100%",padding:"0.75rem 1rem",border:"2px solid #e8e8e8",borderRadius:"12px",fontSize:"1rem",transition:"all 0.3s ease",background:"#fafafa"},onFocus:j=>{j.target.style.borderColor="#e71d36",j.target.style.background="#ffffff"},onBlur:j=>{j.target.style.borderColor="#e8e8e8",j.target.style.background="#fafafa"}}),d&&o.jsx("small",{style:{color:"#666",fontSize:"0.85rem",marginTop:"0.25rem",display:"block"},children:"Password must be at least 6 characters"})]}),d&&o.jsxs("div",{style:{marginBottom:"2rem"},children:[o.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"700",color:"#1a1a1a",fontSize:"0.95rem"},children:"Confirm Password *"}),o.jsx("input",{type:"password",value:s,onChange:j=>i(j.target.value),required:d,placeholder:"Re-enter your password",minLength:"6",disabled:h,style:{width:"100%",padding:"0.75rem 1rem",border:"2px solid #e8e8e8",borderRadius:"12px",fontSize:"1rem",transition:"all 0.3s ease",background:"#fafafa"},onFocus:j=>{j.target.style.borderColor="#e71d36",j.target.style.background="#ffffff"},onBlur:j=>{j.target.style.borderColor="#e8e8e8",j.target.style.background="#fafafa"}})]}),o.jsx("button",{type:"submit",disabled:h,className:"primary-button",style:{width:"100%",padding:"1rem",fontSize:"1.05rem",marginBottom:"1rem",opacity:h?.6:1,cursor:h?"not-allowed":"pointer"},children:h?d?"Creating Account...":"Signing in...":d?" Create Account":" Sign In"}),o.jsxs("button",{type:"button",onClick:b,disabled:h,style:{width:"100%",padding:"0.875rem",backgroundColor:"white",color:"#1f2937",border:"2px solid #e8e8e8",borderRadius:"12px",fontSize:"0.95rem",fontWeight:"600",cursor:h?"not-allowed":"pointer",transition:"all 0.3s ease",opacity:h?.6:1,marginBottom:"1rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},onMouseEnter:j=>{h||(j.target.style.backgroundColor="#f5f5f5",j.target.style.borderColor="#e71d36")},onMouseLeave:j=>{j.target.style.backgroundColor="white",j.target.style.borderColor="#e8e8e8"},children:[o.jsx("span",{children:""}),h?"Signing in...":"Continue with Google"]}),o.jsxs("div",{style:{textAlign:"center",position:"relative",margin:"1.5rem 0"},children:[o.jsx("div",{style:{position:"absolute",top:"50%",left:0,right:0,height:"1px",backgroundColor:"#e8e8e8"}}),o.jsx("span",{style:{position:"relative",backgroundColor:"#f9f9f9",padding:"0 1rem",color:"#666",fontSize:"0.85rem"},children:"OR"})]}),o.jsx("button",{type:"button",onClick:E,disabled:h,style:{width:"100%",padding:"0.875rem",backgroundColor:"white",color:"#e71d36",border:"2px solid #e8e8e8",borderRadius:"12px",fontSize:"0.95rem",fontWeight:"600",cursor:h?"not-allowed":"pointer",transition:"all 0.3s ease",opacity:h?.6:1},onMouseEnter:j=>{h||(j.target.style.borderColor="#e71d36",j.target.style.backgroundColor="#fff5f5")},onMouseLeave:j=>{j.target.style.borderColor="#e8e8e8",j.target.style.backgroundColor="white"},children:d?"Already have an account? Sign In":"Don't have an account? Sign Up"}),d&&o.jsx("p",{style:{textAlign:"center",color:"#666",fontSize:"0.8rem",marginTop:"1.5rem",lineHeight:"1.5"},children:"By creating an account, you agree to Drift Enterprises' Terms of Service and Privacy Policy"})]}),o.jsx("div",{style:{textAlign:"center",marginTop:"2rem"},children:o.jsx(R,{to:"/",style:{color:"#666",fontSize:"0.9rem",textDecoration:"underline"},children:" Back to Home"})})]})}function TP(){return o.jsx("div",{className:"page-shell",style:{maxWidth:"800px",textAlign:"center"},children:o.jsxs("div",{style:{padding:"4rem 2rem"},children:[o.jsx("div",{style:{fontSize:"8rem",marginBottom:"1rem"},children:""}),o.jsx("h1",{style:{fontSize:"3rem",marginBottom:"1rem",color:"#1a1a1a"},children:"404 - Page Not Found"}),o.jsxs("p",{style:{fontSize:"1.2rem",color:"#666",marginBottom:"2rem",lineHeight:"1.6"},children:["Oops! The page you're looking for doesn't exist.",o.jsx("br",{}),"It might have been moved or deleted."]}),o.jsxs("div",{style:{background:"linear-gradient(135deg, #f9f9f9 0%, #ffffff 100%)",padding:"2rem",borderRadius:"20px",marginBottom:"2rem",border:"1px solid #e8e8e8"},children:[o.jsx("h3",{style:{marginBottom:"1rem",color:"#1a1a1a"},children:"Quick Links:"}),o.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"center",flexWrap:"wrap"},children:[o.jsx(R,{to:"/",className:"primary-button",style:{padding:"0.75rem 1.5rem"},children:" Home"}),o.jsx(R,{to:"/products",className:"primary-button",style:{padding:"0.75rem 1.5rem",background:"linear-gradient(135deg, #1a1a1a 0%, #000000 100%)"},children:" Products"}),o.jsx(R,{to:"/cart",className:"primary-button",style:{padding:"0.75rem 1.5rem",background:"linear-gradient(135deg, #1a1a1a 0%, #000000 100%)"},children:" Cart"})]})]}),o.jsxs("p",{style:{color:"#999",fontSize:"0.9rem"},children:["Need help? ",o.jsx(R,{to:"/",style:{color:"#e71d36",fontWeight:"700"},children:"Contact Support"})]})]})})}function RP(){return o.jsx(rP,{children:o.jsx(YR,{children:o.jsxs(QR,{children:[o.jsx(sP,{}),o.jsx("main",{className:"amazon-main",children:o.jsxs(CS,{children:[o.jsx(le,{path:"/",element:o.jsx(aP,{})}),o.jsx(le,{path:"/products",element:o.jsx(lP,{})}),o.jsx(le,{path:"/products/:id",element:o.jsx(cP,{})}),o.jsx(le,{path:"/cart",element:o.jsx(uP,{})}),o.jsx(le,{path:"/checkout",element:o.jsx(dP,{})}),o.jsx(le,{path:"/login",element:o.jsx(NP,{})}),o.jsx(le,{path:"/admin/setup",element:o.jsx(mP,{})}),o.jsx(le,{path:"/account",element:o.jsx(Ac,{children:o.jsx(jP,{})})}),o.jsx(le,{path:"/orders",element:o.jsx(Ac,{children:o.jsx(IP,{})})}),o.jsxs(le,{path:"/admin",element:o.jsx(Ac,{requireAdmin:!0,children:o.jsx(nP,{})}),children:[o.jsx(le,{index:!0,element:o.jsx(gP,{})}),o.jsx(le,{path:"homepage",element:o.jsx(vP,{})}),o.jsx(le,{path:"products",element:o.jsx(pP,{})}),o.jsx(le,{path:"stock",element:o.jsx(xP,{})}),o.jsx(le,{path:"analytics",element:o.jsx(_P,{})}),o.jsx(le,{path:"orders",element:o.jsx(wP,{})}),o.jsx(le,{path:"customers",element:o.jsx(SP,{})}),o.jsx(le,{path:"reviews",element:o.jsx(CP,{})}),o.jsx(le,{path:"revenue",element:o.jsx(EP,{})}),o.jsx(le,{path:"activity",element:o.jsx(kP,{})}),o.jsx(le,{path:"settings",element:o.jsx(bP,{})}),o.jsx(le,{path:"banners",element:o.jsx(yP,{})})]}),o.jsx(le,{path:"*",element:o.jsx(TP,{})})]})}),o.jsxs("footer",{className:"amazon-footer",children:[o.jsx("div",{className:"amazon-footer-back",children:o.jsx("button",{className:"back-to-top-btn",onClick:()=>window.scrollTo({top:0,behavior:"smooth"}),children:" Back to Top"})}),o.jsxs("div",{className:"amazon-footer-main",children:[o.jsxs("div",{className:"footer-column",children:[o.jsx("h4",{children:"About Us"}),o.jsxs("ul",{children:[o.jsx("li",{children:o.jsx(R,{to:"/",children:" About Drift Enterprises"})}),o.jsx("li",{children:o.jsx(R,{to:"/",children:" Careers"})}),o.jsx("li",{children:o.jsx(R,{to:"/",children:" News & Press"})}),o.jsx("li",{children:o.jsx(R,{to:"/",children:" Blog"})})]})]}),o.jsxs("div",{className:"footer-column",children:[o.jsx("h4",{children:"Connect"}),o.jsxs("ul",{children:[o.jsx("li",{children:o.jsx("a",{href:"https://facebook.com",target:"_blank",rel:"noopener noreferrer",children:" Facebook"})}),o.jsx("li",{children:o.jsx("a",{href:"https://twitter.com",target:"_blank",rel:"noopener noreferrer",children:" Twitter"})}),o.jsx("li",{children:o.jsx("a",{href:"https://instagram.com",target:"_blank",rel:"noopener noreferrer",children:" Instagram"})}),o.jsx("li",{children:o.jsx("a",{href:"https://linkedin.com",target:"_blank",rel:"noopener noreferrer",children:" LinkedIn"})})]})]}),o.jsxs("div",{className:"footer-column",children:[o.jsx("h4",{children:"For Sellers"}),o.jsxs("ul",{children:[o.jsx("li",{children:o.jsx(R,{to:"/admin/products",children:" Sell with Drift"})}),o.jsx("li",{children:o.jsx(R,{to:"/",children:" Partner Program"})}),o.jsx("li",{children:o.jsx(R,{to:"/",children:" Advertising"})}),o.jsx("li",{children:o.jsx(R,{to:"/",children:" Logistics"})})]})]}),o.jsxs("div",{className:"footer-column",children:[o.jsx("h4",{children:"Support"}),o.jsxs("ul",{children:[o.jsx("li",{children:o.jsx(R,{to:"/account",children:" My Account"})}),o.jsx("li",{children:o.jsx(R,{to:"/",children:" Support Center"})}),o.jsx("li",{children:o.jsx(R,{to:"/",children:" Contact Support"})}),o.jsx("li",{children:o.jsx(R,{to:"/account",children:" Preferences"})})]})]})]}),o.jsxs("div",{className:"amazon-footer-bottom",children:[o.jsx("div",{className:"footer-logo",children:" DRIFT ENTERPRISES"}),o.jsx("div",{className:"footer-copyright",children:" 2024 Drift Enterprises - All Rights Reserved | Crafted with "})]})]})]})})})}iv(document.getElementById("root")).render(o.jsx(sd.StrictMode,{children:o.jsx(PS,{children:o.jsx(RP,{})})}));
